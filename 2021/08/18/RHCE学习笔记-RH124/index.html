<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>RHCE学习笔记|RH124 | 茕孑</title><meta name="author" content="LNSS"><meta name="copyright" content="LNSS"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="RH124 本部分笔记由老师原始的笔记修改整理而成，如果没有特别的格式能看出来是我自己添加修改的内容，出了问题请怪老师。 本笔记仅供参考，真正的笔记应该是自己的东西  祝考试的都过，学习的都有进步。 &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&amp;#x">
<meta property="og:type" content="article">
<meta property="og:title" content="RHCE学习笔记|RH124">
<meta property="og:url" content="https://lnsslimbo.github.io/2021/08/18/RHCE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RH124/index.html">
<meta property="og:site_name" content="茕孑">
<meta property="og:description" content="RH124 本部分笔记由老师原始的笔记修改整理而成，如果没有特别的格式能看出来是我自己添加修改的内容，出了问题请怪老师。 本笔记仅供参考，真正的笔记应该是自己的东西  祝考试的都过，学习的都有进步。 &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&amp;#x">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png">
<meta property="article:published_time" content="2021-08-18T10:41:50.000Z">
<meta property="article:modified_time" content="2022-07-12T11:10:38.176Z">
<meta property="article:author" content="LNSS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://lnsslimbo.github.io/2021/08/18/RHCE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RH124/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'RHCE学习笔记|RH124',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-07-12 19:10:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_1.css" ><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zyoushuo/Blog@latest/hexo/css/loading_style_2.css" ><link rel="stylesheet" href="/css/custom/twikoo_beautify.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/custom/fixed_comment.css"  media="defer" onload="this.media='all'"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><script src="/js/sakura.js"></script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-clock/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="pokeball-back"></div><div class="pokeball-loading"><div class="pokeball" id="pokeball-normal"></div><div class="pokeball" id="pokeball-great"></div><div class="pokeball" id="pokeball-ultra"></div><div class="pokeball" id="pokeball-master"></div><div class="pokeball" id="pokeball-safari"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/lnsslimbo/cdn@img%2Bvideo/blogimg/lnss.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-message"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">茕孑</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-message"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">RHCE学习笔记|RH124</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-18T10:41:50.000Z" title="发表于 2021-08-18 18:41:50">2021-08-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-12T11:10:38.176Z" title="更新于 2022-07-12 19:10:38">2022-07-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="RHCE学习笔记|RH124"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="RH124"><a href="#RH124" class="headerlink" title="RH124"></a>RH124</h1><blockquote>
<p>本部分笔记由老师原始的笔记修改整理而成，如果没有特别的格式能看出来是我自己添加修改的内容，出了问题请怪老师。</p>
<p>本笔记仅供参考，真正的笔记应该是自己的东西</p>
<hr>
<p>祝考试的都过，学习的都有进步。</p>
<p><strong>&#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; Copyright © 2021.8.18 LNSS. in Zhipan Li’s Class &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D;</strong></p>
</blockquote>
<h1 id="第零章-课前准备"><a href="#第零章-课前准备" class="headerlink" title="第零章 课前准备"></a>第零章 课前准备</h1><h2 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h2><p>李志攀</p>
<p>RHCI </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">识别不到登录的kvm，可能是网关问题，route -n 查看</span><br><span class="line"></span><br><span class="line">route add default gw 加上默认网关，一般是172.25.255.255</span><br></pre></td></tr></table></figure>

<h2 id="课程简介"><a href="#课程简介" class="headerlink" title="课程简介"></a>课程简介</h2><p> 上课时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">9：00-17：30    上课时间</span><br><span class="line">12：00-13：00   吃饭、午休时间</span><br><span class="line">13：00-13：30   练习时间</span><br><span class="line">一天大概7节课，每节课45-50分钟，所以每节课休息时间10-15分钟</span><br><span class="line">课间我会使用倒计时软件，提醒大家及时回来上课</span><br></pre></td></tr></table></figure>

<h2 id="视频回放"><a href="#视频回放" class="headerlink" title="视频回放"></a>视频回放</h2><h2 id="远程软件"><a href="#远程软件" class="headerlink" title="远程软件"></a>远程软件</h2><p>向日葵</p>
<h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><p>技术外</p>
<h2 id="约法三章"><a href="#约法三章" class="headerlink" title="约法三章"></a>约法三章</h2><h2 id="课程安排"><a href="#课程安排" class="headerlink" title="课程安排"></a>课程安排</h2><table>
<thead>
<tr>
<th align="center">第一天</th>
<th>第二天</th>
<th align="left">第三天</th>
<th>第四天</th>
<th>第五天</th>
</tr>
</thead>
<tbody><tr>
<td align="center">虚拟机环境介绍</td>
<td>创建、查看编辑文本</td>
<td align="left">进程监控及管理</td>
<td>RHEL网络管理</td>
<td>访问Linux文件系统</td>
</tr>
<tr>
<td align="center">红帽企业Linux入门</td>
<td>管理本地用户和组</td>
<td align="left">控制服务和守护进程</td>
<td>归档与系统间复制文件</td>
<td>分析服务器和获取支持</td>
</tr>
<tr>
<td align="center">访问命令行</td>
<td>控制对文件的访问</td>
<td align="left">OpenSSH服务</td>
<td>安装与升级软件包</td>
<td>回顾复习</td>
</tr>
<tr>
<td align="center">从命令行管理文件</td>
<td></td>
<td align="left">日志分析及存储</td>
<td></td>
<td>RH124模拟考试环境部署</td>
</tr>
<tr>
<td align="center">在RHEL中获取帮助</td>
<td></td>
<td align="left"></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h2><table>
<thead>
<tr>
<th>ID</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td>硬件</td>
<td>cpu：VT-X、mem：8G，disk 80G</td>
</tr>
<tr>
<td>软件</td>
<td>OS：x64 APP：VMware-15（workstation|Fustion，苹果新系统不支持嵌套虚虚拟化）</td>
</tr>
<tr>
<td>文件</td>
<td>folder：RH294.vmx（配置文件）</td>
</tr>
<tr>
<td>压缩软件</td>
<td>7z&#x2F;win ，keka&#x2F;mac</td>
</tr>
<tr>
<td>冲突</td>
<td>关闭微软自带Hyper-V功能</td>
</tr>
</tbody></table>
<h2 id="workstation"><a href="#workstation" class="headerlink" title="workstation"></a>workstation</h2><h2 id="虚拟机作用"><a href="#虚拟机作用" class="headerlink" title="虚拟机作用"></a>虚拟机作用</h2><table>
<thead>
<tr>
<th>环境分类</th>
<th>VM 虚拟机名称</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>VMware</td>
<td>foundation0</td>
<td>宿主机</td>
</tr>
<tr>
<td>KVM</td>
<td>classroom</td>
<td>分配dhcp、dns、软件仓库</td>
</tr>
<tr>
<td>KVM</td>
<td>bastion</td>
<td>网关设备，连接其他机器的网络</td>
</tr>
<tr>
<td>KVM</td>
<td>workstation</td>
<td>提供图形界面连接其他机器：如abcd</td>
</tr>
<tr>
<td>KVM</td>
<td>servera、b、c、d</td>
<td>练习机，nic&#x2F;mac+IP+hostname</td>
</tr>
</tbody></table>
<h2 id="虚拟机账号密码"><a href="#虚拟机账号密码" class="headerlink" title="虚拟机账号密码"></a>虚拟机账号密码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">workstation		servera、serverb在lab.example.com同一个域内</span><br><span class="line">foundation0    	普通用户kiosk 密码 redhat     超级用户root密码 Asimov</span><br><span class="line">foundation0  	172.25.254.250    			宿主机</span><br><span class="line">classroom     	172.25.254.254   		    超级用户 root 密码 Asimov</span><br><span class="line">bastion     	172.25.250.254      普通 student 密码student  超级用户 root 密码 redhat</span><br><span class="line">servera  		172.25.250.10       普通 student 密码student，超级用户 root 密码redhat</span><br><span class="line">serverb  		172.25.250.11       普通 student 密码student  超级用户 root 密码redhat</span><br><span class="line">账号kisok  	   redhat              root  Asimov</span><br><span class="line">student 		student             超级用户root  redhat</span><br></pre></td></tr></table></figure>

<h2 id="支持中文"><a href="#支持中文" class="headerlink" title="支持中文"></a>支持中文</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">安装之前su -  root  输入密码：Asimov   yum install -y langpacks-zh_CN </span><br><span class="line">设置里面 region language 选择语言包 注销即可</span><br></pre></td></tr></table></figure>

<h2 id="虚拟机常用控制命令"><a href="#虚拟机常用控制命令" class="headerlink" title="虚拟机常用控制命令"></a>虚拟机常用控制命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">14  rht-vmctl status all</span><br><span class="line">15  rht-vmctl status classroom </span><br><span class="line">16  rht-vmctl start classroom </span><br><span class="line">17  rht-vmctl start bastion </span><br><span class="line">18  rht-vmctl start servera</span><br><span class="line">19  rht-vmctl stop servera</span><br><span class="line">rht-vmctl fullreset servera INIT快照</span><br><span class="line">20  su -</span><br><span class="line">21  history </span><br><span class="line">22  rht-vmctl restart bastion</span><br><span class="line">23  ping classroom</span><br><span class="line">24  ping bastion</span><br><span class="line">25  rht-vmctl status all</span><br><span class="line">26  ssh root@bastion</span><br></pre></td></tr></table></figure>

<h2 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">环境INIT快照默认为RH294环境</span><br><span class="line">如果切换课程的话，请进行如下操作</span><br><span class="line"><span class="comment"># rht-clearcourse 0</span></span><br><span class="line"><span class="comment"># rht-setcourse rh124</span></span><br><span class="line"><span class="comment"># rht-vmctl status all</span></span><br><span class="line"><span class="comment"># rht-vmctl start classroom</span></span><br><span class="line"><span class="comment"># rht-vmctl start bastion</span></span><br><span class="line"><span class="comment"># rht-vmctl start workstation</span></span><br><span class="line"><span class="comment"># ping workstation</span></span><br><span class="line"><span class="comment"># ssh workstation</span></span><br><span class="line">[student@workstation ~]$ lab cli-review start</span><br><span class="line"></span><br><span class="line">Starting lab.</span><br><span class="line"></span><br><span class="line">Preparing workstation <span class="keyword">for</span> lab exercise work:</span><br><span class="line"></span><br><span class="line"> · Ensuring a clean lab environment............................  SUCCESS</span><br><span class="line"> · Copying file required <span class="keyword">for</span> lab tasks.........................  SUCCESS</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="第一章-认识Linux及Redhat"><a href="#第一章-认识Linux及Redhat" class="headerlink" title="第一章 认识Linux及Redhat"></a>第一章 认识Linux及Redhat</h1><h2 id="历史及背景"><a href="#历史及背景" class="headerlink" title="历史及背景"></a>历史及背景</h2><p>由于Red Hat公司所发布的Red Hat Linux系列发行版本具有更广泛的企业用户基础，也代表着Linux操作系统的事实标准，因此格外受到用户的重视 ，所以我们学习Linux就从RHEL入手<br>Redhat：服务器版操作系统，服务收费<br>CentOS：Redhat支持的社区项目，服务器版操作系统，完全开源<br>Fedora：桌面版操作系统，开源</p>
<h2 id="培训体系"><a href="#培训体系" class="headerlink" title="培训体系"></a>培训体系</h2><p>RHCA</p>
<p>云计算 | 平台技术 | 数据中心</p>
<p>云计算方向</p>
<table>
<thead>
<tr>
<th>课程</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td>CL210</td>
<td>红帽openstack认证系统管理员</td>
</tr>
<tr>
<td>DO447</td>
<td>Ansible高级</td>
</tr>
<tr>
<td>DO280</td>
<td>红帽平台即服务专业技能证书openshift  k8s</td>
</tr>
<tr>
<td>RH358</td>
<td>RHCE7升级版 服务安全 haproxy mariadb varnish等</td>
</tr>
<tr>
<td>RH236</td>
<td>红帽混合云存储专业技能证书</td>
</tr>
</tbody></table>
<h1 id="第二章-访问命令行"><a href="#第二章-访问命令行" class="headerlink" title="第二章 访问命令行"></a>第二章 访问命令行</h1><h2 id="登陆与退出"><a href="#登陆与退出" class="headerlink" title="登陆与退出"></a>登陆与退出</h2><h2 id="控制台和终端"><a href="#控制台和终端" class="headerlink" title="控制台和终端"></a>控制台和终端</h2><table>
<thead>
<tr>
<th>控制台</th>
<th>快捷键</th>
<th>可选项</th>
</tr>
</thead>
<tbody><tr>
<td>CLI</td>
<td>Ctrl+alt+Fx</td>
<td>x in （1，2，3，4，5，6）</td>
</tr>
<tr>
<td>GUI</td>
<td>Ctrl+alt+F2（占用1后空闲）</td>
<td></td>
</tr>
</tbody></table>
<h2 id="工作区展示"><a href="#工作区展示" class="headerlink" title="工作区展示"></a>工作区展示</h2><p>ctrl+alt+方向键上下、win+方向键左右、tab+alt</p>
<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><p>shell的作用：提供接口，翻译用户端提供的命令给计算机识别，并把计算机的反应反馈给我们，（图形化也是一种shell），本质是个解释器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SHELL</span>        	<span class="comment">#查看当前使用的shell</span></span><br><span class="line"><span class="built_in">cat</span> /etc/shells </span><br><span class="line">tmux				<span class="comment">#一种shell</span></span><br><span class="line"><span class="built_in">du</span> -sh /dev/		<span class="comment">#查看文件内存占用</span></span><br><span class="line">bash --version</span><br><span class="line">w         			<span class="comment">#查看登录的用户</span></span><br></pre></td></tr></table></figure>

<h2 id="命令提示符-前导符"><a href="#命令提示符-前导符" class="headerlink" title="命令提示符 前导符"></a>命令提示符 前导符</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[kiosk@foundation0 ~]$ </span><br><span class="line">时间:</span><br><span class="line">[kiosk@foundation0 etc11:02:32]$PS1=&#x27;[\u@\h \W \t]\$&#x27;</span><br><span class="line">[kiosk@foundation0 etc 11:02:37]$cd /etc/sysconfig/</span><br><span class="line">绝对路径：</span><br><span class="line">[root@foundation0 ~]#PS1=&#x27;[\u@\h \w]\$&#x27;</span><br><span class="line">[root@foundation0 ~]#cd /etc/sysconfig/</span><br><span class="line">[root@foundation0 /etc/sysconfig]#cd network-scripts/</span><br></pre></td></tr></table></figure>



<h2 id="命令的基本组成"><a href="#命令的基本组成" class="headerlink" title="命令的基本组成"></a>命令的基本组成</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">命令名称（可执行程序名称）	</span><br><span class="line">选项（改变命令的行为） </span><br><span class="line">参数（命令操作的对象）</span><br><span class="line"># ls -l /boot 分别为命令名称 选项 参数</span><br></pre></td></tr></table></figure>



<h2 id="命令行快捷键"><a href="#命令行快捷键" class="headerlink" title="命令行快捷键"></a>命令行快捷键</h2><table>
<thead>
<tr>
<th>ctrl+a</th>
<th>光标跳至行首</th>
</tr>
</thead>
<tbody><tr>
<td>ctrl+e</td>
<td>光标跳至行尾</td>
</tr>
<tr>
<td>ctrl+u</td>
<td>从光标所在位置清空至行首</td>
</tr>
<tr>
<td>ctrl+k</td>
<td>从光标所在位置清空至行末</td>
</tr>
<tr>
<td>ctrl+左箭头</td>
<td>光标向左跳一个单词</td>
</tr>
<tr>
<td>ctrl+右箭头</td>
<td>光标向右跳一个单词</td>
</tr>
<tr>
<td>ctrl+w</td>
<td>回删一个单词</td>
</tr>
<tr>
<td>alt+d</td>
<td>删除光标后一个单词</td>
</tr>
<tr>
<td>ctrl+r</td>
<td>历史命令搜索</td>
</tr>
<tr>
<td>ctrl+c</td>
<td>终止</td>
</tr>
<tr>
<td>ctrl+l</td>
<td>清屏</td>
</tr>
<tr>
<td>ctrl+d</td>
<td>退出</td>
</tr>
<tr>
<td>ctrl+shift+t</td>
<td>新标签</td>
</tr>
<tr>
<td>alt+1 alt+2 alt+n（数字）</td>
<td>切换标签</td>
</tr>
<tr>
<td>ctrl + shift + +</td>
<td>放大</td>
</tr>
<tr>
<td>ctrl  + -</td>
<td>缩小</td>
</tr>
</tbody></table>
<h2 id="Tab补全"><a href="#Tab补全" class="headerlink" title="Tab补全"></a>Tab补全</h2><h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><ul>
<li>history -w 把历史执行的命令写入到~&#x2F;.bash_history，后加参数可以自定义保存到路径</li>
</ul>
<ul>
<li>！+ 关键词，执行包含关键词的第一条历史</li>
<li>！+ 序号，执行第n条历史</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># clear</span><br><span class="line"># echo $SHELL</span><br><span class="line"># cat /etc/shells</span><br><span class="line"># tmux</span><br><span class="line"># nmcli connection show</span><br><span class="line"># history</span><br><span class="line"># cd /etc</span><br><span class="line"># cd</span><br><span class="line"># pwd</span><br><span class="line"># whoami</span><br><span class="line"># history</span><br><span class="line"># nmcli connection show</span><br><span class="line"># history</span><br><span class="line"># ls -a</span><br><span class="line"># history -w</span><br><span class="line"># ls -a</span><br><span class="line"># cat .bash_history</span><br><span class="line"># history</span><br><span class="line"># nmcli connection show</span><br><span class="line"># history</span><br><span class="line"># nmcli device status</span><br><span class="line"># history</span><br><span class="line"># nmcli device status</span><br><span class="line"># cat /etc/shells</span><br><span class="line"># history -w test</span><br><span class="line"># cat test</span><br><span class="line">~             </span><br></pre></td></tr></table></figure>



<h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><ul>
<li>echo - e “”,支持字符转义，比如&#x2F;n为enter</li>
<li>echo 某结果 | 需要输入的某命令，免除人机交互，比如<code>echo 123456|passwd --stdin user</code></li>
</ul>
<h2 id="管道操作"><a href="#管道操作" class="headerlink" title="管道操作"></a>管道操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># useradd test</span><br><span class="line"># passwd test</span><br><span class="line"># echo 123|passwd --stdin test</span><br><span class="line"># useradd harry</span><br><span class="line"># echo 123|passwd --stdin harry </span><br><span class="line"># ls</span><br><span class="line"># ls | wc -l</span><br><span class="line"># yum install lrzsz</span><br><span class="line"># yum install httpd</span><br><span class="line"># echo n|yum install httpd</span><br><span class="line"># echo y|yum install httpd</span><br></pre></td></tr></table></figure>

<h2 id="shell执行方式"><a href="#shell执行方式" class="headerlink" title="shell执行方式"></a>shell执行方式</h2><p>交互式|非交互式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">56  echo n|yum install lrzsz</span><br><span class="line">57  echo y|yum install lrzsz</span><br><span class="line">58  history </span><br><span class="line">59  :q</span><br><span class="line">60  echo hello world</span><br><span class="line">61  date</span><br><span class="line">62  whoami</span><br><span class="line">63  pwd</span><br><span class="line">64  nmcli connection show </span><br><span class="line">65  passwd </span><br></pre></td></tr></table></figure>

<h2 id="关机或重启操作"><a href="#关机或重启操作" class="headerlink" title="关机或重启操作"></a>关机或重启操作</h2><table>
<thead>
<tr>
<th></th>
<th>关机</th>
<th>重启</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>init 0</td>
<td>init 6</td>
</tr>
<tr>
<td>2</td>
<td>poweroff</td>
<td>reboot</td>
</tr>
<tr>
<td>3</td>
<td>systemctl poweroff</td>
<td>systemctl reboot</td>
</tr>
<tr>
<td>4</td>
<td>shutdown -h 20：00</td>
<td>shutdown -r 0</td>
</tr>
</tbody></table>
<h2 id="在新的一行继续执行命令"><a href="#在新的一行继续执行命令" class="headerlink" title="在新的一行继续执行命令"></a>在新的一行继续执行命令</h2><p>\</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>变量名和等号之间不能有空格</p>
<p>​	同时，变量名的命名须遵循如下规则：</p>
<ul>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<h2 id="命令别名"><a href="#命令别名" class="headerlink" title="命令别名"></a>命令别名</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># alias </span><br><span class="line"># ls -l</span><br><span class="line"># ll</span><br><span class="line"># alias </span><br><span class="line"># alias ps=&#x27;ps aux&#x27;</span><br><span class="line"># ps</span><br><span class="line"># alias </span><br><span class="line"># ps</span><br><span class="line"># vim .bashrc </span><br><span class="line">alias ps=&#x27;ps aux&#x27;</span><br><span class="line">重新登陆 | source .bashrc</span><br><span class="line"># ps</span><br></pre></td></tr></table></figure>

<h2 id="命令替换"><a href="#命令替换" class="headerlink" title="命令替换"></a>命令替换</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">   72  echo &#x27;Current time is:&#x27; `date`</span><br><span class="line">   73  echo &#x27;Current time is:&#x27; $(date)</span><br><span class="line">   74  echo &#x27;Current login user is:&#x27; whoami</span><br><span class="line">   75  echo &#x27;Current login user is:&#x27; `whoami`</span><br><span class="line">   76  echo &#x27;Current login user is:&#x27; $(whoami)</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">[root@servera lab]# which cat</span><br><span class="line">/usr/bin/cat</span><br><span class="line">[root@servera lab]# ls -l /usr/bin/cat</span><br><span class="line">-rwxr-xr-x. 1 root root 51856 Jan 11  2019 /usr/bin/cat</span><br><span class="line">[root@servera lab]# ls -l $(which cat)</span><br><span class="line">-rwxr-xr-x. 1 root root 51856 Jan 11  2019 /usr/bin/cat</span><br></pre></td></tr></table></figure>

<p><code>命令替换：$(command),获取到一个命令执行的结果，本质是在新开的终端里执行了这个命令然后返回结果</code></p>
<p>`command&#96; 等于$(command)</p>
<h1 id="第三章-从命令行管理文件"><a href="#第三章-从命令行管理文件" class="headerlink" title="第三章 从命令行管理文件"></a>第三章 从命令行管理文件</h1><ul>
<li>Linux哲学之一：一切都是文件</li>
</ul>
<h2 id="路径表示和导航"><a href="#路径表示和导航" class="headerlink" title="路径表示和导航"></a>路径表示和导航</h2><p>绝对路径 &#x2F;开始</p>
<p>相对路径 非&#x2F;开始，所以~也是相对路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd</span></span><br><span class="line"><span class="comment"># pwd</span></span><br><span class="line"><span class="comment"># cd /etc/sysconfig/network-scripts/</span></span><br><span class="line"><span class="comment"># cd -</span></span><br><span class="line"><span class="comment"># pwd</span></span><br><span class="line"><span class="comment"># cd ..</span></span><br><span class="line"><span class="comment"># pwd</span></span><br><span class="line"><span class="comment"># cd ~</span></span><br><span class="line"><span class="comment"># pwd</span></span><br><span class="line"><span class="comment"># cd /var/log/</span></span><br><span class="line"><span class="comment"># pwd</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># cd samba/</span></span><br></pre></td></tr></table></figure>

<h2 id="文件管理常用命令"><a href="#文件管理常用命令" class="headerlink" title="文件管理常用命令"></a>文件管理常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> -n /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">head</span> /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">head</span> -n 3 /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">tail</span> /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">tail</span> -n 1 /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">more /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">less /etc/passwd</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mkdir</span> <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> <span class="built_in">test</span>/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cp</span> /etc/passwd .</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mv</span> passwd pass</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">pwd</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mv</span> pass ..</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span> ..</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mv</span> ../pass .</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mv</span> pass pa</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">touch</span> myfile</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span> -l</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">touch</span> file</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">vim file1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> hello world &gt; <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cat</span> <span class="built_in">test</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">rm</span> file1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">rm</span> file1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mkdir</span> mydir</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span> -l</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">rmdir</span> mydir/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mkdir</span> mydir</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">rm</span> mydir/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">rm</span> -r mydir/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">mkdir</span> mydir</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">rm</span> -rf ./</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">rm</span> -rf ./*</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation ~]# touch myfile&#123;1..9&#125;</span><br><span class="line">[root@workstation ~]# ls</span><br><span class="line">anaconda-ks.cfg  myfile3  myfile6  myfile9</span><br><span class="line">myfile1          myfile4  myfile7  original-ks.cfg</span><br><span class="line">myfile2          myfile5  myfile8  test</span><br><span class="line">[root@workstation ~]# rename myfile MYFILE myfile?</span><br><span class="line">[root@workstation ~]# ls</span><br><span class="line">anaconda-ks.cfg  MYFILE3  MYFILE6  MYFILE9</span><br><span class="line">MYFILE1          MYFILE4  MYFILE7  original-ks.cfg</span><br><span class="line">MYFILE2          MYFILE5  MYFILE8  test</span><br></pre></td></tr></table></figure>



<h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><p>作用是可以批量操作（模糊）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># mkdri test</span><br><span class="line"># ls</span><br><span class="line"># mkdir mydir</span><br><span class="line"># cd mydir/</span><br><span class="line"># ls</span><br><span class="line"># touch myfile&#123;1..9&#125;</span><br><span class="line"># ls</span><br><span class="line"># touch 1.&#123;a..z&#125;</span><br><span class="line"># ls</span><br><span class="line"># touch &#123;1..5&#125;.&#123;a..c&#125;</span><br><span class="line"># ls</span><br><span class="line"># touch a ab abc</span><br><span class="line"># ls</span><br><span class="line"># ls ?</span><br><span class="line"># ls ??</span><br><span class="line"># ls ???</span><br><span class="line"># rename a A ??</span><br><span class="line"># ls</span><br><span class="line"># ls ???</span><br><span class="line"># rename 1 999 ???</span><br><span class="line"># ls </span><br><span class="line"># ls</span><br><span class="line"># rm -rf myfile*</span><br><span class="line"># ls</span><br><span class="line"># rm -rf 999*</span><br><span class="line"># ls</span><br><span class="line"># history </span><br><span class="line"># ls</span><br><span class="line"># touch &#123;a,b,c&#125;FILE</span><br><span class="line"># ls</span><br><span class="line"># ls [123].*</span><br><span class="line"># touch 1.txt</span><br><span class="line"># ls [123].*</span><br><span class="line"># ls [^123].*</span><br><span class="line"># ls [!123].*</span><br></pre></td></tr></table></figure>

<ul>
<li><code>[]的细节:不能匹配多个字符，只能匹配单个且其中任意一个字符，而且不支持字符分割(比如1，3，5)，范围（比如1..5），也不支持创建文件时的转义（就是说touch一个带[]的文件会原原本本地把[]打出来）。查看文件时（ls）可以。</code></li>
</ul>
<h2 id="连接文件"><a href="#连接文件" class="headerlink" title="连接文件"></a>连接文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkdir test</span></span><br><span class="line"><span class="comment"># cd test/</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># dd if=/dev/zero of=source bs=1M count=10</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># ln source hard</span></span><br><span class="line"><span class="comment"># ln -s source soft</span></span><br><span class="line"><span class="comment"># ls -lhi</span></span><br><span class="line"><span class="comment"># rm hard</span></span><br><span class="line"><span class="comment"># rm soft</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># ln source hard</span></span><br><span class="line"><span class="comment"># ln -s source soft</span></span><br><span class="line"><span class="comment"># ls -lhi</span></span><br><span class="line"><span class="comment"># mkdir source_dir</span></span><br><span class="line"><span class="comment"># ls -l</span></span><br><span class="line"><span class="comment"># ln source_dir/ harddir</span></span><br><span class="line"><span class="comment"># ln -s source_dir/ softdir</span></span><br><span class="line"><span class="comment"># ls -lhi</span></span><br><span class="line"><span class="comment"># unlink soft</span></span><br><span class="line"><span class="comment"># unlink softdir/</span></span><br><span class="line"><span class="comment"># ls -lhi</span></span><br><span class="line"><span class="comment"># unlink softdir/</span></span><br><span class="line">1.命令相同 参数不同 </span><br><span class="line">  软链接在创建必须绝对路径（实验证明，相对也可以）</span><br><span class="line">  硬链接都可以</span><br><span class="line">2.硬链接的权限和源文件完全一致</span><br><span class="line">  软链接的链接文件权限永远是777 和源文件权限不同</span><br><span class="line">3.硬链接可以删除，移动源文件 </span><br><span class="line">  软链接不可以删除，移动源文件</span><br><span class="line">4.软链接inode和源文件不同</span><br><span class="line">  硬链接的inode的源文件相同</span><br><span class="line">5.软链接可以对目录生效 </span><br><span class="line">  硬链接只可以对文件操作</span><br><span class="line">6.软链接可以跨文件系统</span><br><span class="line">  硬链接不可以跨文件系统</span><br><span class="line">  不能跨分区做硬链接，因为每个分区都存在相同的 inode 文件。</span><br><span class="line">7.硬链接和原来文件大小一样，软连接不一样</span><br><span class="line">  软硬连接目录总大小不变</span><br><span class="line"><span class="built_in">unlink</span> 接文件名 取消链接</span><br></pre></td></tr></table></figure>

<h1 id="第一天内容小节"><a href="#第一天内容小节" class="headerlink" title="第一天内容小节"></a>第一天内容小节</h1><hr>
<ul>
<li><p><code>Esc . 可以找到上一个参数</code></p>
</li>
<li><p>在终端里，<code>w查看登录的用户</code></p>
</li>
<li><p>hostname查看当前主机的长域名</p>
</li>
<li><p>$和#表明当前用户的权限</p>
</li>
<li><p>命令   文件名称</p>
<p>​			+选项 改变命令的性质</p>
<p>​			+参数 命令执行的对象</p>
</li>
<li><p>更改前导符，给参数PS1直接赋值即可</p>
</li>
<li><p>提示符有四种</p>
</li>
<li><p><code>cat -n 左边显示行数</code></p>
</li>
<li><p>head -n 头n行，默认10</p>
</li>
<li><p>tail -n 尾10行，默认10</p>
</li>
<li><p><code>more 支持百分比显示，enter翻页</code></p>
</li>
<li><p>less enter翻行，space翻页</p>
</li>
<li><p>mv 移动，改名</p>
</li>
<li><p>touch，vim，<code>echo * &gt;</code> 创建文件</p>
</li>
<li><p>rm 删除，-r递归删除，删多层嵌套目录</p>
</li>
<li><p>cp -r 级联复制</p>
</li>
<li><p>rename 正宗改名方法，<code>替换字符 更改后的字符 匹配的文件</code>（可以使用正则表达式）</p>
</li>
<li><p>通配符：{},[],?,*,a..b,!和^取反，touch不支持[],支持{}，ls全部支持，[]是从中取任意一个</p>
</li>
<li><p>ls -l 看到的内容：</p>
<p><code>权限，硬链接数量，所属用户，所属组，大小，修改时间，访问时间，名称</code></p>
</li>
<li><p><code>7种文件类型：- f 普通|d 目录|l 软连接|b 块设备|s 套接字socket|p 管道pipe|c 字符设备文件char</code></p>
</li>
<li><p>file 查询文件类型，Linux文件后缀不决定文件类型（不同于windows）</p>
</li>
<li><p><code>stat 查看文件属性</code>，其中INode为索引节点</p>
</li>
<li><p><code>touch已经存在的文件后修改文件的时间戳，不会报错，但是mkdir不行</code></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.huaweicloud.com/articles/06784583d471f86803b62bc974f0f300.html"><strong><code>正则表达式和通配符的关系与区别</code></strong></a>（个人易混淆，现在也没分清）</p>
<p>主要一点为：通配符适用于shell，但是正则表达式适用于各种开发环境，而且不同环境下还可能有所不同。</p>
</li>
</ul>
<h1 id="第四章-在rhel中获取帮助"><a href="#第四章-在rhel中获取帮助" class="headerlink" title="第四章 在rhel中获取帮助"></a>第四章 在rhel中获取帮助</h1><h2 id="help、man手册"><a href="#help、man手册" class="headerlink" title="help、man手册"></a>help、man手册</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls --help</span></span><br><span class="line"><span class="comment"># mv --help</span></span><br><span class="line"><span class="comment"># cp --help</span></span><br><span class="line"><span class="comment"># cat --help</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># man man</span></span><br><span class="line"><span class="comment"># man ls</span></span><br><span class="line"><span class="comment"># man -k nmcli</span></span><br><span class="line"><span class="comment"># man -k firewall</span></span><br><span class="line"><span class="comment"># man firewalld.richlanguage</span></span><br><span class="line"><span class="comment"># man passwd</span></span><br><span class="line"><span class="comment"># man 5 passwd</span></span><br><span class="line"><span class="comment"># mandb</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">man -k</td>
<td align="center">同过关键字查找要man的手册有哪些</td>
</tr>
<tr>
<td align="center">man 数字</td>
<td align="center">查看不同章节</td>
</tr>
<tr>
<td align="center">mandb</td>
<td align="center">更新默认索引数据库</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># man man（1到9个段的不同的内容）</span><br><span class="line"> 	   1   Executable programs or shell commands</span><br><span class="line">       2   System calls (functions provided by the kernel)</span><br><span class="line">       3   Library calls (functions within program libraries)</span><br><span class="line">       4   Special files (usually found in /dev)</span><br><span class="line">       5   File formats and conventions eg /etc/passwd</span><br><span class="line">       6   Games</span><br><span class="line">       7   Miscellaneous (including macro packages and conventions), e.g. man(7), groff(7)</span><br><span class="line">       8   System administration commands (usually only for root)</span><br><span class="line">       9   Kernel routines [Non standard]</span><br></pre></td></tr></table></figure>

<p>运维常用：1（命令），5（文件格式），8（管理员高级命令，比如-k）；</p>
<p>开发常用：2，3，9</p>
<table>
<thead>
<tr>
<th align="center">man手册</th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">&#x2F; | ?</td>
<td align="center">查找（从上往下） | 查找（从下往上，与&#x2F;）</td>
</tr>
<tr>
<td align="center">n | N</td>
<td align="center">匹配下一个 | 匹配上一个</td>
</tr>
<tr>
<td align="center">g | G</td>
<td align="center">开头 | 结尾</td>
</tr>
<tr>
<td align="center">q</td>
<td align="center">退出</td>
</tr>
</tbody></table>
<h2 id="info（pinfo）"><a href="#info（pinfo）" class="headerlink" title="info（pinfo）"></a>info（pinfo）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">更加彻底的说明</span><br><span class="line">/			 搜索</span><br><span class="line">空格			翻页</span><br><span class="line">方向 			选择</span><br><span class="line">n			 章节</span><br></pre></td></tr></table></figure>

<h2 id="RPM包文档"><a href="#RPM包文档" class="headerlink" title="RPM包文档()"></a>RPM包文档()</h2><p>文件浏览器访问</p>
<p><code>file:///usr/share/doc</code></p>
<p>如：阿帕奇服务器，在浏览器上查看手册</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">servera：</span><br><span class="line"><span class="comment"># yum -y install httpd</span></span><br><span class="line"><span class="comment"># yum -y install httpd-manual</span></span><br><span class="line"><span class="comment"># systemctl start httpd</span></span><br><span class="line"><span class="comment"># firewall-cmd --permanent --add-service=http 防火墙添加服务</span></span><br><span class="line"><span class="comment"># firewall-cmd --reload  重启</span></span><br><span class="line"><span class="comment"># hostname	查看主机名</span></span><br><span class="line">f0：</span><br><span class="line">http://servera.lab.example.com/manual/（在浏览器里输入主机名，查看manual手册）</span><br></pre></td></tr></table></figure>

<h2 id="官方网站"><a href="#官方网站" class="headerlink" title="官方网站"></a>官方网站</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://access.redhat.com/</span><br><span class="line">http://docs.kubernetes.org.cn/</span><br><span class="line">https://www.linux.org/</span><br><span class="line">https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html</span><br></pre></td></tr></table></figure>

<h2 id="互联网"><a href="#互联网" class="headerlink" title="互联网"></a>互联网</h2><p>搜索引擎，官网查询</p>
<h1 id="第五章-创建、查看-编辑文本"><a href="#第五章-创建、查看-编辑文本" class="headerlink" title="第五章 创建、查看 编辑文本"></a>第五章 创建、查看 编辑文本</h1><h2 id="vim常用快捷键"><a href="#vim常用快捷键" class="headerlink" title="vim常用快捷键"></a>vim常用快捷键</h2><table>
<thead>
<tr>
<th align="center">命令模式</th>
<th align="center"><code>刚进入vim界面的模式</code></th>
</tr>
</thead>
<tbody><tr>
<td align="center">命令</td>
<td align="center">解释</td>
</tr>
<tr>
<td align="center">h j k l</td>
<td align="center">左下上右</td>
</tr>
<tr>
<td align="center">方向键</td>
<td align="center">上下左右</td>
</tr>
<tr>
<td align="center">1G、nG</td>
<td align="center">n代表一个数字，去第1行或n行</td>
</tr>
<tr>
<td align="center">gg | G</td>
<td align="center">将光标定位到文章的顶端 | 底端</td>
</tr>
<tr>
<td align="center">Home或^ | End或 $</td>
<td align="center">行首 | 行尾</td>
</tr>
<tr>
<td align="center">x | X或D</td>
<td align="center">向后删除 | 向前删除一个字符</td>
</tr>
<tr>
<td align="center">dd ，  ndd</td>
<td align="center">删除1行，n行</td>
</tr>
<tr>
<td align="center">dgg | dG</td>
<td align="center">删到顶 | 删到底</td>
</tr>
<tr>
<td align="center">d$ | d^或d0</td>
<td align="center">删到行尾 | 删到行头</td>
</tr>
<tr>
<td align="center">yy，nyy | yw</td>
<td align="center">复制1行，n行 | 复制单词 单词首字母复制</td>
</tr>
<tr>
<td align="center">p|P</td>
<td align="center">粘贴到下一（行）（格） | 粘贴到上一（行）（格）<code>yw格，yy为行</code></td>
</tr>
<tr>
<td align="center">u | U</td>
<td align="center">撤销 | 撤销当前行所有操作</td>
</tr>
<tr>
<td align="center">ZZ</td>
<td align="center">保存退出</td>
</tr>
<tr>
<td align="center"><strong>命令模式2</strong></td>
<td align="center"><strong>切换模式的命令</strong></td>
</tr>
<tr>
<td align="center">a</td>
<td align="center">字符后进入插入模式（append）</td>
</tr>
<tr>
<td align="center">i</td>
<td align="center">当前字符位置进入插入模式（insert）</td>
</tr>
<tr>
<td align="center">o</td>
<td align="center">在下一行新创建一行进入插入模式</td>
</tr>
<tr>
<td align="center">A</td>
<td align="center">在行尾进入插入模式</td>
</tr>
<tr>
<td align="center">I</td>
<td align="center">在行首进入插入模式</td>
</tr>
<tr>
<td align="center">O</td>
<td align="center">在上一行新创建一行进入插入模式</td>
</tr>
<tr>
<td align="center">s|S</td>
<td align="center">删除光标字符后插入| 删除光标行后插入，不常用</td>
</tr>
<tr>
<td align="center"><strong>其他模式</strong></td>
<td align="center"><strong>切换模式</strong>（具体区分见下表）</td>
</tr>
<tr>
<td align="center">：</td>
<td align="center">末行模式</td>
</tr>
<tr>
<td align="center">v、V或Ctrl+V</td>
<td align="center">可视模式</td>
</tr>
<tr>
<td align="center">r|R</td>
<td align="center">替换模式   单个替换|连续替换</td>
</tr>
<tr>
<td align="center">&#x2F;word，？word</td>
<td align="center">&#x2F;向下查找，？向上查找<code>类似于man中的搜索功能</code></td>
</tr>
<tr>
<td align="center">n，N</td>
<td align="center">定位到下一个匹配字符，定位到上一个匹配字符</td>
</tr>
<tr>
<td align="center"><strong>末行模式</strong></td>
<td align="center"><code>Ecs后：的模式</code></td>
</tr>
<tr>
<td align="center">w</td>
<td align="center">保存</td>
</tr>
<tr>
<td align="center">q</td>
<td align="center">退出</td>
</tr>
<tr>
<td align="center">e</td>
<td align="center">重新打开（刷新）</td>
</tr>
<tr>
<td align="center">wq|wq！</td>
<td align="center">退出并保存 | 强制保存并退出</td>
</tr>
<tr>
<td align="center">:1、:n</td>
<td align="center">末行模式下定位行数</td>
</tr>
<tr>
<td align="center">q！</td>
<td align="center">强制退出</td>
</tr>
<tr>
<td align="center">x|X</td>
<td align="center">保存退出|加密文件（X加密后，如果使用x保存退出，密码不生效），X设置空密码取消加密</td>
</tr>
<tr>
<td align="center">set nu</td>
<td align="center">设置行号</td>
</tr>
<tr>
<td align="center">set nonu</td>
<td align="center">取消行号</td>
</tr>
<tr>
<td align="center">：w &#x2F;newfile</td>
<td align="center">另存为其他文件</td>
</tr>
<tr>
<td align="center">：r &#x2F;newfile</td>
<td align="center">读取&#x2F;newfile到本文件中</td>
</tr>
<tr>
<td align="center">：!command</td>
<td align="center">vim编辑过程中，查询linux</td>
</tr>
<tr>
<td align="center"><strong>可视化模式</strong></td>
<td align="center"><code>对v，V，ctrl v</code></td>
</tr>
<tr>
<td align="center">v</td>
<td align="center">区块模式（根据光标的位置）</td>
</tr>
<tr>
<td align="center">V</td>
<td align="center">行编辑模式（默认整行选中）</td>
</tr>
<tr>
<td align="center">ctrl v</td>
<td align="center">列编辑模式（每行中只选同一列的）</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"><code>选中以后可以对多个部分进行编辑，只显示在第一个，enter后才会全部编辑</code></td>
</tr>
<tr>
<td align="center"><strong>替换模式</strong></td>
<td align="center"><strong>在末行模式中执行的命令（没必要记模式名称）</strong></td>
</tr>
<tr>
<td align="center">：s</td>
<td align="center">只匹配当前行</td>
</tr>
<tr>
<td align="center">s  &#x2F;g</td>
<td align="center">全局模式，匹配一行内的所有</td>
</tr>
<tr>
<td align="center">%s</td>
<td align="center">所有行替换</td>
</tr>
<tr>
<td align="center">：1,3 s</td>
<td align="center">替换第一行到第三行<code>替换模式中指定行只能表示范围，这个方法不能表示单独几行</code></td>
</tr>
<tr>
<td align="center">：&#x2F;string1&#x2F;，&#x2F;string2&#x2F;</td>
<td align="center"><strong>替换两个string所在行的内容</strong>,而不是两个string间的字符</td>
</tr>
<tr>
<td align="center"><strong>历史记录</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">q :</td>
<td align="center">查看前几条历史记录</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">可以使用命令模式下的指令，编辑并enter可以直接使用</td>
</tr>
</tbody></table>
<h1 id="遗忘内容："><a href="#遗忘内容：" class="headerlink" title="遗忘内容："></a>遗忘内容：</h1><ul>
<li><input disabled="" type="checkbox"> <table>
<thead>
<tr>
<th align="center"><strong>替换模式</strong></th>
<th align="center"><strong>在末行模式中执行的命令（没必要记模式名称）</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">：s&#x2F;sting1&#x2F;string2</td>
<td align="center">只匹配当前行,替换当前行内第一个string1为string2，并高亮所有string1</td>
</tr>
<tr>
<td align="center">s  &#x2F;g</td>
<td align="center">全局模式，匹配一行内的所有</td>
</tr>
<tr>
<td align="center">%s</td>
<td align="center">所有行替换</td>
</tr>
<tr>
<td align="center">：1,3 s</td>
<td align="center">替换第一行到第三行<code>替换模式中指定行只能表示范围，这个方法不能表示单独几行</code></td>
</tr>
<tr>
<td align="center">：&#x2F;string1&#x2F;，&#x2F;string2&#x2F;</td>
<td align="center"><strong>替换两个string所在行的内容</strong>,而不是两个string间的字符</td>
</tr>
</tbody></table>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">：s/adm/admin/					默认针对当前行操作</span><br><span class="line">：set nu</span><br><span class="line">:1,3s/root/administrator/		指定行数的操作</span><br><span class="line">:1s/0/100/						默认替换指定行的第一个匹配到的字段</span><br><span class="line">:1s/0/999/g						加上g 针对指定行的所有匹配到的字段进行处理</span><br><span class="line">:%s/nologin/false				针对所有行的第一个匹配到的字段进行处理</span><br><span class="line">:5,$s/x/y						5到最后一行第一个匹配到的处理</span><br><span class="line">：^,3s/x/y						发现这个报错了，因为我们不知道最后一行，但是第一行是确定知道的</span><br><span class="line">:.,$s/x/y					当前行到最后一行匹配到的字段处理</span><br></pre></td></tr></table></figure>

<h2 id="vim个性化设置"><a href="#vim个性化设置" class="headerlink" title="vim个性化设置"></a>vim个性化设置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@servera test]# cat ~/.vimrc</span><br><span class="line">set nu</span><br><span class="line">set cursorline</span><br></pre></td></tr></table></figure>

<h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0=stdin 	标准输入</span><br><span class="line">1=stdout 	标准输出</span><br><span class="line">2=stderr 	标准错误输出</span><br><span class="line">&amp;=1+2		两者结合</span><br><span class="line">1&gt;			将标准输出重定向到其他，一般省略1</span><br><span class="line">2&gt;			将标准错误输出重定向到其他</span><br><span class="line">&amp;&gt;			两者一起重定向到其他</span><br></pre></td></tr></table></figure>

<h3 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat newfile                                                       </span></span><br><span class="line"><span class="comment"># cat newfile &gt;&gt; file</span></span><br><span class="line"><span class="comment"># cat file</span></span><br><span class="line"><span class="comment"># echo hello world</span></span><br><span class="line"><span class="comment"># echo hello world &gt;&gt; file</span></span><br><span class="line"><span class="comment"># cat file</span></span><br><span class="line"><span class="comment"># echo hello world &gt; file</span></span><br><span class="line"><span class="comment"># cat file</span></span><br><span class="line"><span class="comment"># &gt; file</span></span><br><span class="line"><span class="comment"># cat file</span></span><br><span class="line"><span class="comment"># lscd</span></span><br><span class="line"><span class="comment"># lscd &gt;&gt; test</span></span><br><span class="line"><span class="comment"># cat test</span></span><br><span class="line"><span class="comment"># lscd 2&gt;&gt; test</span></span><br><span class="line"><span class="comment"># cat test</span></span><br><span class="line"><span class="comment"># find / -user student</span></span><br><span class="line"><span class="comment"># find / -user student &gt; test</span></span><br><span class="line"><span class="comment"># cat test</span></span><br><span class="line"><span class="comment"># find / -user student &amp;&gt; test</span></span><br><span class="line"><span class="comment"># cat test</span></span><br><span class="line"><span class="comment"># find / -user student &gt; true.txt 2&gt; error.txt</span></span><br><span class="line"><span class="comment"># cat true.txt</span></span><br><span class="line"><span class="comment"># cat error.txt</span></span><br></pre></td></tr></table></figure>

<h3 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h3><p>两种方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l pa</span><br><span class="line"><span class="built_in">wc</span> -l &lt; pa</span><br><span class="line">passwd student</span><br><span class="line"></span><br><span class="line">passwd student &lt;&lt; <span class="string">end</span></span><br><span class="line"><span class="string">redhat</span></span><br><span class="line"><span class="string">redhat</span></span><br><span class="line"><span class="string">end</span>                                                             </span><br><span class="line">passwd student &lt;&lt; <span class="string">abc  #abc</span>为分隔符，上下一致即可，可任意选择</span><br><span class="line">redhat</span><br><span class="line">redhat</span><br><span class="line">abc</span><br></pre></td></tr></table></figure>

<ul>
<li>问题</li>
</ul>
<h2 id="引申出设置密码的几种方法"><a href="#引申出设置密码的几种方法" class="headerlink" title="引申出设置密码的几种方法"></a>引申出设置密码的几种方法</h2><ol>
<li><pre><code>passwd user &lt;&lt; abc
123456
123456
abc
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```</span><br><span class="line">   echo 123 | passwd --stdin user</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>&#96;&#96;&#96;<br>passwd user（基础版本）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. ```bash</span><br><span class="line">   在用户注册时使用useradd -p &quot;一个加密后的密码&quot; user #尚未实现该功能</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h2><p>命名规则</p>
<p>变量名称可以包含大写或小写字母、数字和下划线字符。</p>
<p>shell变量对于特定shell会话是唯一的。如果开了两个终端窗口，或者通过两个独立的登陆会话登陆同一远程服务器，那么您在运行两个shell，每个shell都有自己的一组shell变量值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">147 env</span><br><span class="line">148 set</span><br><span class="line">149 f801=zhangsan</span><br><span class="line">150 f802=lisi</span><br><span class="line">151 echo $f801</span><br><span class="line">152 echo $f802</span><br><span class="line">153 123abc=wangwu</span><br><span class="line">154 set</span><br><span class="line">155 env</span><br><span class="line">156 echo $PS1</span><br><span class="line">157 echo $HISTSIZE</span><br><span class="line">158 echo $HISTFILESIZE </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="变量文件"><a href="#变量文件" class="headerlink" title="变量文件"></a>变量文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim 四个文件 加入了一行 echo filename</span><br><span class="line">[kiosk@foundation0 ~]$ ssh root@servera</span><br><span class="line">Activate the web console with: systemctl enable --now cockpit.socket</span><br><span class="line"></span><br><span class="line">Last login: Sat May 15 17:07:31 2021 from 172.25.250.250</span><br><span class="line">/etc/profile</span><br><span class="line">/etc/bashrc</span><br><span class="line">~/.bash_profile</span><br><span class="line">~/.bashrc</span><br></pre></td></tr></table></figure>

<h1 id="第六章-用户和组管理"><a href="#第六章-用户和组管理" class="headerlink" title="第六章 用户和组管理"></a>第六章 用户和组管理</h1><h2 id="用户账户"><a href="#用户账户" class="headerlink" title="用户账户"></a>用户账户</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#vim /etc/login.defs</span><br><span class="line">超级用户：0</span><br><span class="line">系统账号静态分配：1-200</span><br><span class="line">系统账号动态分配：201-999</span><br><span class="line">普通用户：1000-60000</span><br><span class="line">组ID也是一样的分配原则</span><br></pre></td></tr></table></figure>

<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">id</span></span><br><span class="line"><span class="comment"># id test</span></span><br><span class="line"><span class="comment"># useradd test</span></span><br><span class="line"><span class="comment"># id test</span></span><br><span class="line"><span class="comment"># vim /etc/passwd</span></span><br><span class="line"><span class="comment"># id bin</span></span><br><span class="line"><span class="comment"># vim /etc/login.defs</span></span><br><span class="line"><span class="comment"># vim /etc/passwd</span></span><br><span class="line"><span class="comment"># su - bin</span></span><br><span class="line"><span class="comment"># ssh bin@localhost</span></span><br><span class="line"><span class="comment"># passwd bin</span></span><br><span class="line"><span class="comment"># ssh bin@localhost</span></span><br><span class="line"><span class="comment"># vim /etc/passwd</span></span><br><span class="line"><span class="comment"># history -w</span></span><br><span class="line"><span class="comment"># useradd easthome</span></span><br><span class="line"><span class="comment"># id easthome</span></span><br><span class="line"><span class="comment"># grep easthome /etc/group</span></span><br><span class="line"><span class="comment"># grep tom /etc/group</span></span><br><span class="line"><span class="comment"># id tom</span></span><br><span class="line"><span class="comment"># useradd tom</span></span><br><span class="line"><span class="comment"># id tom</span></span><br><span class="line"><span class="comment"># grep tom /etc/group</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># passwd tom</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># echo 123456|passwd --stdin tom</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># passwd tom &lt;&lt; abc</span></span><br><span class="line"><span class="comment"># 123456</span></span><br><span class="line"><span class="comment"># 123456</span></span><br><span class="line"><span class="comment"># abc</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># useradd lizhi</span></span><br><span class="line"><span class="comment"># useradd --help</span></span><br><span class="line"><span class="comment"># useradd -p 123456 harry</span></span><br><span class="line"><span class="comment"># ssh harry@localhost</span></span><br><span class="line"><span class="comment"># vim /etc/login.defs</span></span><br><span class="line"><span class="comment"># grep tom /etc/passwd</span></span><br><span class="line"><span class="comment"># grep harry /etc/passwd</span></span><br><span class="line"><span class="comment"># useradd -u 2000 -s /sbin/nologin -c &#x27;administrator&#x27; jordan</span></span><br><span class="line"><span class="comment"># id jordan</span></span><br><span class="line"><span class="comment"># grep jordan /etc/passwd</span></span><br><span class="line"><span class="comment"># useradd -G jordan james</span></span><br><span class="line"><span class="comment"># id james</span></span><br><span class="line"><span class="comment"># usermod -u 3000 -s /bin/false -c &#x27;hello world&#x27; jordan</span></span><br><span class="line"><span class="comment"># grep jordan /etc/passwd</span></span><br><span class="line"><span class="comment"># useradd -s /sbin/nologin test1</span></span><br><span class="line"><span class="comment"># useradd -s /bin/false test2</span></span><br><span class="line"><span class="comment"># ssh test1@localhost</span></span><br><span class="line"><span class="comment"># echo 12345|passwd test1</span></span><br><span class="line"><span class="comment"># echo 12345|passwd test2</span></span><br><span class="line"><span class="comment"># ssh test1@localhost</span></span><br><span class="line"><span class="comment"># ssh test2@localhost</span></span><br><span class="line"><span class="comment"># grep test /etc/passwd</span></span><br><span class="line"><span class="comment"># vim /etc/passwd</span></span><br><span class="line"><span class="comment"># history</span></span><br><span class="line"><span class="comment"># userdel test1</span></span><br><span class="line"><span class="comment"># useradd test1</span></span><br><span class="line"><span class="comment"># userdel -r test1</span></span><br><span class="line"><span class="comment"># useradd test1</span></span><br><span class="line"><span class="comment"># userdel test2</span></span><br><span class="line"><span class="comment"># userdel -r harry</span></span><br><span class="line"><span class="comment"># id harry</span></span><br><span class="line"><span class="comment"># useradd harry</span></span><br><span class="line"><span class="comment"># tail -n 1 /etc/passwd</span></span><br><span class="line"><span class="comment"># su harry</span></span><br><span class="line"><span class="comment"># su -</span></span><br><span class="line"><span class="comment"># su - harry</span></span><br><span class="line"><span class="comment"># history -w</span></span><br><span class="line"><span class="comment"># vim ~/.bash_history</span></span><br><span class="line"><span class="comment"># useradd -u 0 zhangsan</span></span><br><span class="line"><span class="comment"># useradd --help</span></span><br><span class="line"><span class="comment"># useradd -u 0 -o zhangsan</span></span><br><span class="line"><span class="comment"># id zhangsan</span></span><br><span class="line"><span class="comment"># su - zhangsan</span></span><br></pre></td></tr></table></figure>

<p><code>用户和组的关系：多对多</code></p>
<p><code>非登录用户的/bin/bash：/sbin/nologin和/bin/false都可以，但是/bin/false更严格</code></p>
<p><code>useredel -r</code>	删除用户时同时删除用户目录和邮箱文件，否则会导致创建同名用户时无法创建</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">id user</td>
<td align="center">查看user的uid，gid，所在组</td>
</tr>
<tr>
<td align="center">useradd</td>
<td align="center">添加用户</td>
</tr>
<tr>
<td align="center">vim &#x2F;etc&#x2F;passwd</td>
<td align="center"><code>lnss:x:1002:1002::/home/lnss:/bin/bash</code></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">用户名，密码占位符，uid，gid，描述信息，家目录，bash</td>
</tr>
<tr>
<td align="center"><code>useradd -u 2000 -s /sbin/nologin -c &#39;administrator&#39; jordan</code></td>
<td align="center">添加用户时指定uid，bash，描述信息（comment）</td>
</tr>
<tr>
<td align="center">-g | -G</td>
<td align="center">添加主组 | 附加组</td>
</tr>
<tr>
<td align="center">usermod</td>
<td align="center">修改用户各属性</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">各常用参数同useradd</td>
</tr>
<tr>
<td align="center">useradd -u 0 -o rooter</td>
<td align="center">添加一个与root公用uid &#x3D; 0的管理员用户时，-o可以使系统不要求uid的唯一性，实则该新建用户与root是一个用户（root别名）</td>
</tr>
</tbody></table>
<h3 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/group                                                   </span></span><br><span class="line"><span class="comment"># grep wheel /etc/group</span></span><br><span class="line"><span class="comment"># groupadd test</span></span><br><span class="line"><span class="comment"># grep test /etc/group</span></span><br><span class="line"><span class="comment"># groupadd -g 8000 admin</span></span><br><span class="line"><span class="comment"># grep admin /etc/group</span></span><br><span class="line"><span class="comment"># groupadd --help</span></span><br><span class="line"><span class="comment"># groupmod -g 7000 admin</span></span><br><span class="line"><span class="comment"># grep admin /etc/group</span></span><br><span class="line"><span class="comment"># groupmod -n admin administrator</span></span><br><span class="line"><span class="comment"># groupmod -n  administrator admin</span></span><br><span class="line"><span class="comment"># grep admin /etc/group</span></span><br><span class="line"><span class="comment"># grep wheel /etc/group</span></span><br><span class="line"><span class="comment"># useradd harry</span></span><br><span class="line"><span class="comment"># useradd tom</span></span><br><span class="line"><span class="comment"># useradd jack</span></span><br><span class="line"><span class="comment"># gpasswd -a harry wheel</span></span><br><span class="line"><span class="comment"># grep wheel /etc/group</span></span><br><span class="line"><span class="comment"># gpasswd -a tom wheel</span></span><br><span class="line"><span class="comment"># gpasswd -a jack wheel</span></span><br><span class="line"><span class="comment"># grep wheel /etc/group</span></span><br><span class="line"><span class="comment"># gpasswd -d tom whell</span></span><br><span class="line"><span class="comment"># gpasswd -d tom wheel</span></span><br><span class="line"><span class="comment"># grep wheel /etc/group</span></span><br><span class="line"><span class="comment"># gpasswd -M student wheel</span></span><br><span class="line"><span class="comment"># grep wheel /etc/group</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">groupadd</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">groupmod</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">groupdel</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">-g</td>
<td align="center">设置gid</td>
</tr>
<tr>
<td align="center">-n  newname name</td>
<td align="center">更改组名</td>
</tr>
<tr>
<td align="center">gpasswd -a newuser group</td>
<td align="center">把用户添加到已有组</td>
</tr>
<tr>
<td align="center">gpasswd -d olduser group</td>
<td align="center">把组内已有用户删除</td>
</tr>
<tr>
<td align="center">gpasswd -M user1,user2 group</td>
<td align="center">精确设置组员</td>
</tr>
</tbody></table>
<h2 id="su-sudo"><a href="#su-sudo" class="headerlink" title="su sudo"></a>su sudo</h2><p>su</p>
<p>su 和 su - </p>
<p>su - 会切换到对应用户的家目录 也会加载对应用户的环境变量</p>
<p>sudo</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">useradd jack</span><br><span class="line">usermod -G wheel jack </span><br><span class="line">passwd jack </span><br><span class="line">su - jack</span><br><span class="line">visudo === vim /etc/sudoers</span><br><span class="line"><span class="comment">#%wheel  ALL=(ALL)       NOPASSWD: ALL 取消注释# </span></span><br><span class="line"><span class="comment">#其实是给用户所在组设置NOPASSWD：ALL,只不过默认有所在行，删掉注释#使之生效即可</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="生命周期（不熟，复习）"><a href="#生命周期（不熟，复习）" class="headerlink" title="生命周期（不熟，复习）"></a>生命周期（不熟，复习）</h2><p>chage或者修改配置文件、etc&#x2F;login.defs</p>
<h3 id="x2F-etc-x2F-shadow"><a href="#x2F-etc-x2F-shadow" class="headerlink" title="&#x2F;etc&#x2F;shadow"></a>&#x2F;etc&#x2F;shadow</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/shadow</span></span><br><span class="line"><span class="comment"># man chage</span></span><br><span class="line"><span class="comment"># chage -l root</span></span><br><span class="line"><span class="comment"># chage --help</span></span><br><span class="line"><span class="comment"># grep root /etc/shadow</span></span><br><span class="line"><span class="comment"># chage -d 18123 -E 19000 -I 19001 -m 7 -M 14 -W 8 root</span></span><br><span class="line"><span class="comment"># grep root /etc/shadow</span></span><br><span class="line"><span class="comment"># vim /etc/login.defs</span></span><br><span class="line"><span class="comment"># useradd time</span></span><br><span class="line"><span class="comment"># chage -l time</span></span><br><span class="line"><span class="comment"># grep time /etc/shadow</span></span><br></pre></td></tr></table></figure>

<h2 id="常用配置文件"><a href="#常用配置文件" class="headerlink" title="常用配置文件"></a>常用配置文件</h2><p>&#x2F;etc&#x2F;passwd</p>
<p>&#x2F;etc&#x2F;group</p>
<p>&#x2F;etc&#x2F;shadow</p>
<p>&#x2F;etc&#x2F;sudoers</p>
<p>&#x2F;etc&#x2F;login.defs</p>
<h1 id="第七章-控制对文件的访问"><a href="#第七章-控制对文件的访问" class="headerlink" title="第七章 控制对文件的访问"></a>第七章 控制对文件的访问</h1><h2 id="权限简介"><a href="#权限简介" class="headerlink" title="权限简介"></a>权限简介</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls -l</span></span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--. 1 root root 0 Aug 27 18:52 rootfile</span><br><span class="line">三个字段 r读 w写 x执行</span><br><span class="line"><span class="comment"># ls -ld 对目录</span></span><br><span class="line">三个权限后的.:可能为空，为+，为.，对应着不同情况，详情见rh134</span><br></pre></td></tr></table></figure>

<h2 id="数字表示法"><a href="#数字表示法" class="headerlink" title="数字表示法"></a>数字表示法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rwxrwxrwx 有权限1 没权限0</span><br><span class="line">1*2^2+1*2^1+1*2^0</span><br><span class="line">421421421 4+2+1=7</span><br><span class="line">777</span><br></pre></td></tr></table></figure>

<ul>
<li>目录的读写权限前提要依赖于执行权限，没有执行权限无法进行其他命令</li>
</ul>
<h2 id="chmod修改权限"><a href="#chmod修改权限" class="headerlink" title="chmod修改权限"></a>chmod修改权限</h2><ul>
<li><p><code>chmod</code> <code>who[ugoa]</code> <code>+-=</code> <code>[rwx]</code>  <code>filename</code>	精确但较为繁琐</p>
</li>
<li><p>chmod 666 filename	简洁但需要计算</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod u+x test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod g+w test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod o+wx test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod a-w test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod u+w,o=w test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod u=r,g=x,o=r test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod 777 test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod 666 test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod 424 test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod 400 test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br><span class="line"><span class="comment"># chmod 100 test</span></span><br><span class="line"><span class="comment"># ls -l test</span></span><br></pre></td></tr></table></figure>

<h2 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h2><p><code>chown 用户：组 file</code> 更改用户的属主和属组，单独设置组可以使用<code>：组</code>，分割用户和组尽量使用“：”而不是“.”，虽然也可以用，因为添加用户时发现user的命名中“.”是支持的，为了避免矛盾，否则会优先识别为用户而不是用户＋组的格式</p>
<p>chgrp 组 file 单独设置组</p>
<p>chown -R 用户：组 dir 更改目录的权限，并且递归到子文件，同时设置子文件的用户和组</p>
<h2 id="默认权限（通过设置umask值）"><a href="#默认权限（通过设置umask值）" class="headerlink" title="默认权限（通过设置umask值）"></a>默认权限（通过设置umask值）</h2><ul>
<li><p><code>vim /etc/profile</code></p>
</li>
<li><p>root用户umask&#x3D;0022</p>
</li>
<li><p>普通用户umask&#x3D;0002</p>
</li>
<li><p>umask值会对新创建的文件设定默认的权限</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root用户 umask 0022 第一个0是占位，在bash中没有其他的作用</span><br><span class="line">后三位分别对应 属主 属组 和 其他用户</span><br><span class="line">file 644</span><br><span class="line">dir 755</span><br><span class="line">umask 022 000 010 010-&gt;111 101 101</span><br><span class="line">file </span><br><span class="line">666 110 110 110</span><br><span class="line">    111 101 101</span><br><span class="line">    110 100 100-&gt;644</span><br><span class="line">dir</span><br><span class="line">777 111 111 111</span><br><span class="line">    111 101 101</span><br><span class="line">    111 101 101-&gt;755</span><br><span class="line"></span><br><span class="line">student用户 umask 0002</span><br><span class="line">file 664</span><br><span class="line">dir 775</span><br></pre></td></tr></table></figure>

<h1 id="第二天细节小节"><a href="#第二天细节小节" class="headerlink" title="第二天细节小节"></a>第二天细节小节</h1><ul>
<li><p><strong>部分标注出现在具体位置，在此只记录个人的一个研究成果，旨在探究：</strong></p>
<p><code>哪些用户拥有文件权限的修改权限</code></p>
</li>
</ul>
<blockquote>
<ol>
<li>root用户下，在&#x2F;tmp目录下创建文件file</li>
</ol>
<blockquote>
<ul>
<li>对文件进行编辑，chmod 000 file，使该文件没有任何u，g，o的权限。接下来对各个用户进行测试</li>
</ul>
</blockquote>
<ol start="2">
<li>新建ln用户，在root用户下，gpasswd -a ln wheel,将ln用户添加到wheel组，因为student默认有一个wheel附加组，此处为控制变量使ln与student有共同所在组</li>
</ol>
<blockquote>
<ul>
<li>在root用户下，chown student file，更改文件属主为student</li>
<li>chgrp wheel file，更改文件属组为wheel</li>
<li>此时ll查看file属性，为ugo权限000，属主student，属组wheel</li>
</ul>
</blockquote>
<ol start="3">
<li>鉴于某同学提出的问题，没有执行权限的文件无法用.&#x2F;file执行，但是可以用bash file执行</li>
</ol>
<blockquote>
<ul>
<li>which bash发现bash所在位置为&#x2F;user&#x2F;bin&#x2F;bash</li>
<li>ll &#x2F;user&#x2F;bin&#x2F;bash 发现该文件（shell命令）的u，g，o都有r和x权限，说明任何用户都可以使用bash</li>
<li>bash file与.&#x2F;file 的最本质区别为：<ul>
<li>前者命令是bash，所有用户都有执行权限，file只是其参数，不许考虑file的x权限；</li>
<li>后者的命令是file本身，没有执行权限，所以无法执行。</li>
</ul>
</li>
</ul>
<p><code>其中需要注意的一点是，root用户作为超管，即使没有任何权限也仍旧可以对file进行cat（读），写（vim，echo重定向），执行（bash）。</code></p>
<ul>
<li>因为root用户不具备正常用户的特质，不将root用户下执行成功的情况认为是有效的。老师课上得出的结论为，bash 可以执行任意文件（作为他的参数），此处质疑并实验论证</li>
</ul>
</blockquote>
<ol start="4">
<li>在student用户下，无法读，写，执行file，包括bash file（此时student是file的属主）</li>
</ol>
<blockquote>
<ul>
<li>在student用户下，chmod u+r file，ll发现修改成功</li>
<li>执行bash file，发现可以执行</li>
</ul>
</blockquote>
<p><strong>得出结论</strong>：<code>bash file时，不是任何file都可以作为参数被执行，即使任何用户都有bash的执行权限。可以使用的前提是，当前用户具有file的读权限。root用户除外</code></p>
<ol start="5">
<li>发现新问题：除了root用户可以修改file的权限，作为属主的student也拥有对file权限的修改权限。那么这个权限有谁有？</li>
</ol>
<blockquote>
<ul>
<li>基于之前的准备工作，除去root和file属主student外，合理推测file属组wheel内的成员拥有该权限去修改file的权限</li>
<li>此时wheel内的成员为student和ln</li>
</ul>
</blockquote>
<ol start="6">
<li>在ln用户下，chmod命令无法使用。</li>
</ol>
<blockquote>
<ul>
<li>基于之前bash的推论，在用同样的方法验证过了chmod和bash一样都是所有用户都有执行权限的文件后，合理推测ln用户无法使用该命令是因为没有file的读权限。</li>
</ul>
</blockquote>
<ol start="7">
<li>在root用户下，chmod g+r file，给g以读权限</li>
</ol>
<blockquote>
<ul>
<li>ln用户依旧无法使用chmod命令修改file的权限</li>
<li>经过测试，依次给g以r，w，x权限，都与上述情况一致</li>
<li>合理猜测是否属组必须为主组为wheel而不是附加组才拥有修改file权限的权限</li>
</ul>
</blockquote>
<ol start="8">
<li>在root用户下，usermod -g wheel student，同样设置ln用户，使其主组为wheel</li>
</ol>
<blockquote>
<ul>
<li>重复之前的操作，ln用户依旧无法使用chmod命令修改file权限</li>
<li>说明属组内用户没有chmod 修改file权限的原因与是否是主组无关</li>
<li>开始质疑，属主student可以在不具备任何权限的情况下修改文件权限，是否使因为之前student有附加组wheel以至于获得了过高的权限</li>
</ul>
</blockquote>
<ol start="9">
<li>在root用户下，创建新用户（所在组中），并将file的属主改为新用户，过程略。</li>
</ol>
<blockquote>
<ul>
<li>没有任何权限，也不在wheel组，更没有修改过visudo的小白用户依旧可以使用chmod命令修改file的权限</li>
<li>证明是否拥有修改file权限的权限与属主是否有更高的权限无关，仅仅与属主身份有关。</li>
</ul>
</blockquote>
<p>论证结果：与bash命令不同，即使普通用户具有了file的访问权限，也无法使用chmod命令修改file的权限。可以修改file权限的用户为root用户依旧file的所有者（属主u），任何所有组内的用户以任何f方式都没有该权限修改file权限（属组g），更别说其他用户（o）</p>
</blockquote>
<h2 id="特殊权限"><a href="#特殊权限" class="headerlink" title="特殊权限"></a>特殊权限</h2><h3 id="SUID（对命令有效，以文件拥有者的身份执行）"><a href="#SUID（对命令有效，以文件拥有者的身份执行）" class="headerlink" title="SUID（对命令有效，以文件拥有者的身份执行）"></a>SUID（对命令有效，以文件拥有者的身份执行）</h3><p>set user id</p>
<p><code>作用:任何用户在运行拥有suid权限的命令(二进制可执行文件)时,都以该命令拥有者的身份执行</code></p>
<p><code>作用位置:user</code><br><code>作用对象:文件(二进制可执行文件)</code></p>
<p>^即给无权限执行命令的用户以命令拥有者的身份执行命令，一般用于管理员想让普通用户执行不需要管理员密码和sudo的命令^</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test: cat /etc/shadow 再加特殊权限之前看不了</span><br><span class="line">root: chmod u+s /usr/bin/cat</span><br><span class="line">目的为普通用户可以使用高级命令</span><br></pre></td></tr></table></figure>

<h3 id="SGID-考点-（对目录有效，目录下文件与目录组匹配，且目录下目录具有sgid权限）"><a href="#SGID-考点-（对目录有效，目录下文件与目录组匹配，且目录下目录具有sgid权限）" class="headerlink" title="SGID^考点^（对目录有效，目录下文件与目录组匹配，且目录下目录具有sgid权限）"></a>SGID^考点^（对目录有效，目录下文件与目录组匹配，且目录下目录具有sgid权限）</h3><p><strong>书上说对命令也有效，以命令文件拥有组的身份执行</strong> <code>验证有矛盾，在小节中细究</code></p>
<p>set group id</p>
<p><code>作用:任何用户在拥有sgid权限的目录下,创建的文件都要继承目录的组 用户-&gt;目录组-&gt;share dir</code></p>
<p><strong>添加sgid权限的目录下，创建的文件和子目录以及子目录下孙子都继承目录的所在组，实现共享目录的目的</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">作用位置:group</span><br><span class="line">作用对象:目录</span><br><span class="line">chmod g+s directory</span><br></pre></td></tr></table></figure>

<h3 id="sticky-SBIT（对目录有效，要求目录下文件各管各的，不能删改别人的文件）"><a href="#sticky-SBIT（对目录有效，要求目录下文件各管各的，不能删改别人的文件）" class="headerlink" title="sticky SBIT（对目录有效，要求目录下文件各管各的，不能删改别人的文件）"></a>sticky SBIT（对目录有效，要求目录下文件各管各的，不能删改别人的文件）</h3><p>^给目录加other用户的t权限，目的为给拥有该目录读写权限的用户各自管理各自的文件，无法操作其他用户创建的文件^</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3.sticky(冒险位,粘贴位)</span><br><span class="line">作用:任何用户在拥有t权限目录下创建的文件,只能自己删除,其他人无权删除</span><br><span class="line">作用位置:other</span><br><span class="line">作用对象:目录</span><br><span class="line">chmod o+t directory</span><br></pre></td></tr></table></figure>

<h2 id="权限优先级"><a href="#权限优先级" class="headerlink" title="权限优先级"></a>权限优先级</h2><p><strong><u>最具体的权限具有优先权</u>，用户权限覆盖组权限，后者又覆盖其他权限。</strong></p>
<h2 id="其他用户权限管理"><a href="#其他用户权限管理" class="headerlink" title="其他用户权限管理"></a>其他用户权限管理</h2><p>other 范围很大</p>
<p>对于root来说 张三 李四 王五 other用户。。。。</p>
<p><strong>RH134 第四章 setfacl 访问控制列表 ACL</strong></p>
<h1 id="第八章-进程监控及管理-重点"><a href="#第八章-进程监控及管理-重点" class="headerlink" title="第八章 进程监控及管理^重点^"></a>第八章 进程监控及管理^重点^</h1><h2 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h2><p><strong>程序</strong>：保存在磁盘中机器代码指令和数据的集合</p>
<p><strong>进程</strong>：程序的实例（运行着的程序），</p>
<p><strong>Linux操作系统</strong>：多任务，多进程，网络</p>
<h2 id="查看进程状态"><a href="#查看进程状态" class="headerlink" title="查看进程状态"></a>查看进程状态</h2><h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><p>tty：终端</p>
<p>pts：伪终端</p>
<table>
<thead>
<tr>
<th align="center">ps</th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">ps aux | ps -ef</td>
<td align="center">显示所有进程（e）的详细信息（f）</td>
</tr>
<tr>
<td align="center">ps -f -u user</td>
<td align="center">显示指定用户的详细进程</td>
</tr>
<tr>
<td align="center">–sort&#x3D;cpu或者-cpu</td>
<td align="center">按cpu排序 | 反向排序</td>
</tr>
<tr>
<td align="center">ps tree</td>
<td align="center">查看进程树，没有tree可以yum provides查询tree命令的包并安装</td>
</tr>
<tr>
<td align="center">-C</td>
<td align="center">根据名称查</td>
</tr>
<tr>
<td align="center">-ppid</td>
<td align="center">指定父进程ppid</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps</span></span><br><span class="line"> PID TTY          TIME CMD</span><br><span class="line"> 1878 pts/0    00:00:00 bash</span><br><span class="line"> 5056 pts/0    00:00:00 ps</span><br><span class="line"> PID：	进程编号</span><br><span class="line"> TTY：	占用的终端</span><br><span class="line"> TIME：	占用CPU的时间</span><br><span class="line"> CMD：	执行的命令</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps -ef | head -n 5</span></span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class="line">root         1     0  0 16:30 ?        00:00:01 /usr/lib/systemd/systemd --switched-root --system --deserialize 17</span><br><span class="line">root         2     0  0 16:30 ?        00:00:00 [kthreadd]</span><br><span class="line">root         3     2  0 16:30 ?        00:00:00 [rcu_gp]</span><br><span class="line">root         4     2  0 16:30 ?        00:00:00 [rcu_par_gp]</span><br><span class="line">选项作用：</span><br><span class="line">	-e 系统中所有的进程</span><br><span class="line">	-f 详细信息</span><br><span class="line">UID：	进程拥有者</span><br><span class="line">PID：	进程编号</span><br><span class="line">PPID：	父进程 （1是所有进程的父进程，为systemd）</span><br><span class="line">C：		占用CPU的百分比</span><br><span class="line">STIME：	进程启动时间</span><br><span class="line">TTY：	在哪个终端上运行</span><br><span class="line">TIME：	占用CPU的时间</span><br><span class="line">CMD：	执行的命令</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># ps aux|head -n 5</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root         1  0.0  1.5 244092 13248 ?        Ss   16:30   0:01 /usr/lib/systemd/systemd --switched-root --system --deserialize 17</span><br><span class="line">root         2  0.0  0.0      0     0 ?        S    16:30   0:00 [kthreadd]</span><br><span class="line">root         3  0.0  0.0      0     0 ?        I&lt;   16:30   0:00 [rcu_gp]</span><br><span class="line">root         4  0.0  0.0      0     0 ?        I&lt;   16:30   0:00 [rcu_par_gp]</span><br><span class="line">USER：	进程拥有者</span><br><span class="line">PID：	进程编号</span><br><span class="line">%CPU：	占用CPU的百分比</span><br><span class="line">%MEM：	占用物理内存的百分比</span><br><span class="line">VSZ：	预设内存（虚拟内存）</span><br><span class="line">RSS：	真实内存（物理内存）</span><br><span class="line">TTY：	运行终端</span><br><span class="line">STAT：	进程状态</span><br><span class="line">START：	进程启动时间</span><br><span class="line">TIME：	占用CPU时间（运行时间）</span><br><span class="line">COMMAND：进程名称</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps aux</span></span><br><span class="line"><span class="comment"># ps</span></span><br><span class="line"><span class="comment"># ps ef</span></span><br><span class="line"><span class="comment"># ps -ef</span></span><br><span class="line"><span class="comment"># ps -ef | head -n 5</span></span><br><span class="line"><span class="comment"># ps aux</span></span><br><span class="line"><span class="comment"># ps aux|head -n 5</span></span><br><span class="line"><span class="comment"># ps aux</span></span><br><span class="line"><span class="comment"># ps aux|head -n 5</span></span><br><span class="line"><span class="comment"># ps -aux|head -n 5</span></span><br><span class="line"><span class="comment"># ps aux</span></span><br><span class="line"><span class="comment"># ps -f -u student</span></span><br><span class="line"><span class="comment"># ps -C httpd</span></span><br><span class="line"><span class="comment"># yum -y install httpd</span></span><br><span class="line"><span class="comment"># systemctl start httpd</span></span><br><span class="line"><span class="comment"># ps -C httpd</span></span><br><span class="line"><span class="comment"># ps aux --sort=cpu</span></span><br><span class="line"><span class="comment"># ps aux --sort=pcpu</span></span><br><span class="line"><span class="comment"># ps aux --sort=-pcpu</span></span><br><span class="line"><span class="comment"># ps -o pid,uname,comm</span></span><br><span class="line"><span class="comment"># ps -o pid,uname,comm -C httpd</span></span><br><span class="line"><span class="comment"># ps aux|grep pid</span></span><br><span class="line"><span class="comment"># ps aux|grep student</span></span><br><span class="line"><span class="comment"># pstree</span></span><br><span class="line"><span class="comment"># yum provides pstree</span></span><br><span class="line"><span class="comment"># yum -y install psmisc</span></span><br><span class="line"><span class="comment"># pstree</span></span><br><span class="line"><span class="comment"># date</span></span><br><span class="line"><span class="comment"># date;sleep 3;date</span></span><br><span class="line"><span class="comment"># top</span></span><br><span class="line"><span class="comment">##显示所有进程详细信息</span></span><br><span class="line">ps aux</span><br><span class="line"><span class="comment">##-u 显示某个用户的进程列表</span></span><br><span class="line">ps -f -u kiosk</span><br><span class="line"><span class="comment">## -C 通过名字或者命令搜索进程</span></span><br><span class="line">ps -C httpd</span><br><span class="line"><span class="comment">## --sort  根据进程cpu使用率降序排列，查看前5个进程  -pcpu表示降序  pcpu升序</span></span><br><span class="line">ps aux --<span class="built_in">sort</span>=-pcpu | more</span><br><span class="line"><span class="comment">##-f 用树结构显示进程的层次关系，父子进程情况下</span></span><br><span class="line">ps -f --forest -C httpd</span><br><span class="line"><span class="comment">##显示一个父进程的所有子进程</span></span><br><span class="line">ps -o pid,<span class="built_in">uname</span>,<span class="built_in">comm</span> -C httpd</span><br><span class="line">ps --ppid 992(httpd主进程ID)</span><br><span class="line">ps --ppid 1</span><br><span class="line"><span class="comment">##省时省力的话</span></span><br><span class="line">ps aux|grep username|pid|other</span><br><span class="line"><span class="comment">##显示一个进程的所有线程  -L 参数</span></span><br><span class="line">ps -p 3150 -L </span><br><span class="line"><span class="comment">##显示进程的执行时间 -o参数</span></span><br><span class="line">ps -e -o pid,<span class="built_in">comm</span>,etime</span><br><span class="line"><span class="comment">##watch命令可以用来实时捕捉ps显示进程</span></span><br><span class="line">watch -n 1 <span class="string">&#x27;ps -e -o pid,uname,cmd,pmem,pcpu --sort=-pmem,-pcpu | head -15&#x27;</span></span><br><span class="line"><span class="comment">##pstree命令：列出当前的进程，以及它们的树状结构  格式：pstree [选项] [pid|user]</span></span><br><span class="line">pstree</span><br><span class="line"><span class="comment">##sleep命令：使进程暂停执行一段时间</span></span><br><span class="line"><span class="built_in">date</span>;<span class="built_in">sleep</span> 1m;<span class="built_in">date</span></span><br></pre></td></tr></table></figure>

<h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">top - 14:20:12 up 42 min,  4 users,  load average: 0.30, 0.27, 0.25（uptime|w命令也可以查看）</span><br><span class="line">当前系统时间        运行了多久   登录用户   CPU平均负载</span><br><span class="line">Tasks: 419 total,   2 running, 417 sleeping,   0 stopped,   0 zombie</span><br><span class="line">进程总数                运行进程      休眠           停止                僵尸 </span><br><span class="line">%Cpu(s):  9.8 us,  3.0 sy,  0.0 ni, 83.5 id,  3.5 wa,  0.0 hi,  0.1 si,  0.0 st</span><br><span class="line">          用户态    内核态   调整nice   空闲     等待io    硬中断    软中断    虚拟化偷取</span><br><span class="line">          1. 硬中断是由硬件产生的，比如，像磁盘，网卡，键盘，时钟等。</span><br><span class="line">          2. 软中断的处理非常像硬中断。然而，它们仅仅是由当前正在运行的进程所产生的。</span><br><span class="line">KiB Mem :  4031780 total,  2625064 free,   580228 used,   826488 buff/cache</span><br><span class="line">KiB Swap:  1023996 total,  1023996 free,        0 used.  3210724 avail Mem</span><br></pre></td></tr></table></figure>



<h4 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Press &#x27;h&#x27; or &#x27;?&#x27; for help with Windows在top中使用h或？查看帮助</span><br><span class="line">切换标题</span><br><span class="line">  l,t,m     Toggle Summary: &#x27;l&#x27; load avg; &#x27;t&#x27; task/cpu stats; &#x27;m&#x27; memory info</span><br><span class="line">物理CPU展示</span><br><span class="line">  0,1,2,3,I Toggle: &#x27;0&#x27; zeros; &#x27;1/2/3&#x27; cpus or numa node views; &#x27;I&#x27; Irix mode</span><br><span class="line">展示项调整</span><br><span class="line">  f,F,X     Fields: &#x27;f&#x27;/&#x27;F&#x27; add/remove/order/sort; &#x27;X&#x27; increase fixed-width</span><br><span class="line">  f 		进入选择显示项界面，空格选中，q退出		</span><br><span class="line">关键字查找</span><br><span class="line">  L			搜索，高亮显示</span><br><span class="line">  L,&amp;,&lt;,&gt; . Locate: &#x27;L&#x27;/&#x27;&amp;&#x27; find/again; Move sort column: &#x27;&lt;&#x27;/&#x27;&gt;&#x27; left/right</span><br><span class="line">  R,H,V,J . Toggle: &#x27;R&#x27; Sort; &#x27;H&#x27; Threads; &#x27;V&#x27; Forest view; &#x27;J&#x27; Num justify</span><br><span class="line">  c,i,S,j . Toggle: &#x27;c&#x27; Cmd name/line; &#x27;i&#x27; Idle; &#x27;S&#x27; Time; &#x27;j&#x27; Str justify</span><br><span class="line">s|刷新频率</span><br><span class="line">  x,y     . Toggle highlights: &#x27;x&#x27; sort field; &#x27;y&#x27; running tasks</span><br><span class="line">  z,b     . Toggle: &#x27;z&#x27; color/mono; &#x27;b&#x27; bold/reverse (only if &#x27;x&#x27; or &#x27;y&#x27;)</span><br><span class="line">  u,U,o,O . Filter by: &#x27;u&#x27;/&#x27;U&#x27; effective/any user; &#x27;o&#x27;/&#x27;O&#x27; other criteria</span><br><span class="line">  u			按用户查</span><br><span class="line">  n,#,^O  . Set: &#x27;n&#x27;/&#x27;#&#x27; max tasks displayed; Show: Ctrl+&#x27;O&#x27; other filter(s)</span><br><span class="line">  C,...   . Toggle scroll coordinates msg for: up,down,left,right,home,end</span><br><span class="line">杀进程|调整nice值</span><br><span class="line">  k,r       Manipulate tasks: &#x27;k&#x27; kill; &#x27;r&#x27; renice</span><br><span class="line">  d or s    Set update interval</span><br><span class="line">保存配置|查看进程详细信息</span><br><span class="line">  W,Y       Write configuration file &#x27;W&#x27;; Inspect other output &#x27;Y&#x27;</span><br><span class="line">  W			在修改文件配置后</span><br><span class="line">内存|CPU排序</span><br><span class="line">  M,P</span><br><span class="line">退出</span><br><span class="line">  q         Quit</span><br></pre></td></tr></table></figure>

<h2 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##列出所有信号名称</span></span><br><span class="line"><span class="comment">##HUP     1    终端断线</span></span><br><span class="line"><span class="comment">##INT     2    中断（同 Ctrl + C）</span></span><br><span class="line"><span class="comment">##QUIT    3    退出（同 Ctrl + \）</span></span><br><span class="line"><span class="comment">##TERM    15   终止（默认不加）</span></span><br><span class="line"><span class="comment">##KILL    9    强制终止</span></span><br><span class="line"><span class="comment">##CONT    18   继续（与STOP相反， fg/bg命令）</span></span><br><span class="line"><span class="comment">##STOP    19   暂停（同 Ctrl + Z）</span></span><br></pre></td></tr></table></figure>

<h3 id="控制作业（jobs）-重要"><a href="#控制作业（jobs）-重要" class="headerlink" title="控制作业（jobs）^重要^"></a>控制作业（jobs）^重要^</h3><p><code>不需要理解控制作业的意思(其实就是jobs)，其实就是对任务的操作</code></p>
<ol>
<li><p>执行一个前台任务会占用终端，不能做别的事，即一个终端只能执行一个前台任务（这也是控制作业的主要目的）</p>
</li>
<li><p><code>ctrl z</code>，将任务放到后台执行，但是同时会暂停任务</p>
</li>
<li><p><code>jobs</code>查看<strong>当前终端中</strong>正在进行的任务，并获取其任务编号</p>
<p><strong>目前不清楚任务编号右边的+ 和 - 的意义</strong></p>
<p><code>测试发现jobs查看控制作业只对当前终端中进行的任务有效</code></p>
</li>
<li><p><code>bg %任务编号</code>，目的是继续后台任务</p>
</li>
<li><p>开始任务时直接使用 <code>命令 &amp;</code> ^（即直接在命令的最后空一格加上&amp;）^，把命令直接放到后台并是运行状态^（区分bg命令）^</p>
</li>
<li><p>同理，<code>fg %任务编号</code>可以将后台任务放到前台</p>
</li>
<li><p>无论是前台还是后台任务，退出终端后进程结束，侧面说明了<code>jobs</code>是查看一个终端中正在进行的任务</p>
</li>
<li><p><code>nohup 命令</code>，使任务可以脱离终端运行，终端关闭的时候任务不结束，可以与&amp;一起使用</p>
<p>目前已知知识无法做到将<code>脱离终端</code>且<code>退出了终端</code>的<code>后台任务</code>恢复到前台运行，但也没必要</p>
</li>
</ol>
<h4 id="xclock示例："><a href="#xclock示例：" class="headerlink" title="xclock示例："></a>xclock示例：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rhel8默认没有xclock安装包，这个在这不演示</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install xclock</span></span><br><span class="line">[root@localhost ~]<span class="comment"># xclock  -update 1  前台运行</span></span><br><span class="line">[root@localhost ~]<span class="comment"># xclock  -update 1 &amp; 后台运行 多按下enter键</span></span><br><span class="line">[root@localhost ~]<span class="comment"># nohup xclock  -update 1 &amp; 脱离终端运行</span></span><br><span class="line">[root@localhost ~]<span class="comment"># xclock  -update 1</span></span><br><span class="line">ctrl+z</span><br><span class="line">[root@localhost ~]<span class="comment"># jobs</span></span><br><span class="line">[1]+  已停止               xclock -update 1</span><br><span class="line">[root@localhost ~]<span class="comment"># bg 1 </span></span><br><span class="line">[root@localhost ~]<span class="comment"># fg 1</span></span><br></pre></td></tr></table></figure>

<h2 id="调整nice值（更改优先级）"><a href="#调整nice值（更改优先级）" class="headerlink" title="调整nice值（更改优先级）"></a>调整nice值（更改优先级）</h2><ul>
<li>nice值范围 -20~19，越小优先级越高</li>
<li>调整ni其实是为了侧面影响pr，pr才是决定任务优先级的直接属性，因为无法直接修改pr值，pr值是系统把ni通过计算得到的^（个人理解不保证准确）^</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">运行命令时指定：</span><br><span class="line">[root@servera <span class="built_in">test</span>]<span class="comment"># nice -n -19 vim passwd #运行任务时直接指定nice值 </span></span><br><span class="line">[root@servera ~]<span class="comment"># ps aux|grep vim</span></span><br><span class="line">root      2627  0.0  0.4 255808  8132 pts/1    S&lt;+  09:50   0:00 vim passwd</span><br><span class="line"></span><br><span class="line">top-&gt;L-&gt;vim</span><br><span class="line">根据PID调整：</span><br><span class="line">[root@servera ~]<span class="comment"># renice -n -10 2627</span></span><br><span class="line">2627 (process ID) old priority -19, new priority -10</span><br><span class="line"></span><br><span class="line">[root@servera ~]<span class="comment"># ps aux|grep vim</span></span><br><span class="line">root      2627  0.0  0.4 255808  8132 pts/1    S&lt;+  09:50   0:00 vim passwd</span><br><span class="line">&lt;是高优先级，+是前台进程</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">top-&gt;L-&gt;vim</span><br><span class="line">top动态调整：</span><br><span class="line">top-&gt;r-&gt;PID-&gt;pririty number</span><br></pre></td></tr></table></figure>

<h2 id="平均负载"><a href="#平均负载" class="headerlink" title="平均负载"></a>平均负载</h2><p>可以通过<code>top</code>，<code>uptime</code>，<code>w</code>查看cpu的占用情况。这个情况是系统通过计算单位时间内之执行任务的单位数得到的平均值，比如单核cpu的平均负载如果超过1，则说明当前有很多任务在等待中。俗称：卡<strong>^（系统会预留一部分cpu用来计算平均负载，而不是我所理解的卡的算不出来）^</strong></p>
<h1 id="第九章-控制服务和守护进程-重点"><a href="#第九章-控制服务和守护进程-重点" class="headerlink" title="第九章 控制服务和守护进程^重点^"></a>第九章 控制服务和守护进程^重点^</h1><p>服务概念：<code>可以在后台运行多个守护进程</code></p>
<p>rhel7中最先启动的是init进程，pid为1，是所有进程的父进程</p>
<p>rhel8中改为systemd进程，代替init，通过which命令并ll init所在位置发现</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[student@workstation ~]$ which init</span><br><span class="line">/usr/sbin/init</span><br><span class="line">[student@workstation ~]$ ll /usr/sbin/init</span><br><span class="line">lrwxrwxrwx. 1 root root 22 4月  15 2020 /usr/sbin/init -&gt; ../lib/systemd/systemd</span><br><span class="line">[student@workstation ~]$ </span><br></pre></td></tr></table></figure>

<p>说明init已完全被systemd取代</p>
<table>
<thead>
<tr>
<th align="center">init</th>
<th align="center">systemd</th>
</tr>
</thead>
<tbody><tr>
<td align="center">串行启动，按次序</td>
<td align="center">并行启动，同时启动多个systemd向下启动。</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">按需激活进程</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">基于依赖关系定义服务控制逻辑</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">向后兼容sysv init脚本（可以取代init命令）</td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p><code>做服务相关操作时，防火墙和selinux时默认开启的，需要考虑到</code></p>
<p>管理一个服务的基本流程：</p>
<ol>
<li>下载管理包</li>
<li>启动服务（同时添加自启动）（enable –now可以给没启动的服务在添加自启动的同时启动服务）</li>
<li>本地验证（查看状态status）</li>
<li>实际验证（比如httpd服务，验证别的用户是否可以访问）</li>
</ol>
<h2 id="单元管理"><a href="#单元管理" class="headerlink" title="单元管理"></a>单元管理</h2><p>单元：不同类型的systemd对象</p>
<p>查看 ： systemctl -t help</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@servera ~]# systemctl					输出激活的单元</span><br><span class="line">[root@servera ~]# systemctl list-units 		输出激活的单元</span><br><span class="line">输出运行失败的单元：</span><br><span class="line">[root@servera ~]# systemctl --failed </span><br><span class="line">0 loaded units listed. Pass --all to see loaded but inactive units, too.</span><br><span class="line">To show all installed unit files use &#x27;systemctl list-unit-files&#x27;.</span><br><span class="line">所有可用的单元文件存放在 /usr/lib/systemd/system/ 和 /etc/systemd/system/ 目录（后者优先级更高）。</span><br><span class="line"></span><br><span class="line">查看所有已安装服务：</span><br><span class="line">[root@servera ~]# systemctl list-unit-files</span><br><span class="line"></span><br><span class="line">查看系统中有效的unit</span><br><span class="line">[root@servera ~]# systemctl -t help</span><br><span class="line">Available unit types:</span><br><span class="line"><span class="meta prompt_">service#</span><span class="language-bash">重中重</span></span><br><span class="line"><span class="meta prompt_">socket#</span><span class="language-bash">重</span></span><br><span class="line">target</span><br><span class="line">device</span><br><span class="line">mount</span><br><span class="line">automount</span><br><span class="line">swap</span><br><span class="line">timer</span><br><span class="line">path</span><br><span class="line">slice切片，集中管理多个</span><br><span class="line">scope范围</span><br></pre></td></tr></table></figure>

<h2 id="服务状态（status）"><a href="#服务状态（status）" class="headerlink" title="服务状态（status）"></a>服务状态（status）</h2><table>
<thead>
<tr>
<th>状态</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>loaded</td>
<td>配置文件被处理</td>
</tr>
<tr>
<td>active(running)</td>
<td>一个或多个进程持续运行</td>
</tr>
<tr>
<td>active(exited)</td>
<td>成功完成一个“一次性”配置（执行了且完成并退出）</td>
</tr>
<tr>
<td>active(waiting)</td>
<td>运行但等待“事件”</td>
</tr>
<tr>
<td>inactive（dead）</td>
<td>未运行</td>
</tr>
<tr>
<td>enabled</td>
<td>开机启动</td>
</tr>
<tr>
<td>disabled</td>
<td>不随开机启动</td>
</tr>
<tr>
<td>static</td>
<td>不能被（手动）启用，但可以被已启用单元自动启动</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@servera ~]<span class="comment"># systemctl status httpd</span></span><br><span class="line">● httpd.service - The Apache HTTP Server	描述信息</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: dis&gt;</span><br><span class="line">   Active: active (running) since Tue 2020-09-01 10:20:17 CST; 12min ago</span><br><span class="line">     Docs: man:httpd.service(8)				帮助手册</span><br><span class="line">  Process: 4957 ExecReload=/usr/sbin/httpd <span class="variable">$OPTIONS</span> -k graceful (code=exited, status=&gt;</span><br><span class="line"> Main PID: 4082 (httpd)						主进程号</span><br><span class="line">   Status: <span class="string">&quot;Running, listening on: port 80&quot;</span>	服务状态</span><br><span class="line">    Tasks: 213 (<span class="built_in">limit</span>: 11405)				任务数量</span><br><span class="line">   Memory: 38.9M							占用内存</span><br><span class="line">   CGroup: /system.slice/httpd.service		资源配额</span><br><span class="line">           ├─4082 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─4958 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─4959 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─4960 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           └─4961 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">输出信息：</span><br><span class="line">Sep 01 10:20:17 servera.lab.example.com systemd[1]: Started The Apache HTTP Server.</span><br><span class="line">Sep 01 10:21:07 servera.lab.example.com systemd[1]: httpd.service: Current <span class="built_in">command</span> va&gt;</span><br><span class="line">Sep 01 10:21:17 servera.lab.example.com systemd[1]: httpd.service: Got notification</span><br></pre></td></tr></table></figure>

<h2 id="服务管理（常用功能）"><a href="#服务管理（常用功能）" class="headerlink" title="服务管理（常用功能）"></a>服务管理（常用功能）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">综合：</span><br><span class="line">- status</span><br><span class="line"><span class="comment"># systemctl status sshds</span></span><br><span class="line"><span class="comment"># service sshd status</span></span><br><span class="line"></span><br><span class="line">- is-enabled, is-active</span><br><span class="line"><span class="comment"># systemctl is-enabled sshd</span></span><br><span class="line"><span class="comment"># systemctl is-active sshd</span></span><br><span class="line"></span><br><span class="line">- start, stop</span><br><span class="line"><span class="comment"># systemctl is-active sshd</span></span><br><span class="line"><span class="comment"># systemctl stop sshd</span></span><br><span class="line"><span class="comment"># systemctl is-active sshd</span></span><br><span class="line"><span class="comment"># systemctl start sshd</span></span><br><span class="line"><span class="comment"># systemctl is-active sshd</span></span><br><span class="line"></span><br><span class="line">- <span class="built_in">enable</span>, <span class="built_in">disable</span></span><br><span class="line"><span class="comment"># systemctl is-enabled sshd</span></span><br><span class="line"><span class="comment"># systemctl disable sshd</span></span><br><span class="line"><span class="comment"># systemctl is-enabled sshd</span></span><br><span class="line"><span class="comment"># systemctl enable sshd</span></span><br><span class="line"><span class="comment"># systemctl is-enabled sshd</span></span><br><span class="line"></span><br><span class="line">- restart(stop &amp;&amp; start), reload</span><br><span class="line"><span class="comment"># systemctl status sshd</span></span><br><span class="line"><span class="comment"># systemctl restart sshd</span></span><br><span class="line"><span class="comment"># systemctl status sshd</span></span><br><span class="line"><span class="comment"># systemctl reload sshd</span></span><br><span class="line"><span class="comment"># systemctl status sshd</span></span><br><span class="line"></span><br><span class="line">- list-dependencies <span class="comment">#查看依赖关系（树图）</span></span><br><span class="line"><span class="comment"># systemctl list-dependencies </span></span><br><span class="line"><span class="comment"># systemctl list-dependencies | grep target</span></span><br><span class="line"></span><br><span class="line">- mask, unmask <span class="comment">#标记为无法被其他单元作为依赖启动，其本质为把symblink &gt;&gt; /dev/null</span></span><br><span class="line">而且经过验证，不止，不能被当作依赖项启动，也不能手动启动，mask命令一损俱损</span><br><span class="line"><span class="comment"># systemctl mask atd</span></span><br><span class="line"><span class="comment"># systemctl stop atd</span></span><br><span class="line"><span class="comment"># systemctl start atd || echo no</span></span><br><span class="line"><span class="comment"># systemctl status atd</span></span><br><span class="line"><span class="comment"># systemctl unmask atd</span></span><br><span class="line"><span class="comment"># systemctl start atd</span></span><br><span class="line"><span class="comment"># systemctl status atd</span></span><br><span class="line"></span><br><span class="line">  506  systemctl reload-or-restart httpd <span class="comment">#自动判断，优先reload不中断任务，不行才restart</span></span><br><span class="line">  507  <span class="built_in">ls</span> -l $(<span class="built_in">which</span> poweroff)</span><br><span class="line">  508  <span class="built_in">ls</span> -l $(<span class="built_in">which</span> reboot)</span><br><span class="line">  发现二者都重定向到了systemctl</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="版本对比"><a href="#版本对比" class="headerlink" title="版本对比"></a>版本对比</h2><table>
<thead>
<tr>
<th align="center"></th>
<th>RHEL&lt;&#x3D;6</th>
<th>RHEL&gt;&#x3D;7</th>
</tr>
</thead>
<tbody><tr>
<td align="center">start</td>
<td>service DAEMON start</td>
<td>systemctl start DAEMON</td>
</tr>
<tr>
<td align="center">stop</td>
<td>service DAEMON stop</td>
<td>systemctl stop DAEMON</td>
</tr>
<tr>
<td align="center">status</td>
<td>service DAEMON status</td>
<td>systemctl status DAEMON</td>
</tr>
<tr>
<td align="center">enable</td>
<td>chkconfig DAEMON on</td>
<td>systemctl enable DAEMON</td>
</tr>
<tr>
<td align="center">disable</td>
<td>chkconfig DAEMON off</td>
<td>systemctl disable DAEMON</td>
</tr>
</tbody></table>
<p><code>enable --now</code> 设置自启动的同时，会将当前没有启动的服务启动起来、</p>
<h3 id="电源管理"><a href="#电源管理" class="headerlink" title="电源管理"></a>电源管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@servera ~]<span class="comment"># systemctl poweroff</span></span><br><span class="line">[root@servera ~]<span class="comment"># systemctl reboot</span></span><br></pre></td></tr></table></figure>



<h1 id="第十章-openssh服务"><a href="#第十章-openssh服务" class="headerlink" title="第十章 openssh服务"></a>第十章 openssh服务</h1><h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><p>协议 加密登录 安全的 密码不会泄露 </p>
<p>openssh 开源实现</p>
<h2 id="加密算法"><a href="#加密算法" class="headerlink" title="加密算法"></a>加密算法</h2><h3 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h3><p>vim file ：X -&gt; 123 vim file 相同的密码</p>
<p>效率高 安全性差</p>
<h3 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h3><p>密钥对</p>
<p>公钥+私钥 一对 </p>
<p>公钥加密-&gt;私钥解密</p>
<p>私钥加密-&gt;公钥解密</p>
<p>效率低 安全性高</p>
<h2 id="SSH原理"><a href="#SSH原理" class="headerlink" title="SSH原理"></a>SSH原理</h2><h3 id="基本格式"><a href="#基本格式" class="headerlink" title="基本格式"></a>基本格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh username@hostname</span><br></pre></td></tr></table></figure>

<p>client-&gt;server</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、client-server 请求</span><br><span class="line">2、server 把server----&gt; client </span><br><span class="line">3、client 判断【是|否】是----&gt;使用server公钥加密（机器无法判断，只会提示，手动判断） 把登陆的密码----&gt;server</span><br><span class="line">	此时：当提示过server公钥内容且选择了yes的时候，会将server公钥加到known_hosts中，下次登陆时不会提示</span><br><span class="line">4、server 私钥-&gt;解密加密后的密码</span><br><span class="line">5、如果密码正确 login 不正确 拒绝</span><br><span class="line">防火墙 区域 网络接口 默认放行ssh服务的</span><br></pre></td></tr></table></figure>

<p><strong>第三放伪造 公钥 “中间人攻击”:</strong></p>
<ul>
<li><p>a a<del>公</del>—&gt;b</p>
</li>
<li><p>c截获a<del>公</del>，c<del>公</del>—&gt;b</p>
</li>
<li><p>b无法判断是否为a<del>公</del>，确定登录,c<del>公</del>加密—&gt; 登录密码（误以为是a<del>公</del>）</p>
</li>
<li><p>c截获c<del>公</del>加密的密码，c<del>私</del>解密密码，a<del>公</del>加密密码—&gt;a。</p>
</li>
<li><p>a a<del>私</del>解密密码，发现可以解密，并与密码一致，允许登录</p>
</li>
</ul>
<p><code>所以第一次登录时需要判断，判断确认是否是b的公钥</code>，但是在不知道b的公钥的情况下无法验证，说明密码登录安全性很低。但是登陆过后的server公钥会放到client端的known_hosts下，不会再判断</p>
<ul>
<li>于是便有了密钥登录</li>
</ul>
<h3 id="免密登陆原理"><a href="#免密登陆原理" class="headerlink" title="免密登陆原理"></a>免密登陆原理</h3><p>client-&gt;server</p>
<p>1、client  密钥对 公钥 放到server（ssh-copy-id）</p>
<p>2、client发出请求 把自己的公钥—-&gt;server 对比公钥（对比之前已经）</p>
<p>3、server 用client公钥加密一串字符串-&gt;client</p>
<p>4、client 私钥解密字符串 -&gt;server（server对比）</p>
<p>5、server 验证成功 不需要密码</p>
<h3 id="免密登陆"><a href="#免密登陆" class="headerlink" title="免密登陆"></a>免密登陆</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 ssh-keygen</span><br><span class="line">2 ssh-copy-id user@remote（如果之前的所有操作都是默认执行并且没有修改过配置文件，则此时已经可以实现免密登录）</span><br></pre></td></tr></table></figure>

<p>存放别人公钥的位置：</p>
<p>client端：known_hosts（登录别人时，存放登录目标公钥的位置）</p>
<p>server端：authorized_keys（被别人登录时，存放被登录目标公钥的位置）（这一步可做可不做，主要是为了收拾东西）</p>
<h2 id="修改ssh配置文件"><a href="#修改ssh配置文件" class="headerlink" title="修改ssh配置文件"></a>修改ssh配置文件</h2><p><code>修改的是server端的/etc/ssh/sshd_config</code></p>
<ul>
<li><p>root密码禁用只能使用密钥登录without-password</p>
</li>
<li><p>禁用root登录 </p>
</li>
<li><p>禁用密码登录</p>
</li>
</ul>
<p>用rpm工具查看openssh-server服务提供的配置文件所在位置和服务所在位置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@servera ~]<span class="comment"># yum search ssh</span></span><br><span class="line">[root@servera ~]<span class="comment"># rpm -qc openssh-server</span></span><br><span class="line">/etc/pam.d/sshd</span><br><span class="line">/etc/ssh/sshd_config</span><br><span class="line">/etc/sysconfig/sshd</span><br><span class="line">[root@servera ~]<span class="comment"># vim /etc/ssh/sshd_config </span></span><br><span class="line">46 PermitRootLogin no</span><br><span class="line">/Root	w	dw a no ZZ</span><br><span class="line">[root@servera ~]<span class="comment"># rpm -ql openssh-server | grep service</span></span><br><span class="line">/usr/lib/systemd/system/sshd-keygen@.service</span><br><span class="line">/usr/lib/systemd/system/sshd.service</span><br><span class="line">/usr/lib/systemd/system/sshd@.service</span><br><span class="line">[root@servera ~]<span class="comment"># systemctl restart sshd</span></span><br></pre></td></tr></table></figure>

<h3 id="端口实验"><a href="#端口实验" class="headerlink" title="端口实验"></a>端口实验</h3><p>更改端口后重新连接，需要关闭selinux和防火墙</p>
<p>或者重新配置防火墙放行端口和seLinux</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=222/tcp #防火墙放行222端口</span><br><span class="line"></span><br><span class="line">firewall-cmd reload #重载防火墙</span><br><span class="line"></span><br><span class="line">semanage prot -a -t ssh_port_t tcp 222		#给222端口添加标签</span><br><span class="line"></span><br><span class="line">getenforce查seLinux状态 #即时生效</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">更改了连接的端口后：</span><br><span class="line">对于已经连接的终端，一切正常，但是如果尝试退出登录会卡死，并且无法结束任务；</span><br><span class="line">对于未连接的终端，无法通过原有端口连接</span><br></pre></td></tr></table></figure>



<h1 id="第三天补充小节"><a href="#第三天补充小节" class="headerlink" title="第三天补充小节"></a>第三天补充小节</h1><h2 id="xshell使用方式"><a href="#xshell使用方式" class="headerlink" title="xshell使用方式"></a>xshell使用方式</h2><ul>
<li><p>新建一个连接，此时需要输入主机地址</p>
<p>主机地址的获取方式：在被连接端：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[kiosk@foundation0 ~]$ ifconfig |grep 192</span><br><span class="line">        inet 192.168.123.1  netmask 255.255.255.0  broadcast 192.168.123.255</span><br><span class="line">        inet 192.168.232.130  netmask 255.255.255.0  broadcast 192.168.232.255</span><br><span class="line">        inet 192.168.232.131  netmask 255.255.255.0  broadcast 192.168.232.255</span><br><span class="line">ens192: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.122.1  netmask 255.255.255.0  broadcast 192.168.122.255</span><br><span class="line">[kiosk@foundation0 ~]$ </span><br></pre></td></tr></table></figure>
</li>
<li><p>除去广播地址(.255)和网关地址（.1），选择192.168.232.131为主机地址，填入</p>
</li>
<li><p>发现可以连通，此时使用正常的用户名密码登录即可</p>
</li>
</ul>
<h2 id="xshell免密登陆F0"><a href="#xshell免密登陆F0" class="headerlink" title="xshell免密登陆F0"></a>xshell免密登陆F0</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xshell---&gt;工具---&gt;新建用户密钥生成向导---&gt;密钥类型RSA|无所谓---&gt;公钥格式---&gt;保存为文件---&gt;.pub文件上传到要登录用户的~/.ssh/---&gt;cat id_rsa_1024.pub &gt; authorized_keys---&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="lrzsz命令实现文件传输"><a href="#lrzsz命令实现文件传输" class="headerlink" title="lrzsz命令实现文件传输"></a>lrzsz命令实现文件传输</h2><p>专门用来给Windows和Linux之间传输文件的工具，不是默认安装的包</p>
<p>Xshell环境下进行^（经过测试，不在xshell环境直接去虚拟机上rz直接卡死，都不能结束进程）^</p>
<ul>
<li><code>yum install -y lrzsz</code>安装上传下载包</li>
<li>上传：<code>rz</code>，弹出物理机上的文件，选择后上传到虚拟机的当前目录下</li>
<li><input disabled="" type="checkbox"> 下载：<code>sz 文件</code>（据说是这样的，但是目前没搞清楚，不知道下载到哪里了）</li>
</ul>
<h2 id="xftp工具实现文件传输"><a href="#xftp工具实现文件传输" class="headerlink" title="xftp工具实现文件传输"></a>xftp工具实现文件传输</h2><p>可以使用Xshell中设置好的密钥登录，结果为可以直接拖动文件，实现文件传输可视化</p>
<ul>
<li>传输协议使用sftp，其他配置与平常一样</li>
</ul>
<p><img src="C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210721222201698.png" alt="image-20210721222201698"></p>
<ul>
<li><p><input checked="" disabled="" type="checkbox"> 
<code>就在配置好这个的时候，电脑出现了问题，微信可以使用但是浏览器无法访问，windows资源诊断显示：win10远程计算机或设备将不受连接。通过配置代理解决了该问题，但是无法验证该问题出现的原因是否与似乎用了xftp工具有关</code></p>
<p>老师说没关系，未验证</p>
</li>
</ul>
<h2 id="特殊权限的矛盾之处"><a href="#特殊权限的矛盾之处" class="headerlink" title="特殊权限的矛盾之处"></a>特殊权限的矛盾之处</h2><ol>
<li><strong>修改bash命令文件的other权限没有执行，则在root下无法使用 su -</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation tmp]# chmod 754 /usr/bin/bash</span><br><span class="line">[root@workstation tmp]# su - aa</span><br><span class="line">Last login: 三 7月 21 15:51:04 GMT 2021 on pts/1</span><br><span class="line">su: failed to execute /bin/bash: Permission denied</span><br></pre></td></tr></table></figure>

<blockquote>
<p>已解决，因为su的命令的本质是切换用户并打开一个shell，此处普通用户没有bash的执行权限，因此无法打开新的bash，执行失败</p>
<blockquote>
<ul>
<li><input checked="" disabled="" type="checkbox"> 于是测试了后台执行，依旧是失败</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation ~]# su - student &amp;</span><br><span class="line">[1] 4264</span><br><span class="line">[root@workstation ~]# Last login: Thu Jul 22 10:53:20 GMT 2021 on pts/0</span><br><span class="line">su: failed to execute /bin/bash: Permission denied</span><br><span class="line">jobs</span><br><span class="line">[1]+  Exit 126                su - student</span><br></pre></td></tr></table></figure>

<p>推测是，是否为上述用词不够精准，是<strong>分配</strong>一个新的shell，而不是<strong>视觉上的打开</strong></p>
</blockquote>
</blockquote>
<blockquote>
<p>已解决,只要执行ssh,su之类登录的操作,都会使用到bash,不管是前台还是后台.可以通过 echo $$查询当前bash</p>
</blockquote>
<ol start="2">
<li><p>对<code>cat /etc/shadow</code>在加特殊权限之前看不了的探究</p>
<p><code>ll /etc/shadow</code>发现该文件权限为000，此时普通用户有cat的执行权限，没有&#x2F;etc&#x2F;shadow的任何权限</p>
<p>经过实验：</p>
<ul>
<li><p>给&#x2F;etc&#x2F;shadow的other读权限，即004，即可使用cat查看该文件；</p>
</li>
<li><p>给cat命令u+s，还原&#x2F;etc&#x2F;shadow文件的权限为000，经过实验，也可以cat查看该文件，说明<code>u+s确实可以使普通用户借权执行命令，相当于在root用户下cat一个文件，root是蛮横且不讲道理的</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation ~]# chmod u+s /usr/bin/cat</span><br><span class="line">[root@workstation ~]# ll /usr/bin/cat</span><br><span class="line">-rwsr-xr-x. 1 root root 87496 2月   3 2020 /usr/bin/cat</span><br><span class="line">[root@workstation ~]# chmod 000 /etc/shadow</span><br></pre></td></tr></table></figure></li>
</ul>
<p>同理，以<code>bash file</code>命令作为测试用例再次尝试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation tmp]<span class="comment"># ll</span></span><br><span class="line">----------. 1 student wheel   351 7月  21 16:08 file</span><br><span class="line">[root@workstation tmp]<span class="comment"># echo &quot;echo echo&quot; &gt; file</span></span><br><span class="line">[root@workstation tmp]<span class="comment"># bash file</span></span><br><span class="line"><span class="built_in">echo</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>更改bash的权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation tmp]<span class="comment"># bash file</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line">[root@workstation tmp]<span class="comment"># ll /usr/bin/bash</span></span><br><span class="line">-rwxr-xr-x. 1 root root 1596592 8月  30 2019 /usr/bin/bash</span><br><span class="line">[root@workstation tmp]<span class="comment"># chmod u+s /usr/bin/bash</span></span><br><span class="line">[root@workstation tmp]<span class="comment"># ll /usr/bin/bash</span></span><br><span class="line">-rwsr-xr-x. 1 root root 1596592 8月  30 2019 /usr/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用其他用户执行，与预计结果不符</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[aa@workstation tmp]$ bash file</span><br><span class="line">bash: file: Permission denied</span><br></pre></td></tr></table></figure>

<ul>
<li><p>更改file权限为444（可读），可执行<code>bash file</code>，说明即使bash借权，也需要读权限执行命令</p>
<p>与预估情况不符，与cat的情况结果不同，<strong>打破了之前建立的逻辑</strong></p>
<p><strong>待解决问题：</strong>在下述情况下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation tmp]# ll /usr/bin/bash</span><br><span class="line">-rwsr-xr-x. 1 root root 1596592 8月  30 2019 /usr/bin/bash</span><br><span class="line">[root@workstation tmp]# ll file </span><br><span class="line">----------. 1 root wheel 10 7月  21 16:09 file</span><br></pre></td></tr></table></figure>

<ul>
<li><p><input disabled="" type="checkbox"> 
为什么root用户可以执行，普通用户不可以执行</p>
</li>
<li><p><input disabled="" type="checkbox"> 
u+s借权，借来的权到底是只有这个文件可以用，还是整行命令都可以用（其中sudo是可以在没有任何权限的身份下）</p>
</li>
<li><p><input disabled="" type="checkbox"> 
这个矛盾的造成结果是因为权限没有搞清楚的问题，还是bash比较特殊？</p>
</li>
<li><p><input disabled="" type="checkbox"> 
推翻之前全部推测的一个问题，是否每个存在&#x2F;user&#x2F;bin或者sbin中的可执行文件，都已经规定了谁可以以什么权限使用，是个无法通过简单的借权就能有额外权限的特殊个体。</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code>同样的操作用chmod实验，发现普通用户借权使用chmod同样可以更改不是自己文件的权限</code></p>
</li>
<li><p><strong>对命令拥有组身份执行的验证</strong>（未实验完成）</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 基于昨天的研究，依旧使用自主可控的bash命令作为验证方法</span><br><span class="line">2. 首先给一个file文件权限为444（都可读但都不可执行），设置属主为student</span><br><span class="line">3. 登录student账户，./file发现无法执行，bash file也无法执行，为正常情况</span><br></pre></td></tr></table></figure>

<h1 id="第十一章-日志分析及存储"><a href="#第十一章-日志分析及存储" class="headerlink" title="第十一章 日志分析及存储"></a>第十一章 日志分析及存储</h1><table>
<thead>
<tr>
<th align="center"><code>systemd-journald</code></th>
<th align="center">从内核收集消息(包括启动进程、标准输出及错误、进程运行启动等记录)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">配置文件</td>
<td align="center">&#x2F;run&#x2F;log&#x2F;journal&#x2F;(重启系统清空)</td>
</tr>
<tr>
<td align="center">存放目录</td>
<td align="center">&#x2F;var&#x2F;log&#x2F;journal（这个目录是为了实现持久化存储时用户自己配置的，本来不存在）</td>
</tr>
<tr>
<td align="center">工具</td>
<td align="center">journalctl</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center"><code>rsyslog</code></th>
<th align="center"><strong>对所有日志文件进行类型和级别进行分类</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">配置文件</td>
<td align="center">&#x2F;etc&#x2F;rsyslog.conf</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">&#x2F;var&#x2F;log&#x2F;rsyslog</td>
</tr>
</tbody></table>
<h2 id="日志文件类型（rsyslog-conf）"><a href="#日志文件类型（rsyslog-conf）" class="headerlink" title="日志文件类型（rsyslog.conf）"></a>日志文件类型（rsyslog.conf）</h2><table>
<thead>
<tr>
<th>日志文件</th>
<th>存储的消息类型</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;var&#x2F;log&#x2F;messages</td>
<td>大多数系统日志消息处存放处，除去mail,authpriv,cron</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;secure</td>
<td>与安全性和身份验证时间相关的syslog消息。</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;maillog</td>
<td>与邮件服务器相关的syslog消息。</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;cron</td>
<td>与计划任务执行相关的syslog消息</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;boot.log</td>
<td>与系统启动相关的消息。</td>
</tr>
<tr>
<td>&#x2F;var&#x2F;log&#x2F;lastlog</td>
<td>与最近登录的用户信息相关的二进制文件，不能直接查，需要通过<code>last</code>命令查看</td>
</tr>
</tbody></table>
<p><code>last</code> 查看系统中最近登录的用户信息</p>
<h2 id="设备类别"><a href="#设备类别" class="headerlink" title="设备类别"></a>设备类别</h2><table>
<thead>
<tr>
<th>类别(facility)</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Kern</td>
<td>内核</td>
</tr>
<tr>
<td>authpriv</td>
<td>授权和安全</td>
</tr>
<tr>
<td>cron</td>
<td>计划任务</td>
</tr>
<tr>
<td>mail</td>
<td>邮件</td>
</tr>
<tr>
<td>daemon</td>
<td>系统守护进程</td>
</tr>
<tr>
<td>syslog</td>
<td>由rsyslog生成的信息，服务内部的信息，时间标识</td>
</tr>
<tr>
<td>local0~local7</td>
<td>自定义本地策略</td>
</tr>
<tr>
<td>lpr</td>
<td>打印</td>
</tr>
<tr>
<td>news</td>
<td>新闻组</td>
</tr>
<tr>
<td>user</td>
<td>用户程序产生相关信息</td>
</tr>
<tr>
<td>uucp</td>
<td>unix to unix copy</td>
</tr>
</tbody></table>
<h2 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h2><p>数字越大，级别越低，内容越多，紧急性越低，低级别会包含高于等于自己级别的所有日志。</p>
<p>数字越小越危险，出现频率也越低。</p>
<table>
<thead>
<tr>
<th>编号</th>
<th>级别</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>EMERG（紧急）</td>
<td>会导致主机系统不可用的情况</td>
</tr>
<tr>
<td>1</td>
<td>ALERT（警告）</td>
<td>必须马上采取措施解决的问题</td>
</tr>
<tr>
<td>2</td>
<td>CRIT（严重）</td>
<td>比较严重的情况</td>
</tr>
<tr>
<td>3</td>
<td>ERR（错误）</td>
<td>运行出现错误</td>
</tr>
<tr>
<td>4</td>
<td>WARNING（提醒）</td>
<td>可能会影响系统功能的事件</td>
</tr>
<tr>
<td>5</td>
<td>NOTICE（注意）</td>
<td>不会影响系统但值得注意</td>
</tr>
<tr>
<td>6</td>
<td>INFO（信息）</td>
<td>一般信息</td>
</tr>
<tr>
<td>7</td>
<td>DEBUG（调试）</td>
<td>程序或系统调试信息等</td>
</tr>
</tbody></table>
<h2 id="rsyslog日志格式"><a href="#rsyslog日志格式" class="headerlink" title="rsyslog日志格式"></a>rsyslog日志格式</h2><p>时间戳，主机名，程序或进程，内容</p>
<h2 id="手动发送日志"><a href="#手动发送日志" class="headerlink" title="手动发送日志"></a>手动发送日志</h2><p><code>logger</code>默认写到message</p>
<p>通过man手册查询<code>logger</code>，&#x2F;EXAMPLE 查看示例，&#x2F;FACILITIES AND LEVELS查看编辑类别和级别的选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改配置文件/var/log/debuguser.debug的日志保存到/var/log/debug中</span></span><br><span class="line"><span class="comment"># vim /etc/rsyslog.conf </span></span><br><span class="line">  user.debug                                              /var/log/debug</span><br><span class="line">systemctl restart rsyslog.service </span><br><span class="line">su -</span><br><span class="line"><span class="comment">#向user类型的debug级别的日志</span></span><br><span class="line">logger -p user.debug Hi easthome </span><br></pre></td></tr></table></figure>

<p><code>另外发现：logger可以实现补全类型和级别</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation ~]# logger -p </span><br><span class="line">auth.alert      authpriv.emerg  daemon.alert    ftp.emerg       mail.alert      news.emerg</span><br><span class="line">auth.crit       authpriv.err    daemon.crit     ftp.err         mail.crit       news.err</span><br><span class="line">auth.debug      authpriv.error  daemon.debug    ftp.error       mail.debug      news.error</span><br><span class="line">auth.emerg      cron.alert      daemon.emerg    lpr.alert       mail.emerg      security.alert</span><br><span class="line">auth.err        cron.crit       daemon.err      lpr.crit        mail.err        security.crit</span><br><span class="line">auth.error      cron.debug      daemon.error    lpr.debug       mail.error      security.debug</span><br><span class="line">authpriv.alert  cron.emerg      ftp.alert       lpr.emerg       news.alert      security.emerg</span><br><span class="line">authpriv.crit   cron.err        ftp.crit        lpr.err         news.crit       security.err</span><br><span class="line">authpriv.debug  cron.error      ftp.debug       lpr.error       news.debug      security.error</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@workstation ~]<span class="comment"># vim /etc/rsyslog.conf </span></span><br><span class="line"><span class="comment">#zidingyi</span></span><br><span class="line">user.debug                                              /var/log/debug</span><br><span class="line">[root@workstation ~]<span class="comment"># systemctl restart rsyslog.service </span></span><br><span class="line">[root@workstation ~]<span class="comment"># logger -p user.debug Hi easthome</span></span><br><span class="line">[root@workstation ~]<span class="comment"># tail /var/log/debug </span></span><br><span class="line">Jul 22 11:23:23 workstation root[4870]: Hi easthome</span><br><span class="line">[root@workstation ~]<span class="comment"># tail /var/log/messages | grep &quot;Hi easthome&quot;</span></span><br><span class="line">[root@workstation ~]<span class="comment"># </span></span><br><span class="line"><span class="comment">#说明user类型的error命令不会记录到message中，符合message的设定：</span></span><br><span class="line"><span class="comment"># Log anything (except mail) of level info or higher.</span></span><br><span class="line"><span class="comment"># Don&#x27;t log private authentication messages!</span></span><br><span class="line">*.info;mail.none;authpriv.none;cron.none                /var/log/messages</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">尝试写一个user类型的error日志(同时实验err和error的区别)</span><br><span class="line">[root@workstation ~]<span class="comment"># logger -p user.err i am an err.</span></span><br><span class="line">[root@workstation ~]<span class="comment"># logger -p user.error i am an error.</span></span><br><span class="line"><span class="comment">#/var/log/messages无误</span></span><br><span class="line">[root@workstation ~]<span class="comment"># tail /var/log/messages | grep &quot;i am an&quot;</span></span><br><span class="line">Jul 22 11:39:49 workstation root[5033]: i am an err.</span><br><span class="line">Jul 22 11:39:56 workstation root[5034]: i am an error.</span><br><span class="line"><span class="comment">#/var/log/debug无误，debug作为最低级别可以看到所有日志</span></span><br><span class="line">[root@workstation ~]<span class="comment"># tail /var/log/debug | grep &quot;i am an&quot;</span></span><br><span class="line">Jul 22 11:39:49 workstation root[5033]: i am an err.</span><br><span class="line">Jul 22 11:39:56 workstation root[5034]: i am an error.</span><br></pre></td></tr></table></figure>

<ul>
<li><input checked="" disabled="" type="checkbox"> 与设想不符，设想应该不会出现在&#x2F;var&#x2F;log&#x2F;debug中</li>
</ul>
<blockquote>
<p>已解决，实验成功</p>
</blockquote>
<h2 id="systemd日志"><a href="#systemd日志" class="headerlink" title="systemd日志"></a>systemd日志</h2><p>可以通过man手册查询journalctl工具可以加哪些参数来详细查询</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">36  journalctl </span><br><span class="line"> <span class="comment">#  默认查看最后十行</span></span><br><span class="line"> 37  journalctl -n </span><br><span class="line"> <span class="comment">#  指定查看20行</span></span><br><span class="line"> 38  journalctl -n 20</span><br><span class="line"> <span class="comment">#  实时显示尾10行</span></span><br><span class="line"> 39  journalctl -f</span><br><span class="line"> <span class="comment"># 按级别查</span></span><br><span class="line"> 40  journalctl -p debug</span><br><span class="line"> 41  journalctl -p info</span><br><span class="line"> 42  journalctl -p notice</span><br><span class="line"> 43  journalctl -p warninf</span><br><span class="line"> 44  journalctl -p warning</span><br><span class="line"> 45  journalctl -p crit</span><br><span class="line"> 46  journalctl -p alert</span><br><span class="line"> 47  journalctl -p emerg</span><br><span class="line"> 48  journalctl --since today</span><br><span class="line"> 49  journalctl </span><br><span class="line"> <span class="comment"># 按时间段查</span></span><br><span class="line"> 50  journalctl --since <span class="string">&quot;2021-05-22 16:43:10&quot;</span> --until <span class="string">&quot;2021-05-22 17:43:10&quot;</span></span><br><span class="line"> 51  journalctl --since <span class="string">&quot;-1 hour&quot;</span></span><br><span class="line"> 52  <span class="built_in">date</span> </span><br><span class="line"> 53  journalctl _PID=1</span><br><span class="line"> 54  journalctl -b -1   记录更多次的启动日志记录-&gt;日志的持久存储？</span><br><span class="line"> 55  reboot </span><br></pre></td></tr></table></figure>



<h2 id="日志切割-（比如自定义实现nginx的日志切割）"><a href="#日志切割-（比如自定义实现nginx的日志切割）" class="headerlink" title="日志切割^（比如自定义实现nginx的日志切割）^"></a>日志切割^（比如自定义实现nginx的日志切割）^</h2><p>why？</p>
<p>删除旧 创建新 节省磁盘空间</p>
<p>常用工具</p>
<p>logrotate -&gt; 配置文件 (日志文件 那些格式 大小 副本 周期 权限……) –&gt; 计划任务 cron</p>
<p>周期性 切割指定文件 轮转 切割 手动</p>
<p>&#x2F;etc&#x2F;logrotate.d下放置着各种类型的配置文件，按照配置文件切割指定的日志文件</p>
<h2 id="持久化存储systemd日志-转储-考点-一定要结合容器做"><a href="#持久化存储systemd日志-转储-考点-一定要结合容器做" class="headerlink" title="持久化存储systemd日志(转储)^考点,一定要结合容器做^"></a>持久化存储systemd日志(转储)^考点,一定要结合容器做^</h2><p>提供systemd-journald日志的服务为systemd-journald</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">systemctl status systemd-journald <span class="comment">#确保服务状态</span></span><br><span class="line">vim /etc/systemd/journald.conf </span><br><span class="line"><span class="comment">#Storage=auto 默认是自动</span></span><br><span class="line">1. Storage=persisten <span class="comment">#改成持久化</span></span><br><span class="line">2. <span class="built_in">mkdir</span> /var/log/journal	<span class="comment">#创建一个保存的位置</span></span><br><span class="line">ll -d /run/log/journal/</span><br><span class="line">3. <span class="built_in">chown</span> root:systemd-journal /var/log/journal/</span><br><span class="line"><span class="comment">#chgrp systemd-journal /var/log/journal</span></span><br><span class="line">4. <span class="built_in">chmod</span> 2755 /var/log/journal/</span><br><span class="line"><span class="comment">#chmod g+s /var/log/journal/ 赋予用户组s权限，以后产生的所有日志文件都属于该组</span></span><br><span class="line">5. systemctl restart systemd-journald</span><br><span class="line"></span><br><span class="line">验证：</span><br><span class="line">reboot</span><br><span class="line"><span class="comment">#journal -b 加 数字（小于0） ，作用是查看前n次登录时d</span></span><br><span class="line">journal -b -1 ，-2</span><br></pre></td></tr></table></figure>

<p>思考题：对于systemd日志能不能切割？</p>
<h2 id="集中收集日志-（一收多，同时管理）"><a href="#集中收集日志-（一收多，同时管理）" class="headerlink" title="集中收集日志^（一收多，同时管理）^"></a>集中收集日志^（一收多，同时管理）^</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ELK日志系统</span><br><span class="line">多台机器日志集中-&gt;一台机器 日志服务器 </span><br></pre></td></tr></table></figure>

<p><code>vim /etc/rsyslog.conf</code>修改发送端与接收端的配置文件</p>
<p>默认配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Provides UDP syslog reception</span></span><br><span class="line"><span class="comment"># for parameters see http://www.rsyslog.com/doc/imudp.html</span></span><br><span class="line"><span class="comment">#module(load=&quot;imudp&quot;) # needs to be done just once</span></span><br><span class="line"><span class="comment">#input(type=&quot;imudp&quot; port=&quot;514&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Provides TCP syslog reception</span></span><br><span class="line"><span class="comment"># for parameters see http://www.rsyslog.com/doc/imtcp.html</span></span><br><span class="line"><span class="comment">#module(load=&quot;imtcp&quot;) # needs to be done just once</span></span><br><span class="line"><span class="comment">#input(type=&quot;imtcp&quot; port=&quot;514&quot;)</span></span><br></pre></td></tr></table></figure>

<p>UDP（发出去就不管了，效率高但是可能丢失数据）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">`接收端</span><br><span class="line"><span class="comment"># vim /etc/rsyslog.conf</span></span><br><span class="line"><span class="comment"># Provides UDP syslog reception</span></span><br><span class="line"><span class="comment">#注意下面两行注释都要取消，打开一个失败。</span></span><br><span class="line">module(load=<span class="string">&quot;imudp&quot;</span>) <span class="comment"># needs to be done just once</span></span><br><span class="line">input(<span class="built_in">type</span>=<span class="string">&quot;imudp&quot;</span> port=<span class="string">&quot;514&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># systemctl restart rsyslog.service </span></span><br><span class="line"><span class="comment"># firewall-cmd --permanent --add-port=514/udp</span></span><br><span class="line"><span class="comment"># firewall-cmd --reload </span></span><br><span class="line"></span><br><span class="line">ss -antup|grep 514 查看监听端口</span><br><span class="line"><span class="built_in">tail</span> -f /var/log/messages</span><br><span class="line">`发送端</span><br><span class="line"><span class="comment"># vim /etc/rsyslog.conf</span></span><br><span class="line">*.*                                                     @172.25.250.10</span><br><span class="line"><span class="comment">#配置本地</span></span><br><span class="line">重启服务 去接收端验证</span><br></pre></td></tr></table></figure>

<p>TCP（三次握手保证完整，效率低，但可靠）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">` 接收端</span><br><span class="line"><span class="comment"># vim /etc/rsyslog.conf</span></span><br><span class="line"><span class="comment"># Provides UDP syslog reception</span></span><br><span class="line"><span class="comment">#注意下面两行注释都要取消，打开一个失败。</span></span><br><span class="line">module(load=<span class="string">&quot;imtcp&quot;</span>) <span class="comment"># needs to be done just once</span></span><br><span class="line">input(<span class="built_in">type</span>=<span class="string">&quot;imtcp&quot;</span> port=<span class="string">&quot;514&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># systemctl restart rsyslog.service </span></span><br><span class="line"><span class="comment"># firewall-cmd --permanent --add-port=514/tcp</span></span><br><span class="line"><span class="comment"># firewall-cmd --reload </span></span><br><span class="line"></span><br><span class="line">ss -antup|grep 514 查看监听端口</span><br><span class="line"><span class="built_in">tail</span> -f /var/log/messages</span><br><span class="line"></span><br><span class="line">`发送端</span><br><span class="line"><span class="comment"># vim /etc/rsyslog.conf</span></span><br><span class="line">*.*                                                     @@172.25.250.10</span><br><span class="line"></span><br><span class="line">重启服务 去接收端验证</span><br></pre></td></tr></table></figure>

<p><code>TCP和UDP发送端配置文件不同之处，@和@@＋主机.端口</code></p>
<p><code>客户端不会受到防火墙和seLinux的影响</code></p>
<p><code>firewall-cmd --permanent --add-port=514/tcp或udp（看需求）</code></p>
<h2 id="系统时间管理"><a href="#系统时间管理" class="headerlink" title="系统时间管理"></a>系统时间管理</h2><p>local time 操作系统时间</p>
<p>RTC time	硬件时间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">date</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看时间</span></span><br><span class="line">[student@servera ~]$ timedatectl </span><br><span class="line">               Local time: 四 2021-07-22 04:25:14 GMT</span><br><span class="line">           Universal time: 四 2021-07-22 04:25:14 UTC</span><br><span class="line">                 RTC time: 四 2021-07-22 05:54:50</span><br><span class="line">                Time zone: Atlantic/Reykjavik (GMT, +0000)</span><br><span class="line">System clock synchronized: yes</span><br><span class="line">              NTP service: active</span><br><span class="line">          RTC in local TZ: no</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置时区</span></span><br><span class="line">timedatectl set-timezone Asia/Shanghai</span><br><span class="line"></span><br><span class="line">  122  timedatectl set-time 10:10:10</span><br><span class="line">  123  timedatectl set-time false</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">是否使用时间服务器</span>  </span><br><span class="line">timedatectl set-ntp false</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看当前使用的时间服务器</span></span><br><span class="line">[student@servera ~]$ chronyc sources -v</span><br><span class="line">210 Number of sources = 1</span><br><span class="line"></span><br><span class="line">  .-- Source mode  &#x27;^&#x27; = server, &#x27;=&#x27; = peer, &#x27;#&#x27; = local clock.</span><br><span class="line"> / .- Source state &#x27;*&#x27; = current synced, &#x27;+&#x27; = combined , &#x27;-&#x27; = not combined,</span><br><span class="line">| /   &#x27;?&#x27; = unreachable, &#x27;x&#x27; = time may be in error, &#x27;~&#x27; = time too variable.</span><br><span class="line">||                                                 .- xxxx [ yyyy ] +/- zzzz</span><br><span class="line">||      Reachability register (octal) -.           |  xxxx = adjusted offset,</span><br><span class="line">||      Log2(Polling interval) --.      |          |  yyyy = measured offset,</span><br><span class="line">||                                \     |          |  zzzz = estimated error.</span><br><span class="line">||                                 |    |           \</span><br><span class="line">MS Name/IP address         Stratum Poll Reach LastRx Last sample               </span><br><span class="line">===============================================================================</span><br><span class="line">^* classroom.example.com         8  10   377   638    +29us[  +29us] +/- 1977us</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改网络时间服务器</span></span><br><span class="line">vim /etc/chrony.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Please consider joining the pool (http://www.pool.ntp.org/join.html).</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">server 0.rhel.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">server 1.rhel.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">server 2.rhel.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">server 3.rhel.pool.ntp.org iburst</span></span><br><span class="line">server 172.25.254.254 iburst</span><br><span class="line">修改上面的ip为</span><br><span class="line"></span><br><span class="line">  125  timedatectl set-time 10:10:10</span><br><span class="line">  126  timedatectl </span><br><span class="line">  127  timedatectl list-timezones </span><br></pre></td></tr></table></figure>

<h3 id="设置时钟服务器-配置NTP客户端）-考"><a href="#设置时钟服务器-配置NTP客户端）-考" class="headerlink" title="设置时钟服务器(配置NTP客户端）^考^"></a>设置时钟服务器(配置NTP客户端）^考^</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">自己加网卡之后，域名不能解析问题。</span><br><span class="line">17  route -n</span><br><span class="line">18  route add default gw 172.25.254.254</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">129  timedatectl </span><br><span class="line">130  timedatectl set-ntp true</span><br><span class="line">131  vim /etc/chrony.conf</span><br><span class="line"></span><br><span class="line">#server 0.rhel.pool.ntp.org iburst</span><br><span class="line">#server 1.rhel.pool.ntp.org iburst</span><br><span class="line">#server 2.rhel.pool.ntp.org iburst</span><br><span class="line">server classroom.example.com iburst</span><br><span class="line"></span><br><span class="line">132  systemctl restart chronyd.service </span><br><span class="line">133  date</span><br><span class="line">134  timedatectl </span><br><span class="line">135  chronyc sources -v</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="第十二章-网络管理"><a href="#第十二章-网络管理" class="headerlink" title="第十二章 网络管理"></a>第十二章 网络管理</h1><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000020031911">ip跟主机，网卡的关系</a></p>
<p>本章需要了解的内容：</p>
<ul>
<li>网卡的命名规则（从名字上获取网卡信息）</li>
<li>查看网卡的配置</li>
<li>服务对应的标准端口<code>vim /etc/services</code></li>
</ul>
<p>什么是网络?</p>
<p><code>ip addr show</code> </p>
<p><code>ifconfig</code></p>
<p><code>ss -antup</code></p>
<h2 id="网络接口名称规范-网卡"><a href="#网络接口名称规范-网卡" class="headerlink" title="网络接口名称规范(网卡)"></a>网络接口名称规范(网卡)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">传统上，Linux的网络接口列举为 eth0、eth1、eth2 …</span><br><span class="line">RHEL8的默认命名是基于固件基础上分配的固定名称，如ens33</span><br><span class="line">接口类型</span><br><span class="line">以太网有线接口为 en</span><br><span class="line">无线局域网接口为 wl</span><br><span class="line">无线广域网接口为 ww</span><br><span class="line">适配器类型</span><br><span class="line">s为热插拔插槽</span><br><span class="line">o为板载</span><br><span class="line">p代表对 PCI 类型的支持</span><br><span class="line">数字N代表索引、ID或端口</span><br><span class="line">如果固定名称不能确定，传统的名称如 ethN 将被使用</span><br></pre></td></tr></table></figure>

<h2 id="验证网络配置"><a href="#验证网络配置" class="headerlink" title="验证网络配置"></a>验证网络配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">138  ifconfig </span><br><span class="line">139  ifconfig enp1s0</span><br><span class="line">140  ip addr show </span><br><span class="line">141  ip addr show </span><br><span class="line">144  ip addr show enp1s0</span><br><span class="line">145  ip a s</span><br><span class="line">146  ping serverb</span><br><span class="line">147  netstat -antup</span><br><span class="line">148  route -n</span><br><span class="line">149  ethtool </span><br><span class="line">150  ethtool enp1s0</span><br><span class="line">151  history </span><br><span class="line">152  nmcli connection show</span><br><span class="line">ss -antup</span><br></pre></td></tr></table></figure>

<h2 id="标准服务端口"><a href="#标准服务端口" class="headerlink" title="标准服务端口"></a>标准服务端口</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># vim /etc/services</span><br><span class="line">/22 n n</span><br><span class="line">/443</span><br><span class="line">/80 n n</span><br></pre></td></tr></table></figure>

<h2 id="nmcli-重点（服务是Network-manager）"><a href="#nmcli-重点（服务是Network-manager）" class="headerlink" title="nmcli^重点（服务是Network^ ^manager）^"></a>nmcli^重点（服务是Network^ ^manager）^</h2><p>一个设备可以有多个配置文件，但是同一时间 只能一个生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">[root@serverb network-scripts]<span class="comment"># nmcli connection add ifname enp1s0 type ethernet connection.id zidingyi_enp1s0 ipv4.method </span></span><br><span class="line">添加一个连接 </span><br><span class="line">[root@serverb network-scripts]<span class="comment"># nmcli connection add ifname enp1s0 type ethernet connection.id zidingyi_enp1s0 ipv4.method manual ipv4.addresses 172.25.250.51/24 ipv4.gateway 172.25.250.254 ipv4.dns 8.8.8.8 connection.autoconnect yes</span></span><br><span class="line">Connection <span class="string">&#x27;zidingyi_enp1s0&#x27;</span> (70ee5ed6-6e14-4e84-93bc-639d34acce7f) successfully added.</span><br><span class="line">[root@serverb network-scripts]<span class="comment"># IPADDR NETMASK|PREFIX DNS1 DNS2 GATEWAY ONBOOT=yes</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># nmcli dev status </span></span><br><span class="line"><span class="comment"># nmcli connection show</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ls /etc/sysconfig/network-scripts/ifcfg-*</span></span><br><span class="line"></span><br><span class="line">-dhcp</span><br><span class="line"><span class="comment"># nmcli connection modify &#x27;Wired connection 1&#x27; \ connection.autoconnect yes \</span></span><br><span class="line">ipv4.method auto</span><br><span class="line"><span class="comment"># systemctl restart NetworkManager</span></span><br><span class="line"><span class="comment"># ip a s</span></span><br><span class="line">-static</span><br><span class="line"><span class="comment"># nmcli con mod &#x27;Wired connection 1&#x27; \</span></span><br><span class="line">connection.autoconnect <span class="built_in">yes</span> \</span><br><span class="line">ipv4.method manual \</span><br><span class="line">ipv4.addresses 172.25.250.11/24 \</span><br><span class="line">ipv4.gateway 172.25.250.254 \</span><br><span class="line">ipv4.dns 8.8.8.8</span><br><span class="line"><span class="comment"># nmcli connection up &#x27;Wired connection 1&#x27; </span></span><br><span class="line"><span class="comment"># ip a s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mandb</span></span><br><span class="line"><span class="comment"># man -k nmcli</span></span><br><span class="line"><span class="comment"># man nmcli | grep -A 2 nmcli.*mod</span></span><br><span class="line"></span><br><span class="line">+ipv4.addresses,-ipv4.dns</span><br><span class="line"><span class="comment"># nmcli con mod &#x27;Wired connection 1&#x27; +ipv4.addresses 172.25.250.10/24</span></span><br><span class="line"><span class="comment"># ifdown &#x27;Wired_connection_1&#x27; &amp;&amp; ifup &#x27;Wired_connection_1&#x27;</span></span><br><span class="line"><span class="comment"># ip a s</span></span><br><span class="line"><span class="comment"># nmcli con mod &#x27;Wired connection 1&#x27; -ipv4.addresses 172.25.250.10/24</span></span><br><span class="line"><span class="comment"># ifdown &#x27;Wired_connection_1&#x27; &amp;&amp; ifup &#x27;Wired_connection_1&#x27;</span></span><br><span class="line"><span class="comment"># ip a s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nmtui tab键</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="主机名称设置-考点"><a href="#主机名称设置-考点" class="headerlink" title="主机名称设置^考点^"></a>主机名称设置^考点^</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hostname</span><br><span class="line">cat /etc/hostname</span><br><span class="line">hostnamectl set-hostname serverb.lab.example.com</span><br><span class="line">hostname</span><br><span class="line">hostnamectl</span><br><span class="line">hostnamectl status</span><br><span class="line">cat /etc/hostname</span><br></pre></td></tr></table></figure>

<p>修改主机名称，重启才能生效^重点^</p>
<h1 id="第十三章-归档及传输文件"><a href="#第十三章-归档及传输文件" class="headerlink" title="第十三章 归档及传输文件"></a>第十三章 归档及传输文件</h1><h2 id="打包-解包（归档）"><a href="#打包-解包（归档）" class="headerlink" title="打包 解包（归档）"></a>打包 解包（归档）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-tar</span><br><span class="line">tar 选项  归档文件名    源文件 源文件2 源文件N</span><br><span class="line">-c  创建</span><br><span class="line">-t  查看</span><br><span class="line">-f  指定文件名</span><br><span class="line">-v  显示详细信息</span><br><span class="line">-x  解包</span><br><span class="line">-C  指定解包路径</span><br><span class="line"><span class="comment"># mkdir test</span></span><br><span class="line"><span class="comment"># cd test/</span></span><br><span class="line"><span class="comment"># cp -r /etc/ .</span></span><br><span class="line"><span class="comment"># cp /boot/initramfs-4.18.0-80.el8.x86_64kdump.img .</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># dd if=/dev/zero of=myfile bs=1M count=50</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># tar -cvf file.tar etc/ initramfs-4.18.0-80.el8.x86_64kdump.img myfile</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># file file.tar</span></span><br><span class="line"><span class="comment"># ls -lh file.tar</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># mkdir mydir</span></span><br><span class="line"><span class="comment"># tar -xvf file.tar -C mydir/</span></span><br><span class="line"><span class="comment"># ls mydir/</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># tar -tf file.tar</span></span><br></pre></td></tr></table></figure>

<h2 id="压缩和解压缩-考点"><a href="#压缩和解压缩-考点" class="headerlink" title="压缩和解压缩^考点^"></a>压缩和解压缩^考点^</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">man tar /-j 格式 -j -J -z</span><br><span class="line"><span class="comment"># tar -czf myfile.gzip etc/ initramfs-4.18.0-80.el8.x86_64kdump.img  myfile</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># file myfile.gzip</span></span><br><span class="line"><span class="comment"># tar -tf myfile.gzip</span></span><br><span class="line"><span class="comment"># tar -cjf myfile.bzip2 etc/ initramfs-4.18.0-80.el8.x86_64kdump.img myfile</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># file myfile.bzip2</span></span><br><span class="line"><span class="comment"># tar -cJf myfile.xz etc/ initramfs-4.18.0-80.el8.x86_64kdump.img myfile</span></span><br><span class="line"><span class="comment"># file myfile.xz</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mkdir jieyasuo</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># history</span></span><br><span class="line"><span class="comment"># tar -xJf myfile.xz -C jieyasuo/</span></span><br><span class="line"><span class="comment"># ls jieyasuo/</span></span><br><span class="line"><span class="comment"># tar -xjf myfile.bzip2 -C jieyasuo/</span></span><br><span class="line"><span class="comment"># ls jieyasuo/</span></span><br><span class="line"><span class="comment"># tar -xzf myfile.gzip -C jieyasuo/</span></span><br><span class="line"><span class="comment"># ls jieyasuo/</span></span><br></pre></td></tr></table></figure>

<h2 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h2><h3 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h3><p>基于ssh传输，可以使用密钥验证连接</p>
<p>把前传给后，server端需要指定user@host</p>
<p>client to server：<code>scp myfile* root@serverb:~</code></p>
<p>server to client：<code>scp root@serverb:~/myfile* .</code></p>
<p>client to client：<code>scp root@serverb:~/myfile* root@bastion:~</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp myfile* root@serverb:~</span></span><br><span class="line"><span class="comment"># ss -antup|grep ssh</span></span><br><span class="line"><span class="comment"># ifcn</span></span><br><span class="line"><span class="comment"># ifconfig</span></span><br><span class="line"><span class="comment"># scp root@serverb:~/myfile* .</span></span><br><span class="line"><span class="comment"># ss -antup|grep ssh</span></span><br><span class="line"><span class="comment"># scp root@serverb:~/myfile* root@bastion:~</span></span><br></pre></td></tr></table></figure>

<h3 id="sftp"><a href="#sftp" class="headerlink" title="sftp"></a>sftp</h3><p>基于ssh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sftp root@serverb</span></span><br><span class="line">	get 下载</span><br><span class="line">	put 上传</span><br><span class="line">	<span class="built_in">command</span> 远程执行</span><br><span class="line">	!<span class="built_in">command</span> 本地执行</span><br></pre></td></tr></table></figure>

<h3 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">三种工作模式：</span><br><span class="line">1. 本地间传输</span><br><span class="line">2. 远程传输</span><br><span class="line">3. 守护进程模式，配置文件加其他工具可以实现自动化备份</span><br></pre></td></tr></table></figure>

<p>如果复制目录结构相同时有两个目录结构的相似的文件，则只复制有差异的部分，所以很快</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rm -rf /tmp/*</span></span><br><span class="line"><span class="comment"># ls /tmp/</span></span><br><span class="line"><span class="comment"># rsync myfile* /tmp/</span></span><br><span class="line"><span class="comment"># rsync -av myfile* /tmp/</span></span><br><span class="line"><span class="comment"># dd if=/dev/zero of=myfile1gb bs=1M count=1024</span></span><br><span class="line"><span class="comment"># rsync -av myfile* /tmp/</span></span><br><span class="line"><span class="comment"># dd if=/dev/zero of=myfile100m bs=1M count=100</span></span><br><span class="line"><span class="comment"># rsync -av myfile* /tmp/</span></span><br><span class="line"><span class="comment"># echo myfile &gt; myfileecho</span></span><br><span class="line"><span class="comment"># rsync -av myfile* /tmp/</span></span><br><span class="line"><span class="comment"># echo myfilemyfile &gt; myfileecho</span></span><br><span class="line"><span class="comment"># rsync -av myfile* /tmp/</span></span><br><span class="line"><span class="comment"># cat /tmp/myfileecho</span></span><br><span class="line"><span class="comment"># rsync myfile* root@serverb:~</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># rm -rf myfile100m</span></span><br><span class="line"><span class="comment"># rsync myfile* root@serverb:~</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># rsync  root@serverb:~/myfile* .</span></span><br></pre></td></tr></table></figure>

<h1 id="第四天混沌小节"><a href="#第四天混沌小节" class="headerlink" title="第四天混沌小节"></a><em>第四天混沌小节</em></h1><p>使用Networkmanager管理网络</p>
<p><code>/etc/sysconfig/network-scripts/</code> 网卡存放的地方</p>
<p>vim编辑网卡</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IPADDR=172.25.250.10</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=172.25.250.254</span><br><span class="line">DNS1=172.25.250.254</span><br><span class="line">ONBOOT=yes ##如果为no重启不生效，很重要</span><br></pre></td></tr></table></figure>

<p>查看连接状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[student@servera network-scripts]$ nmcli connection show</span><br><span class="line">NAME                UUID                                  TYPE      DEVICE </span><br><span class="line">Wired connection 1  81b08161-8925-3cb9-a94c-e3c827e2adc3  ethernet  eth0   </span><br></pre></td></tr></table></figure>

<p>查看设备状态</p>
<p>手动配置manual或者DHCP动态配置网卡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看网关 route -n</p>
<p>查看dns cat &#x2F;etc&#x2F;resolv.conf</p>
<h1 id="第十四章-安装和升级软件包"><a href="#第十四章-安装和升级软件包" class="headerlink" title="第十四章 安装和升级软件包"></a>第十四章 安装和升级软件包</h1><h2 id="软件包分类"><a href="#软件包分类" class="headerlink" title="软件包分类"></a>软件包分类</h2><p>exe rpm 源码包 bin 二进制 rar 预编译  msi deb</p>
<p>红帽 rpm | yum | dnf</p>
<p>debian DPKG-DEB apt</p>
<h2 id="RPM"><a href="#RPM" class="headerlink" title="RPM"></a>RPM</h2><p>rpm</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /content/rhel8.0/x86_64/dvd/AppStream/Packages/</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># pwd</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># ls | wc -l</span></span><br><span class="line"><span class="comment"># ls | grep nmap</span></span><br><span class="line"><span class="comment"># rpm -q nmap-ncat p</span></span><br><span class="line"><span class="comment"># rpm -q nmap-ncat</span></span><br><span class="line"><span class="comment"># rpm -q nmap</span></span><br><span class="line"><span class="comment"># 查询详细信息</span></span><br><span class="line"><span class="comment"># rpm -qi nmap</span></span><br><span class="line"><span class="comment"># rpm -qi nmap-ncat</span></span><br><span class="line"><span class="comment"># cd ..</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># cd BaseOS/</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># cd Packages/</span></span><br><span class="line"><span class="comment"># ls | grep samba</span></span><br><span class="line"><span class="comment"># 查询是否安装</span></span><br><span class="line"><span class="comment"># rpm -q samba 查询</span></span><br><span class="line"><span class="comment"># rpm -ivh samba-4.9.1-8.el8.x86_64.rpm</span></span><br><span class="line"><span class="comment"># rpm -ivh lrzsz-0.12.20-43.el8.x86_64.rpm  安装</span></span><br><span class="line"><span class="comment"># rpm -q lrzsz</span></span><br><span class="line"><span class="comment"># 查询信息,与yum info类似</span></span><br><span class="line"><span class="comment"># rpm -qi lrzsz </span></span><br><span class="line"><span class="comment"># rpm -e lrzsz  卸载</span></span><br><span class="line"><span class="comment"># rpm -q lrzsz</span></span><br><span class="line"><span class="comment"># rpm -ivh lrzsz</span></span><br><span class="line"><span class="comment"># rpm -ivh lrzsz-0.12.20-43.el8.x86_64.rpm</span></span><br><span class="line"><span class="comment"># 卸载不能加版本号</span></span><br><span class="line"><span class="comment"># rpm -e lrzsz</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># rpm -q lrzsz</span></span><br><span class="line"><span class="comment"># rpm -ql lrzsz 生成了那些文件</span></span><br><span class="line"><span class="comment"># rpm -qc lrzsz 配置文件在哪</span></span><br><span class="line"><span class="comment"># rpm -qf /usr/bin/sb  这个文件是通过安装那个软件包出来的</span></span><br><span class="line"><span class="comment"># rpm -qa|grep lrzsz 列出所有已经安装的软件包  并过滤</span></span><br><span class="line"><span class="comment"># rpm -qa|grep nmap</span></span><br><span class="line"><span class="comment"># rpm -qa|grep autofs</span></span><br><span class="line"><span class="comment"># rpm -ivh samba-common-4.9.1-8.el8.noarch.rpm</span></span><br><span class="line"><span class="comment"># 查看配置文件</span></span><br><span class="line"><span class="comment"># rpm -qc samba-common-4.9.1-8.el8.noarch.rpm</span></span><br><span class="line"><span class="comment"># 查看安装软件包释放了哪些文件</span></span><br><span class="line"><span class="comment"># rpm -ql samba-common-4.9.1-8.el8.noarch.rpm</span></span><br><span class="line"><span class="comment"># 查看释放的文件是哪个软件包释放的,反向查询</span></span><br><span class="line"><span class="comment"># rpm -qf /var/lib/samba</span></span><br><span class="line"><span class="comment"># rpm -q --scripts samba-common  执行了shell脚本</span></span><br><span class="line"><span class="comment"># 查询安装软件包时帮助文档的位置,也就是新安装时的man手册未同步进去的东西,mandb同步</span></span><br><span class="line"><span class="comment"># rpm -qd samba-common   文档在哪</span></span><br><span class="line">依赖关系？                                     </span><br></pre></td></tr></table></figure>

<h2 id="yum-dnf"><a href="#yum-dnf" class="headerlink" title="yum | dnf"></a>yum | dnf</h2><p>dnf3</p>
<table>
<thead>
<tr>
<th align="center">编号</th>
<th align="center">DNF（Dandified YUM）</th>
<th align="center">YUM（Yellowdog Updater, Modified）</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">DNF 使用 libsolv 来解析依赖关系，由 SUSE 开发和维护</td>
<td align="center">YUM 使用公开的 API 来解析依赖关系</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">API 有完整的文档</td>
<td align="center">API 没有完整的文档</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">由 C、C++、Python 编写的</td>
<td align="center">只用 Python 编写</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">DNF 目前在 Fedora、RHEL 8、CentOS 8、OEL 8 和 Mageia 6&#x2F;7 中使用</td>
<td align="center">YUM 目前在 RHEL 6&#x2F;7、CentOS 6&#x2F;7、OEL 6&#x2F;7 中使用</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">DNF 支持各种扩展</td>
<td align="center">Yum 只支持基于 Python 的扩展</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">API 有良好的文档，因此很容易创建新的功能</td>
<td align="center">因为 API 没有正确的文档化，所以创建新功能非常困难</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">DNF 在同步存储库的元数据时，使用的内存较少</td>
<td align="center">在同步存储库的元数据时，YUM 使用了过多的内存</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">DNF 使用满足性算法来解决依赖关系解析（它是用字典的方法来存储和检索包和依赖信息）</td>
<td align="center">由于使用公开 API 的原因，Yum 依赖性解析变得迟钝</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">从内存使用量和版本库元数据的依赖性解析来看，性能都不错</td>
<td align="center">总的来说，在很多因素的影响下，表现不佳</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">DNF 更新：在 DNF 更新过程中，如果包中包含不相关的依赖，则不会更新</td>
<td align="center">YUM 将在没有验证的情况下更新软件包</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">如果启用的存储库没有响应，DNF 将跳过它，并继续使用可用的存储库处理事务</td>
<td align="center">如果有存储库不可用，YUM 会立即停止</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center"><code>dnf update</code> 和 <code>dnf upgrade</code> 是等价的</td>
<td align="center">在 Yum 中则不同</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">安装包的依赖关系不更新</td>
<td align="center">Yum 为这种行为提供了一个选项</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">清理删除的包：当删除一个包时，DNF 会自动删除任何没有被用户明确安装的依赖包</td>
<td align="center">Yum 不会这样做</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">存储库缓存更新计划：默认情况下，系统启动后 10 分钟后，DNF 每小时会对配置的存储库检查一次更新。这个动作由系统定时器单元 <code>dnf-makecache.timer</code> 控制</td>
<td align="center">Yum 也会这样做</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">内核包不受 DNF 保护。不像 Yum，你可以删除所有的内核包，包括运行中的内核包</td>
<td align="center">Yum 不允许你删除运行中的内核</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">libsolv：用于解包和读取资源库。hawkey: 为 libsolv 提供简化的 C 和 Python API 库。librepo: 提供 C 和 Python（类似 libcURL）API 的库，用于下载 Linux 存储库元数据和软件包。libcomps: 是 yum.comps 库的替代品。它是用纯 C 语言编写的库，有 Python 2 和 Python 3 的绑定。</td>
<td align="center">Yum 不使用单独的库来执行这些功能</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">DNF 包含 29000 行代码</td>
<td align="center">Yum 包含 56000 行代码</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">DNF 由 Ales Kozumplik 开发</td>
<td align="center">YUM 由 Zdenek Pavlas、Jan Silhan 和团队成员开发</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># whcih yum</span></span><br><span class="line"><span class="comment"># which yum</span></span><br><span class="line"><span class="comment"># ls -l $(which yum)</span></span><br><span class="line"><span class="comment"># ls -l $(which dnf)</span></span><br><span class="line"><span class="comment"># man dnf</span></span><br><span class="line"><span class="comment"># dnf repolist</span></span><br><span class="line"><span class="comment"># dnf list</span></span><br><span class="line"><span class="comment"># dnf list | wc -l</span></span><br><span class="line"><span class="comment"># dnf  search http</span></span><br><span class="line"><span class="comment"># qq</span></span><br><span class="line"><span class="comment"># dnf list|grep autofs</span></span><br><span class="line"><span class="comment"># dnf info autofs</span></span><br><span class="line"><span class="comment"># dnf grouplist</span></span><br><span class="line"><span class="comment"># yum groupinfo &#x27;Graphical Administration Tools&#x27;</span></span><br><span class="line"><span class="comment"># dnf install autofs</span></span><br><span class="line"><span class="comment"># dnf install nmap</span></span><br><span class="line"><span class="comment"># dnf install samba</span></span><br><span class="line"><span class="comment"># dnf -y install samba</span></span><br><span class="line"><span class="comment"># dnf grouplist</span></span><br><span class="line"><span class="comment"># dnf groupinstall &#x27;System Tools&#x27;</span></span><br><span class="line"><span class="comment"># yum -y install samba</span></span><br><span class="line"><span class="comment"># yum -y remove samba</span></span><br><span class="line"><span class="comment"># yum -y install samba</span></span><br><span class="line"><span class="comment"># yum -y erase samba</span></span><br><span class="line"><span class="comment"># dnf repolist</span></span><br><span class="line"><span class="comment"># dnf makecache</span></span><br><span class="line"><span class="comment"># yum clean all</span></span><br><span class="line"><span class="comment"># dnf makecache</span></span><br><span class="line"><span class="comment"># ifconfig</span></span><br><span class="line"><span class="comment"># yum search ifconfig</span></span><br><span class="line"><span class="comment"># yum provides ifconfig</span></span><br></pre></td></tr></table></figure>

<h2 id="模块流"><a href="#模块流" class="headerlink" title="模块流"></a>模块流</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">8版本：</span><br><span class="line">仓库：</span><br><span class="line">1 baseos </span><br><span class="line">2 appstream</span><br><span class="line">ruanjian:</span><br><span class="line">单个存储库-&gt;应用软件包以及有依赖关系的多个版本。</span><br><span class="line">[F0]</span><br><span class="line"><span class="comment"># dnf module list</span></span><br><span class="line"><span class="comment"># dnf -y module install perl</span></span><br><span class="line"><span class="comment"># dnf module install</span></span><br><span class="line"><span class="comment"># dnf module install python36:3.6/common</span></span><br><span class="line"><span class="comment"># dnf module list python36</span></span><br><span class="line"><span class="comment"># dnf module list postgresql</span></span><br><span class="line"><span class="comment"># dnf module disable postgresql</span></span><br><span class="line"><span class="comment"># dnf module list postgresql</span></span><br><span class="line"><span class="comment"># dnf module install postgresql:9.6</span></span><br><span class="line"><span class="comment"># dnf module list postgresql</span></span><br><span class="line"><span class="comment"># dnf module disable postgresql:9.6</span></span><br><span class="line"><span class="comment"># dnf module list postgresql</span></span><br><span class="line"><span class="comment"># dnf module enable postgresql:10</span></span><br><span class="line"><span class="comment"># dnf module list postgresql</span></span><br></pre></td></tr></table></figure>

<h2 id="软件仓库"><a href="#软件仓库" class="headerlink" title="软件仓库"></a>软件仓库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[student@servera yum.repos.d]$ vim rhel_dvd.repo </span><br><span class="line"># 仓库ID(就是名字)</span><br><span class="line">[rhel-8.2-for-x86_64-baseos-rpms]</span><br><span class="line"># 仓库地址</span><br><span class="line">baseurl = http://content.example.com/rhel8.2/x86_64/dvd/BaseOS</span><br><span class="line"># 是否开启仓库,0,false|1,true</span><br><span class="line">enabled = true</span><br><span class="line"># 是否需要公钥验证,也可以用0|1表示</span><br><span class="line">gpgcheck = false</span><br><span class="line"># 描述信息</span><br><span class="line">name = Red Hat Enterprise Linux 8.2 BaseOS (dvd)</span><br><span class="line"># 两个</span><br><span class="line">[rhel-8.2-for-x86_64-appstream-rpms]</span><br><span class="line">baseurl = http://content.example.com/rhel8.2/x86_64/dvd/AppStream</span><br><span class="line">enabled = true</span><br><span class="line">gpgcheck = false</span><br><span class="line">name = Red Hat Enterprise Linux 8.2 AppStream (dvd)</span><br></pre></td></tr></table></figure>

<p><code>yum repolist</code>查看仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">【servera】</span><br><span class="line"> <span class="built_in">cd</span> /etc/yum.repos.d/</span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># rm -rf ./*</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># yum repolist</span></span><br><span class="line"><span class="comment"># yum -y install lrzsz</span></span><br><span class="line"><span class="comment"># yum provides yum-config-manager</span></span><br><span class="line"><span class="comment"># yum-config-manager --add-repo http://content.example.com/rhel8.0/x86_64/dvd/BaseOS</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># vim content.example.com_rhel8.0_x86_64_dvd_BaseOS.repo</span></span><br><span class="line"><span class="comment"># yum-config-manager --add-repo=http://content.example.com/rhel8.0/x86_64/dvd/AppStream</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># cat content.example.com_rhel8.0_x86_64_dvd_AppStream.repo</span></span><br><span class="line"><span class="comment"># dnf repolist</span></span><br><span class="line"><span class="comment"># yum -y install autofs</span></span><br><span class="line"><span class="comment"># vim /etc/yum.conf          方法1 修改yum配置文件</span></span><br><span class="line"><span class="comment"># yum -y install autofs</span></span><br><span class="line"><span class="comment"># vim /etc/yum.conf</span></span><br><span class="line"><span class="comment"># yum -y install autofs</span></span><br><span class="line"><span class="comment"># vim content.example.com_rhel8.0_x86_64_dvd_BaseOS.repo   方法2 </span></span><br><span class="line"><span class="comment"># vim content.example.com_rhel8.0_x86_64_dvd_AppStream.repo</span></span><br><span class="line"><span class="comment"># dnf repolist</span></span><br><span class="line"><span class="comment"># yum -y install autofs</span></span><br><span class="line"><span class="comment"># vim content.example.com_rhel8.0_x86_64_dvd_AppStream.repo</span></span><br><span class="line"><span class="comment"># vim content.example.com_rhel8.0_x86_64_dvd_BaseOS.repo  方法3</span></span><br><span class="line"></span><br><span class="line">[root@servera yum.repos.d]<span class="comment"># cat content.example.com_rhel8.0_x86_64_dvd_BaseOS.repo content.example.com_rhel8.0_x86_64_dvd_AppStream.repo </span></span><br><span class="line">[content.example.com_rhel8.0_x86_64_dvd_BaseOS]</span><br><span class="line">name=created by dnf config-manager from http://content.example.com/rhel8.0/x86_64/dvd/BaseOS</span><br><span class="line">baseurl=http://content.example.com/rhel8.0/x86_64/dvd/BaseOS</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1 <span class="comment">#如果0就是不检查</span></span><br><span class="line">gpgkey=http://content.example.com/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-release</span><br><span class="line"></span><br><span class="line">[content.example.com_rhel8.0_x86_64_dvd_AppStream]</span><br><span class="line">name=created by dnf config-manager from http://content.example.com/rhel8.0/x86_64/dvd/AppStream</span><br><span class="line">baseurl=http://content.example.com/rhel8.0/x86_64/dvd/AppStream</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=http://content.example.com/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-release</span><br><span class="line"><span class="comment"># rpm --import http://content.example.com/rhel8.0/x86_64/dvd/RPM-GPG-KEY-redhat-release										方法4</span></span><br><span class="line"><span class="comment"># yum -y install autofs</span></span><br><span class="line">remove 和 erase可以卸载</span><br><span class="line"></span><br><span class="line"><span class="comment"># 装包组</span></span><br><span class="line">yum groupinstall <span class="string">&#x27;包组名&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="光盘镜像制作yum源"><a href="#光盘镜像制作yum源" class="headerlink" title="光盘镜像制作yum源"></a>光盘镜像制作yum源</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  254  <span class="built_in">mkdir</span> /content</span><br><span class="line">  255  mount foundation0.ilt.example.com</span><br><span class="line">  256  mount foundation0.ilt.example.com:/content /content/</span><br><span class="line">  </span><br><span class="line"><span class="comment"># vim cd.repo</span></span><br><span class="line">[cd_base]</span><br><span class="line">name=mycdbase</span><br><span class="line">baseurl=file:///content/rhel8.0/x86_64/dvd/BaseOS/</span><br><span class="line">enbaled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">[cd_app]</span><br><span class="line">name=mycdapp</span><br><span class="line">baseurl=file:///content/rhel8.0/x86_64/dvd/AppStream</span><br><span class="line">enbaled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># yum clean all</span></span><br><span class="line"><span class="comment"># yum makecache</span></span><br><span class="line"><span class="comment"># yum repolist</span></span><br><span class="line"><span class="comment"># yum -y install httpd</span></span><br></pre></td></tr></table></figure>

<h2 id="自制yum存储仓库"><a href="#自制yum存储仓库" class="headerlink" title="自制yum存储仓库"></a>自制yum存储仓库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">【F0】</span><br><span class="line"><span class="comment"># mkdir /content/myrepo</span></span><br><span class="line"><span class="comment"># cp /content/rhel8.0/x86_64/dvd/AppStream/Packages/http* /content/myrepo/</span></span><br><span class="line"><span class="comment"># cd /content/myrepo/</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># createrepo .</span></span><br><span class="line">【servera】</span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/yum.repos.d/f0.repo</span></span><br><span class="line">[f0]</span><br><span class="line">name=</span><br><span class="line">baseurl=http:///content/myrepo</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"><span class="comment"># dnf makecache</span></span><br><span class="line"><span class="comment"># dnf repolist</span></span><br></pre></td></tr></table></figure>

<h2 id="配置server端的仓库"><a href="#配置server端的仓库" class="headerlink" title="配置server端的仓库"></a>配置server端的仓库</h2><p>用	查找发现apache共享的目录是:&#x2F;content</p>
<p>在&#x2F;content中自定义一个作为仓库的位置</p>
<p>在其中加入仓库目录格式下的一些rpm包</p>
<p>用	给该目录建立索引^目的是识别^</p>
<p>在client端配置仓库的配置文件&#x2F;etc&#x2F;repos.d&#x2F;中加入baseurl</p>
<p><code>yum repolist</code>可以看到status</p>
<p>如果想配置公钥，需要放置公钥到跟appstream和baseos的同级目录下，并且在客户端中配置gpgkey</p>
<h2 id="光盘制作仓库"><a href="#光盘制作仓库" class="headerlink" title="光盘制作仓库"></a>光盘制作仓库</h2><p>与之前的区别就是，先挂载</p>
<p>然后配置baseurl</p>
<p>&#x2F;root&#x2F;test&#x2F;rhel8.0&#x2F;x86_64&#x2F;dvd&#x2F;AppStream</p>
<p>&#x2F;root&#x2F;test&#x2F;rhel8.0&#x2F;x86_64&#x2F;dvd&#x2F;BaseOS</p>
<h1 id="第十五章-访问linux文件系统"><a href="#第十五章-访问linux文件系统" class="headerlink" title="第十五章 访问linux文件系统"></a>第十五章 访问linux文件系统</h1><h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>组织存储文件的方法</p>
<h2 id="磁盘命名规则"><a href="#磁盘命名规则" class="headerlink" title="磁盘命名规则"></a>磁盘命名规则</h2><table>
<thead>
<tr>
<th align="left">设备命名模式</th>
<th>设备类型</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td align="left">&#x2F;dev&#x2F;sd{a..zz}</td>
<td>SATA, SAS, SCSI, USB</td>
<td>热插拔</td>
</tr>
<tr>
<td align="left">&#x2F;dev&#x2F;hd[a..z]</td>
<td>IDE</td>
<td>IDE接口（Integrated Drive Electronics）是电子集成驱2113动器，是把“硬盘5261控制器”4102与“盘体”集成在一起的硬盘驱动器。</td>
</tr>
<tr>
<td align="left">&#x2F;dev&#x2F;vd{a..zz}</td>
<td>VirtIO</td>
<td>虚拟化</td>
</tr>
<tr>
<td align="left">&#x2F;dev&#x2F;nvme0n1</td>
<td>nvme</td>
<td>硬盘新的传输标准|固态硬盘</td>
</tr>
<tr>
<td align="left">&#x2F;dev&#x2F;mmcblk0，&#x2F;dev&#x2F;mmcblk1</td>
<td>SD&#x2F;eMMC存储（SD卡）</td>
<td></td>
</tr>
</tbody></table>
<h2 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h2><p>针对MBR分区表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4主 primary</span><br><span class="line">3主+1扩展 extend</span><br><span class="line">再想细分的话：</span><br><span class="line">3主+1扩展（逻辑分区，最多分15个）</span><br><span class="line">fdisk</span><br></pre></td></tr></table></figure>



<h2 id="常见存储管理工具"><a href="#常见存储管理工具" class="headerlink" title="常见存储管理工具"></a>常见存储管理工具</h2><p>挂载与卸载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lsblk</span></span><br><span class="line"><span class="comment"># ls /dev/vda</span></span><br><span class="line"><span class="comment"># lsblk</span></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># fdisk -l</span></span><br><span class="line"><span class="comment"># blkid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -s 统计当前目录的大小</span></span><br><span class="line"><span class="comment"># du -sh /etc</span></span><br><span class="line"><span class="comment"># du -sh /boot/</span></span><br><span class="line"><span class="comment"># cat /proc/partitions</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># dd if=/dev/zerp of=myfile bs=1M count=100</span></span><br><span class="line"><span class="comment"># dd if=/dev/zero of=myfile bs=1M count=100</span></span><br><span class="line"><span class="comment"># du -sh .</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># lsblk</span></span><br><span class="line"><span class="comment"># fdisk /dev/vdb</span></span><br><span class="line"><span class="comment"># lsblk</span></span><br><span class="line"><span class="comment"># cd</span></span><br><span class="line"><span class="comment"># mkdir /myvdb</span></span><br><span class="line"><span class="comment"># mount /dev/vdb1 /myvdb/</span></span><br><span class="line"><span class="comment"># mkfs.xfs /dev/vdb1</span></span><br><span class="line"><span class="comment"># mount /dev/vdb1 /myvdb/</span></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># cd /myvdb/</span></span><br><span class="line"><span class="comment"># dd if=/dev/zero of=myfile bs=1M count=90</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># dd if=/dev/zero of=myfile1 bs=1M count=90</span></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># rm -rf ./*</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># cd</span></span><br><span class="line"><span class="comment"># umount /myvdb</span></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># blkid /dev/vdb1</span></span><br><span class="line"><span class="comment"># 通过UUID挂载</span></span><br><span class="line"><span class="comment"># mount UUID=&quot;f18ccbbc-8efb-4561-9ae7-12c12099e55c&quot; /myvdb</span></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># umount /myvdb</span></span><br><span class="line">强制卸载</span><br><span class="line"><span class="comment"># umount /myvdb -l</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># df -TH</span></span><br><span class="line"><span class="comment"># blkid /dev/vdb</span></span><br><span class="line"><span class="comment"># blkid /dev/vdb1</span></span><br></pre></td></tr></table></figure>



<h2 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h2><p><code>fdisk /dev/vdb</code></p>
<p>n 新建</p>
<p>w 保存</p>
<p>制作文件系统</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs /dev/vdb1</span><br><span class="line">mkfs -t ext4 /dev/vdb2</span><br></pre></td></tr></table></figure>



<p>扇区的使用，如果一个扇区没存满但是又没法写进去了，会当作被整个占用，导致显示的存储比实际存储要大</p>
<h2 id="查找文件-考点"><a href="#查找文件-考点" class="headerlink" title="查找文件^考点^"></a>查找文件^考点^</h2><h3 id="locate，whereis，which"><a href="#locate，whereis，which" class="headerlink" title="locate，whereis，which"></a>locate，whereis，which</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#手动更新数据库</span></span><br><span class="line">updatedb</span><br><span class="line"><span class="comment"># 查找包含该字段的文件</span></span><br><span class="line"><span class="comment"># locate passwd</span></span><br><span class="line"><span class="comment"># touch passwd</span></span><br><span class="line"><span class="comment"># locate passwd</span></span><br><span class="line"><span class="comment"># updatedb</span></span><br><span class="line"><span class="comment"># locate passwd</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># touch mypassword</span></span><br><span class="line"><span class="comment"># locate mypassword</span></span><br><span class="line"><span class="comment"># touch MYPASSWORD</span></span><br><span class="line"><span class="comment"># locate -i mypassword</span></span><br><span class="line"><span class="comment"># updatedb</span></span><br><span class="line"><span class="comment"># 忽略大小写</span></span><br><span class="line"><span class="comment"># locate -i mypassword</span></span><br><span class="line"><span class="comment"># 从环境变量查找二进制文件</span></span><br><span class="line"><span class="comment"># which cat</span></span><br><span class="line"><span class="comment"># which ls</span></span><br><span class="line"><span class="comment"># which pwd</span></span><br><span class="line"><span class="comment"># echo $PATH</span></span><br><span class="line"><span class="comment"># 查命令，配置文件，man手册等等</span></span><br><span class="line"><span class="comment"># whereis passwd</span></span><br></pre></td></tr></table></figure>

<h3 id="find-考点"><a href="#find-考点" class="headerlink" title="find^考点^"></a>find^考点^</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按名称查，只能精确匹配，加通配符要用“**”</span></span><br><span class="line"><span class="comment"># find . -name pass</span></span><br><span class="line"><span class="comment"># find . -name mypassword</span></span><br><span class="line"><span class="comment"># find . -iname mypassword</span></span><br><span class="line"><span class="comment"># find . -iname &#x27;*pass*&#x27;</span></span><br><span class="line"><span class="comment"># find / -name passwd</span></span><br><span class="line"><span class="comment"># find /home/ -user student</span></span><br><span class="line"><span class="comment"># 忽略大小写</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># man find</span></span><br><span class="line"><span class="comment"># find /home/ -user student -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find /home/ -group student -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># id student</span></span><br><span class="line"><span class="comment"># find /home/ -uid 1000 -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find /home/ -gid 1000 -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find /home/ -uid 1000 -gid 1000 -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find / -user student</span></span><br><span class="line"><span class="comment"># find / -user student &gt; find.true 2&gt; find.error</span></span><br><span class="line"><span class="comment"># cat find.true</span></span><br><span class="line"><span class="comment"># cat find.error</span></span><br><span class="line"><span class="comment"># find /home -type f</span></span><br><span class="line"><span class="comment"># find /home -type l</span></span><br><span class="line"><span class="comment"># find /home -type s</span></span><br><span class="line"><span class="comment"># find /home -type p</span></span><br><span class="line"><span class="comment"># find /dev -type b</span></span><br><span class="line"><span class="comment"># find /dev -type c</span></span><br><span class="line"><span class="comment"># find /dev -type c -exec file &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># history</span></span><br><span class="line"><span class="comment"># history -w</span></span><br><span class="line"><span class="comment"># ls</span></span><br><span class="line"><span class="comment"># for i in &#123;1..10&#125;;do dd if=/dev/zero of=myfile$i bs=1M count=$i;done</span></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># find . -type f -size 5M</span></span><br><span class="line"><span class="comment"># find . -type f -size 5M -exec ls -lh &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find . -type f -size +5M -exec ls -lh &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find . -type f -size -5M -exec ls -lh &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># ls -l</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in &#123;111,222,333,444,555,666,777&#125;;do chmod =$i myfile$&#123;i:2&#125;;done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ls -lh</span></span><br><span class="line"><span class="comment"># 按权限查</span></span><br><span class="line"><span class="comment"># find . -perm 111</span></span><br><span class="line"><span class="comment"># find . -perm 111 -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find . -perm 222 -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find . -perm 777 -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># -，最少要都有权限</span></span><br><span class="line"><span class="comment"># find . -perm -444  -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find . -perm /444  -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># /，任意满足最少一个就可以</span></span><br><span class="line"><span class="comment"># find . -perm /u+r,g+r,o+r  -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># find . -perm -u+r,g+r,o+r  -exec ls -l &#123;&#125; \;</span></span><br><span class="line"><span class="comment"># history -w</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># find . -type f -a time +1</span></span><br><span class="line"><span class="comment"># 附和条件判断,10&lt;该文件&lt;20，-a-a表并且</span></span><br><span class="line"><span class="comment"># find . -a -size +10M -a -size -20M  </span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="第十六章-服务器管理"><a href="#第十六章-服务器管理" class="headerlink" title="第十六章 服务器管理"></a>第十六章 服务器管理</h1><p>飞机驾驶舱：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dnf search cock</span></span><br><span class="line"><span class="comment"># dnf -y install cockpit</span></span><br><span class="line"><span class="comment"># systemctl list-unit-files | grep cock</span></span><br><span class="line"><span class="comment"># systemctl enable cockpit.socket</span></span><br><span class="line"><span class="comment"># ss -antup|grep cock</span></span><br><span class="line"><span class="comment"># systemctl enable cockpit</span></span><br><span class="line"><span class="comment"># systemctl start  cockpit.service</span></span><br><span class="line"><span class="comment"># ss -antup|grep cock</span></span><br><span class="line">firefox localhost:9090</span><br></pre></td></tr></table></figure>

<h2 id="模拟环境"><a href="#模拟环境" class="headerlink" title="模拟环境"></a>模拟环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 还原 INIT 快照</span></span><br><span class="line"><span class="comment"># 挂载光盘 iso文件</span></span><br><span class="line"><span class="comment"># kiosk身份登陆系统</span></span><br><span class="line">$ <span class="built_in">df</span> -Th|grep media</span><br><span class="line">$ ssh root@localhost <span class="string">&#x27;yum -y install  /run/media/kiosk/CDROM/ex200v82-3.8-210324.x86_64.rpm&#x27;</span></span><br><span class="line">直到出现以下信息，完成。</span><br><span class="line">GRADE</span><br><span class="line">    [kiosk@foundation0 ~]$ exam-grade</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line"></span><br><span class="line">  Verifying        : ex200v82-3.8-210324.x86_64                             1/1 </span><br><span class="line">Installed products updated.</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  ex200v82-3.8-210324.x86_64                                                    </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">浏览器能看到模拟题OK。</span><br><span class="line">$ init 0</span><br><span class="line"><span class="comment"># 做快照 RHCSA快照环境</span></span><br></pre></td></tr></table></figure>

<h1 id="第五天大大的总结"><a href="#第五天大大的总结" class="headerlink" title="第五天大大的总结"></a>第五天大大的总结</h1><ul>
<li>在<code>/etc/profile;/etc/bashrc;~/.bash_profile;~/.bashrc</code>四个配置文件中打印一行信息，四个配置文件都是历史遗留问题，而且是机器启动时就会加载的文件，查看打印的信息可知加载顺序</li>
<li>对于alias中有很多但是四个配置文件中没有写入这些内容的,是因为不止有这四个配置文件,还有<code>profile.d/</code>目录下的配置文件也生效.</li>
<li>这脚本没搞明白</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># for i in &#123;111,222,333,444,555,666,777&#125;;do chmod =$i myfile$&#123;i:2&#125;;done</span><br></pre></td></tr></table></figure>

<blockquote>
<p>${i:2}截取字符串，截取i的前两个字符留剩下的内容^搞明白了^</p>
</blockquote>
<ul>
<li><p>find搜索东西时，有一部分是&#x2F;proc目录下的文件查不到，是因为process（进程）执行时生成的文件执行完成后就没了</p>
</li>
<li><p>dd：生成一个文件，使用&#x2F;dev&#x2F;zero设备用0填充，一块是1m，填充15块</p>
<p><code>dd if=/dev/zero of=file bs=1M count=15</code></p>
</li>
</ul>
<h2 id="link"><a href="#link" class="headerlink" title="link"></a>link</h2><ul>
<li><p>软连接</p>
<p>节点与原文件不同</p>
<p>可以对目录生效</p>
<p>快捷方式</p>
</li>
<li><p>硬链接</p>
<p>节点与原文件一样</p>
<p>不能创建目录的硬链接</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://lnsslimbo.github.io">LNSS</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lnsslimbo.github.io/2021/08/18/RHCE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RH124/">https://lnsslimbo.github.io/2021/08/18/RHCE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RH124/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lnsslimbo.github.io" target="_blank">茕孑</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2021/08/18/RHCE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RH134/"><img class="prev-cover" src="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">RHCE学习笔记|RH134</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/lnsslimbo/cdn@img%2Bvideo/blogimg/lnss.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">LNSS</div><div class="author-info__description">江枫渔火对愁眠</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lnsslimbo"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">可知岁月|敬浮生 <img src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/20150404H5648_ZuzhL.gif"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#RH124"><span class="toc-number">1.</span> <span class="toc-text">RH124</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E9%9B%B6%E7%AB%A0-%E8%AF%BE%E5%89%8D%E5%87%86%E5%A4%87"><span class="toc-number">2.</span> <span class="toc-text">第零章 课前准备</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.</span> <span class="toc-text">自我介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">2.2.</span> <span class="toc-text">课程简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E5%9B%9E%E6%94%BE"><span class="toc-number">2.3.</span> <span class="toc-text">视频回放</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E8%BD%AF%E4%BB%B6"><span class="toc-number">2.4.</span> <span class="toc-text">远程软件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98"><span class="toc-number">2.5.</span> <span class="toc-text">其他问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%B3%95%E4%B8%89%E7%AB%A0"><span class="toc-number">2.6.</span> <span class="toc-text">约法三章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E5%AE%89%E6%8E%92"><span class="toc-number">2.7.</span> <span class="toc-text">课程安排</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.8.</span> <span class="toc-text">环境介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#workstation"><span class="toc-number">2.9.</span> <span class="toc-text">workstation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BD%9C%E7%94%A8"><span class="toc-number">2.10.</span> <span class="toc-text">虚拟机作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81"><span class="toc-number">2.11.</span> <span class="toc-text">虚拟机账号密码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87"><span class="toc-number">2.12.</span> <span class="toc-text">支持中文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%B8%B8%E7%94%A8%E6%8E%A7%E5%88%B6%E5%91%BD%E4%BB%A4"><span class="toc-number">2.13.</span> <span class="toc-text">虚拟机常用控制命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.14.</span> <span class="toc-text">环境设置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E8%AE%A4%E8%AF%86Linux%E5%8F%8ARedhat"><span class="toc-number">3.</span> <span class="toc-text">第一章 认识Linux及Redhat</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2%E5%8F%8A%E8%83%8C%E6%99%AF"><span class="toc-number">3.1.</span> <span class="toc-text">历史及背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%B9%E8%AE%AD%E4%BD%93%E7%B3%BB"><span class="toc-number">3.2.</span> <span class="toc-text">培训体系</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E8%AE%BF%E9%97%AE%E5%91%BD%E4%BB%A4%E8%A1%8C"><span class="toc-number">4.</span> <span class="toc-text">第二章 访问命令行</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E4%B8%8E%E9%80%80%E5%87%BA"><span class="toc-number">4.1.</span> <span class="toc-text">登陆与退出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%92%8C%E7%BB%88%E7%AB%AF"><span class="toc-number">4.2.</span> <span class="toc-text">控制台和终端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%B1%95%E7%A4%BA"><span class="toc-number">4.3.</span> <span class="toc-text">工作区展示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell"><span class="toc-number">4.4.</span> <span class="toc-text">shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E7%AC%A6-%E5%89%8D%E5%AF%BC%E7%AC%A6"><span class="toc-number">4.5.</span> <span class="toc-text">命令提示符 前导符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">4.6.</span> <span class="toc-text">命令的基本组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">4.7.</span> <span class="toc-text">命令行快捷键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tab%E8%A1%A5%E5%85%A8"><span class="toc-number">4.8.</span> <span class="toc-text">Tab补全</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#history"><span class="toc-number">4.9.</span> <span class="toc-text">history</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#echo"><span class="toc-number">4.10.</span> <span class="toc-text">echo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E6%93%8D%E4%BD%9C"><span class="toc-number">4.11.</span> <span class="toc-text">管道操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-number">4.12.</span> <span class="toc-text">shell执行方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E6%9C%BA%E6%88%96%E9%87%8D%E5%90%AF%E6%93%8D%E4%BD%9C"><span class="toc-number">4.13.</span> <span class="toc-text">关机或重启操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%96%B0%E7%9A%84%E4%B8%80%E8%A1%8C%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">4.14.</span> <span class="toc-text">在新的一行继续执行命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">4.15.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="toc-number">4.16.</span> <span class="toc-text">命令别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2"><span class="toc-number">4.17.</span> <span class="toc-text">命令替换</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BB%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%AE%A1%E7%90%86%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">第三章 从命令行管理文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%AF%BC%E8%88%AA"><span class="toc-number">5.1.</span> <span class="toc-text">路径表示和导航</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">5.2.</span> <span class="toc-text">文件管理常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">5.3.</span> <span class="toc-text">通配符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%96%87%E4%BB%B6"><span class="toc-number">5.4.</span> <span class="toc-text">连接文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%A4%A9%E5%86%85%E5%AE%B9%E5%B0%8F%E8%8A%82"><span class="toc-number">6.</span> <span class="toc-text">第一天内容小节</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E5%9C%A8rhel%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%B8%AE%E5%8A%A9"><span class="toc-number">7.</span> <span class="toc-text">第四章 在rhel中获取帮助</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#help%E3%80%81man%E6%89%8B%E5%86%8C"><span class="toc-number">7.1.</span> <span class="toc-text">help、man手册</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#info%EF%BC%88pinfo%EF%BC%89"><span class="toc-number">7.2.</span> <span class="toc-text">info（pinfo）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RPM%E5%8C%85%E6%96%87%E6%A1%A3"><span class="toc-number">7.3.</span> <span class="toc-text">RPM包文档()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%98%E6%96%B9%E7%BD%91%E7%AB%99"><span class="toc-number">7.4.</span> <span class="toc-text">官方网站</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91"><span class="toc-number">7.5.</span> <span class="toc-text">互联网</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E5%88%9B%E5%BB%BA%E3%80%81%E6%9F%A5%E7%9C%8B-%E7%BC%96%E8%BE%91%E6%96%87%E6%9C%AC"><span class="toc-number">8.</span> <span class="toc-text">第五章 创建、查看 编辑文本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vim%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">8.1.</span> <span class="toc-text">vim常用快捷键</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%81%97%E5%BF%98%E5%86%85%E5%AE%B9%EF%BC%9A"><span class="toc-number">9.</span> <span class="toc-text">遗忘内容：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vim%E4%B8%AA%E6%80%A7%E5%8C%96%E8%AE%BE%E7%BD%AE"><span class="toc-number">9.1.</span> <span class="toc-text">vim个性化设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-number">9.2.</span> <span class="toc-text">输入输出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA"><span class="toc-number">9.2.1.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">9.2.2.</span> <span class="toc-text">输出重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">9.2.3.</span> <span class="toc-text">输入重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%B3%E5%87%BA%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="toc-number">9.3.</span> <span class="toc-text">引申出设置密码的几种方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F-1"><span class="toc-number">9.4.</span> <span class="toc-text">变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E6%96%87%E4%BB%B6"><span class="toc-number">9.4.1.</span> <span class="toc-text">变量文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-number">10.</span> <span class="toc-text">第六章 用户和组管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7"><span class="toc-number">10.1.</span> <span class="toc-text">用户账户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">10.1.1.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-number">10.1.2.</span> <span class="toc-text">组管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#su-sudo"><span class="toc-number">10.2.</span> <span class="toc-text">su sudo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%88%E4%B8%8D%E7%86%9F%EF%BC%8C%E5%A4%8D%E4%B9%A0%EF%BC%89"><span class="toc-number">10.3.</span> <span class="toc-text">生命周期（不熟，复习）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#x2F-etc-x2F-shadow"><span class="toc-number">10.3.1.</span> <span class="toc-text">&#x2F;etc&#x2F;shadow</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">10.4.</span> <span class="toc-text">常用配置文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-%E6%8E%A7%E5%88%B6%E5%AF%B9%E6%96%87%E4%BB%B6%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">11.</span> <span class="toc-text">第七章 控制对文件的访问</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%80%E4%BB%8B"><span class="toc-number">11.1.</span> <span class="toc-text">权限简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="toc-number">11.2.</span> <span class="toc-text">数字表示法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chmod%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90"><span class="toc-number">11.3.</span> <span class="toc-text">chmod修改权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chown"><span class="toc-number">11.4.</span> <span class="toc-text">chown</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90%EF%BC%88%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AEumask%E5%80%BC%EF%BC%89"><span class="toc-number">11.5.</span> <span class="toc-text">默认权限（通过设置umask值）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%A4%A9%E7%BB%86%E8%8A%82%E5%B0%8F%E8%8A%82"><span class="toc-number">12.</span> <span class="toc-text">第二天细节小节</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="toc-number">12.1.</span> <span class="toc-text">特殊权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SUID%EF%BC%88%E5%AF%B9%E5%91%BD%E4%BB%A4%E6%9C%89%E6%95%88%EF%BC%8C%E4%BB%A5%E6%96%87%E4%BB%B6%E6%8B%A5%E6%9C%89%E8%80%85%E7%9A%84%E8%BA%AB%E4%BB%BD%E6%89%A7%E8%A1%8C%EF%BC%89"><span class="toc-number">12.1.1.</span> <span class="toc-text">SUID（对命令有效，以文件拥有者的身份执行）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SGID-%E8%80%83%E7%82%B9-%EF%BC%88%E5%AF%B9%E7%9B%AE%E5%BD%95%E6%9C%89%E6%95%88%EF%BC%8C%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E7%BB%84%E5%8C%B9%E9%85%8D%EF%BC%8C%E4%B8%94%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9B%AE%E5%BD%95%E5%85%B7%E6%9C%89sgid%E6%9D%83%E9%99%90%EF%BC%89"><span class="toc-number">12.1.2.</span> <span class="toc-text">SGID^考点^（对目录有效，目录下文件与目录组匹配，且目录下目录具有sgid权限）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sticky-SBIT%EF%BC%88%E5%AF%B9%E7%9B%AE%E5%BD%95%E6%9C%89%E6%95%88%EF%BC%8C%E8%A6%81%E6%B1%82%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%E5%90%84%E7%AE%A1%E5%90%84%E7%9A%84%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%88%A0%E6%94%B9%E5%88%AB%E4%BA%BA%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%89"><span class="toc-number">12.1.3.</span> <span class="toc-text">sticky SBIT（对目录有效，要求目录下文件各管各的，不能删改别人的文件）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">12.2.</span> <span class="toc-text">权限优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">12.3.</span> <span class="toc-text">其他用户权限管理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7%E5%8F%8A%E7%AE%A1%E7%90%86-%E9%87%8D%E7%82%B9"><span class="toc-number">13.</span> <span class="toc-text">第八章 进程监控及管理^重点^</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-number">13.1.</span> <span class="toc-text">基础概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81"><span class="toc-number">13.2.</span> <span class="toc-text">查看进程状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ps"><span class="toc-number">13.2.1.</span> <span class="toc-text">ps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#top"><span class="toc-number">13.2.2.</span> <span class="toc-text">top</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">13.2.2.1.</span> <span class="toc-text">快捷键</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7"><span class="toc-number">13.3.</span> <span class="toc-text">信号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E4%BD%9C%E4%B8%9A%EF%BC%88jobs%EF%BC%89-%E9%87%8D%E8%A6%81"><span class="toc-number">13.3.1.</span> <span class="toc-text">控制作业（jobs）^重要^</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#xclock%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-number">13.3.1.1.</span> <span class="toc-text">xclock示例：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E6%95%B4nice%E5%80%BC%EF%BC%88%E6%9B%B4%E6%94%B9%E4%BC%98%E5%85%88%E7%BA%A7%EF%BC%89"><span class="toc-number">13.4.</span> <span class="toc-text">调整nice值（更改优先级）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B3%E5%9D%87%E8%B4%9F%E8%BD%BD"><span class="toc-number">13.5.</span> <span class="toc-text">平均负载</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-%E6%8E%A7%E5%88%B6%E6%9C%8D%E5%8A%A1%E5%92%8C%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B-%E9%87%8D%E7%82%B9"><span class="toc-number">14.</span> <span class="toc-text">第九章 控制服务和守护进程^重点^</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E7%AE%A1%E7%90%86"><span class="toc-number">14.1.</span> <span class="toc-text">单元管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%8A%B6%E6%80%81%EF%BC%88status%EF%BC%89"><span class="toc-number">14.2.</span> <span class="toc-text">服务状态（status）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%88%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD%EF%BC%89"><span class="toc-number">14.3.</span> <span class="toc-text">服务管理（常用功能）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E5%AF%B9%E6%AF%94"><span class="toc-number">14.4.</span> <span class="toc-text">版本对比</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86"><span class="toc-number">14.4.1.</span> <span class="toc-text">电源管理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-openssh%E6%9C%8D%E5%8A%A1"><span class="toc-number">15.</span> <span class="toc-text">第十章 openssh服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh"><span class="toc-number">15.1.</span> <span class="toc-text">ssh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95"><span class="toc-number">15.2.</span> <span class="toc-text">加密算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-number">15.2.1.</span> <span class="toc-text">对称加密</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-number">15.2.2.</span> <span class="toc-text">非对称加密</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SSH%E5%8E%9F%E7%90%86"><span class="toc-number">15.3.</span> <span class="toc-text">SSH原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A0%BC%E5%BC%8F"><span class="toc-number">15.3.1.</span> <span class="toc-text">基本格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86%E5%8E%9F%E7%90%86"><span class="toc-number">15.3.2.</span> <span class="toc-text">免密登陆原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86"><span class="toc-number">15.3.3.</span> <span class="toc-text">免密登陆</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9ssh%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">15.4.</span> <span class="toc-text">修改ssh配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E5%AE%9E%E9%AA%8C"><span class="toc-number">15.4.1.</span> <span class="toc-text">端口实验</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%A4%A9%E8%A1%A5%E5%85%85%E5%B0%8F%E8%8A%82"><span class="toc-number">16.</span> <span class="toc-text">第三天补充小节</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#xshell%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">16.1.</span> <span class="toc-text">xshell使用方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xshell%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86F0"><span class="toc-number">16.2.</span> <span class="toc-text">xshell免密登陆F0</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lrzsz%E5%91%BD%E4%BB%A4%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="toc-number">16.3.</span> <span class="toc-text">lrzsz命令实现文件传输</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#xftp%E5%B7%A5%E5%85%B7%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="toc-number">16.4.</span> <span class="toc-text">xftp工具实现文件传输</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E7%9A%84%E7%9F%9B%E7%9B%BE%E4%B9%8B%E5%A4%84"><span class="toc-number">16.5.</span> <span class="toc-text">特殊权限的矛盾之处</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%8F%8A%E5%AD%98%E5%82%A8"><span class="toc-number">17.</span> <span class="toc-text">第十一章 日志分析及存储</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%EF%BC%88rsyslog-conf%EF%BC%89"><span class="toc-number">17.1.</span> <span class="toc-text">日志文件类型（rsyslog.conf）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E7%B1%BB%E5%88%AB"><span class="toc-number">17.2.</span> <span class="toc-text">设备类别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-number">17.3.</span> <span class="toc-text">日志级别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#rsyslog%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-number">17.4.</span> <span class="toc-text">rsyslog日志格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%8F%91%E9%80%81%E6%97%A5%E5%BF%97"><span class="toc-number">17.5.</span> <span class="toc-text">手动发送日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#systemd%E6%97%A5%E5%BF%97"><span class="toc-number">17.6.</span> <span class="toc-text">systemd日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2-%EF%BC%88%E6%AF%94%E5%A6%82%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9E%E7%8E%B0nginx%E7%9A%84%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2%EF%BC%89"><span class="toc-number">17.7.</span> <span class="toc-text">日志切割^（比如自定义实现nginx的日志切割）^</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8systemd%E6%97%A5%E5%BF%97-%E8%BD%AC%E5%82%A8-%E8%80%83%E7%82%B9-%E4%B8%80%E5%AE%9A%E8%A6%81%E7%BB%93%E5%90%88%E5%AE%B9%E5%99%A8%E5%81%9A"><span class="toc-number">17.8.</span> <span class="toc-text">持久化存储systemd日志(转储)^考点,一定要结合容器做^</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E4%B8%AD%E6%94%B6%E9%9B%86%E6%97%A5%E5%BF%97-%EF%BC%88%E4%B8%80%E6%94%B6%E5%A4%9A%EF%BC%8C%E5%90%8C%E6%97%B6%E7%AE%A1%E7%90%86%EF%BC%89"><span class="toc-number">17.9.</span> <span class="toc-text">集中收集日志^（一收多，同时管理）^</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86"><span class="toc-number">17.10.</span> <span class="toc-text">系统时间管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%92%9F%E6%9C%8D%E5%8A%A1%E5%99%A8-%E9%85%8D%E7%BD%AENTP%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%89-%E8%80%83"><span class="toc-number">17.10.1.</span> <span class="toc-text">设置时钟服务器(配置NTP客户端）^考^</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86"><span class="toc-number">18.</span> <span class="toc-text">第十二章 网络管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3%E5%90%8D%E7%A7%B0%E8%A7%84%E8%8C%83-%E7%BD%91%E5%8D%A1"><span class="toc-number">18.1.</span> <span class="toc-text">网络接口名称规范(网卡)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="toc-number">18.2.</span> <span class="toc-text">验证网络配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%A3"><span class="toc-number">18.3.</span> <span class="toc-text">标准服务端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nmcli-%E9%87%8D%E7%82%B9%EF%BC%88%E6%9C%8D%E5%8A%A1%E6%98%AFNetwork-manager%EF%BC%89"><span class="toc-number">18.4.</span> <span class="toc-text">nmcli^重点（服务是Network^ ^manager）^</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%A7%B0%E8%AE%BE%E7%BD%AE-%E8%80%83%E7%82%B9"><span class="toc-number">18.5.</span> <span class="toc-text">主机名称设置^考点^</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0-%E5%BD%92%E6%A1%A3%E5%8F%8A%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6"><span class="toc-number">19.</span> <span class="toc-text">第十三章 归档及传输文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85-%E8%A7%A3%E5%8C%85%EF%BC%88%E5%BD%92%E6%A1%A3%EF%BC%89"><span class="toc-number">19.1.</span> <span class="toc-text">打包 解包（归档）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9-%E8%80%83%E7%82%B9"><span class="toc-number">19.2.</span> <span class="toc-text">压缩和解压缩^考点^</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="toc-number">19.3.</span> <span class="toc-text">文件传输</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#scp"><span class="toc-number">19.3.1.</span> <span class="toc-text">scp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sftp"><span class="toc-number">19.3.2.</span> <span class="toc-text">sftp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rsync"><span class="toc-number">19.3.3.</span> <span class="toc-text">rsync</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E5%A4%A9%E6%B7%B7%E6%B2%8C%E5%B0%8F%E8%8A%82"><span class="toc-number">20.</span> <span class="toc-text">第四天混沌小节</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%87%E7%BA%A7%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">21.</span> <span class="toc-text">第十四章 安装和升级软件包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%8C%85%E5%88%86%E7%B1%BB"><span class="toc-number">21.1.</span> <span class="toc-text">软件包分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RPM"><span class="toc-number">21.2.</span> <span class="toc-text">RPM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yum-dnf"><span class="toc-number">21.3.</span> <span class="toc-text">yum | dnf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E6%B5%81"><span class="toc-number">21.4.</span> <span class="toc-text">模块流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E4%BB%93%E5%BA%93"><span class="toc-number">21.5.</span> <span class="toc-text">软件仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%89%E7%9B%98%E9%95%9C%E5%83%8F%E5%88%B6%E4%BD%9Cyum%E6%BA%90"><span class="toc-number">21.6.</span> <span class="toc-text">光盘镜像制作yum源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%88%B6yum%E5%AD%98%E5%82%A8%E4%BB%93%E5%BA%93"><span class="toc-number">21.7.</span> <span class="toc-text">自制yum存储仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEserver%E7%AB%AF%E7%9A%84%E4%BB%93%E5%BA%93"><span class="toc-number">21.8.</span> <span class="toc-text">配置server端的仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%89%E7%9B%98%E5%88%B6%E4%BD%9C%E4%BB%93%E5%BA%93"><span class="toc-number">21.9.</span> <span class="toc-text">光盘制作仓库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0-%E8%AE%BF%E9%97%AElinux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">22.</span> <span class="toc-text">第十五章 访问linux文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">22.1.</span> <span class="toc-text">文件系统</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="toc-number">22.2.</span> <span class="toc-text">磁盘命名规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%BA"><span class="toc-number">22.3.</span> <span class="toc-text">分区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">22.4.</span> <span class="toc-text">常见存储管理工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-number">22.5.</span> <span class="toc-text">磁盘分区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6-%E8%80%83%E7%82%B9"><span class="toc-number">22.6.</span> <span class="toc-text">查找文件^考点^</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#locate%EF%BC%8Cwhereis%EF%BC%8Cwhich"><span class="toc-number">22.6.1.</span> <span class="toc-text">locate，whereis，which</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#find-%E8%80%83%E7%82%B9"><span class="toc-number">22.6.2.</span> <span class="toc-text">find^考点^</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AB%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86"><span class="toc-number">23.</span> <span class="toc-text">第十六章 服务器管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%8B%9F%E7%8E%AF%E5%A2%83"><span class="toc-number">23.1.</span> <span class="toc-text">模拟环境</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E5%A4%A9%E5%A4%A7%E5%A4%A7%E7%9A%84%E6%80%BB%E7%BB%93"><span class="toc-number">24.</span> <span class="toc-text">第五天大大的总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#link"><span class="toc-number">24.1.</span> <span class="toc-text">link</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/07/18/%E6%92%AD%E6%94%BE%E5%99%A8%E6%B5%8B%E8%AF%95/" title="播放器测试"><img src="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="播放器测试"/></a><div class="content"><a class="title" href="/2022/07/18/%E6%92%AD%E6%94%BE%E5%99%A8%E6%B5%8B%E8%AF%95/" title="播放器测试">播放器测试</a><time datetime="2022-07-18T09:29:04.000Z" title="发表于 2022-07-18 17:29:04">2022-07-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/17/B%E7%AB%99%E8%A7%86%E9%A2%91%E5%B5%8C%E5%85%A5%E6%B5%8B%E8%AF%95/" title="B站视频嵌入测试"><img src="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="B站视频嵌入测试"/></a><div class="content"><a class="title" href="/2022/07/17/B%E7%AB%99%E8%A7%86%E9%A2%91%E5%B5%8C%E5%85%A5%E6%B5%8B%E8%AF%95/" title="B站视频嵌入测试">B站视频嵌入测试</a><time datetime="2022-07-17T09:00:02.000Z" title="发表于 2022-07-17 17:00:02">2022-07-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/12/RHCA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RH358/" title="RHCA学习笔记|RH358"><img src="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RHCA学习笔记|RH358"/></a><div class="content"><a class="title" href="/2022/07/12/RHCA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RH358/" title="RHCA学习笔记|RH358">RHCA学习笔记|RH358</a><time datetime="2022-07-12T10:52:40.000Z" title="发表于 2022-07-12 18:52:40">2022-07-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/12/RHCA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-CL210/" title="RHCA学习笔记|CL210"><img src="https://s2.loli.net/2022/07/12/x2DObVMGC8k954p.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RHCA学习笔记|CL210"/></a><div class="content"><a class="title" href="/2022/07/12/RHCA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-CL210/" title="RHCA学习笔记|CL210">RHCA学习笔记|CL210</a><time datetime="2022-07-12T10:52:23.000Z" title="发表于 2022-07-12 18:52:23">2022-07-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/12/Linux%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BA%94%E7%94%A8/" title="Linux基础服务应用"><img src="https://s2.loli.net/2022/07/12/r6P4NjMDmTvBlG7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux基础服务应用"/></a><div class="content"><a class="title" href="/2022/07/12/Linux%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1%E5%BA%94%E7%94%A8/" title="Linux基础服务应用">Linux基础服务应用</a><time datetime="2022-07-12T10:32:48.000Z" title="发表于 2022-07-12 18:32:48">2022-07-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 <i id="heartbeat" class="fa fas fa-heartbeat"></i>  LNSS</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="to_comment" type="button" title="直达评论" onclick="FixedCommentBtn();"><i class="fas fa-comments"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'ofneknPnxjaHa2YvphUBlzuo-MdYXbMMI',
      appKey: '8xUt1edqEiOjjPuKwhVj4YyQ',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      requiredFields: ["nick,mail"],        
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="/js/custom.js"></script><script src="https://cdn.jsdelivr.net/gh/weilain/cdn-photo/js/jquery.min.js"></script><div class="aplayer no-destroy" data-id="7453921543" data-server="netease" data-type="playlist" data-volume="0.6" data-fixed="true" data-mini="true" data-listFolded="true" data-order="random" data-preload="none" data-autoplay="true" muted></div ><script src="/js/sun_moon.js" async></script><script data-pjax defer src="/js/custom/fixed_comment.js"></script><script data-pjax defer src="/js/custom/fixed_card_widget.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#fixedcard-dashboard",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="fixedcard-dashboard"><button class="fixedcard-activebtn" type="button" title="用户信息" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-info&quot;,&quot;0&quot;)"><i class="fas fa-address-book"></i></button><button class="fixedcard-activebtn" type="button" title="电子钟" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-clock&quot;,&quot;1&quot;)"><i class="fas fa-cloud-sun"></i></button><button class="fixedcard-activebtn" type="button" title="最新文章" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-recent-post&quot;,&quot;2&quot;)"><i class="fas fa-history"></i></button><div class="fixedcard-user-avatar fixedcard-activebtn" onclick="RemoveFixedCardWidget()"><img class="fixedcard-user-avatar-img" src="https://cdn.jsdelivr.net/gh/lnsslimbo/cdn@img%2Bvideo/blogimg/lnss.jpeg" title="LNSS"></div></div></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="/img/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_injector_config();
  }
  </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax src="https://unpkg.zhimg.com/hexo-butterfly-clock/lib/clock.min.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":20,"vOffset":-60},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html><script type="text/javascript" src="/js/crash_cheat.js"></script>